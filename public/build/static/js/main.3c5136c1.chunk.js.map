{"version":3,"sources":["utils/static_vars.js","config/axios.js","actions/index.js","actions/sessionActions.js","containers/Login/index.jsx","components/AppHeader/HeaderContent.jsx","components/AppHeader/index.jsx","components/SideNav/navOptions.js","components/SideNav/SideNav.jsx","actions/subscriberActions.js","actions/listActions.js","components/ListComponents/UpsertList.jsx","containers/List/CreateList.jsx","utils/moment.js","components/defaultSearchComponent.jsx","components/ListComponents/ManageListTable.jsx","containers/List/ManageList.jsx","components/ListComponents/SubscribersTable.jsx","containers/List/Subscribers.jsx","components/quill.js","components/Templates/TemplateFormFields.jsx","actions/templateActions.js","components/Templates/TemplateForm.jsx","containers/Templates/CreateTemplate.jsx","components/Templates/TemplateTable.jsx","containers/Templates/ManageTemplates.jsx","actions/campaignActions.js","components/Campaigns/CampaignForm.jsx","containers/Campaigns/CreateCampaign.jsx","components/Campaigns/CampaignTable.jsx","components/Campaigns/Analytics.jsx","actions/analyticsActions.js","containers/Campaigns/ManageCampaign.jsx","containers/Campaigns/CampaignDetail.jsx","utils/bcrypt.js","actions/AccountActions.js","components/Accounts/CreateUserForm.jsx","containers/Accounts/CreateUser.jsx","components/Accounts/DeleteUserForm.jsx","components/Accounts/ChangePasswordModal.jsx","components/Accounts/UserTable.jsx","containers/Accounts/ManageUsers.jsx","components/Settings/SettingsForm.jsx","actions/settingsActions.js","containers/Settings/index.jsx","containers/Dashboard/Dashboard.jsx","containers/Content.jsx","containers/Home/index.jsx","App.jsx","reducers/sessionReducer.js","reducers/userListsReducer.js","reducers/subscribersReducer.js","reducers/templatesReducer.js","reducers/campaignsReducer.js","reducers/settingsReducer.js","reducers/analyticsReducer.js","reducers/usersReducer.js","reducers/index.js","config/store.js","index.js"],"names":["regularExpressions","emailValidator","RegExp","passwordValidator","apiUrl","window","location","protocol","hostname","feedbackStatusMapping","feedbackStatusColorMapping","roles","label","value","URL","axios","create","baseURL","LOGOUT","LOGIN","FETCH_USER_LISTS","CLEAR_USER_LISTS","FETCH_SUBSCRIBERS","CLEAR_SUBSCRIBERS","FETCH_TEMPLATES","CLEAR_TEMPLATES","FETCH_CAMPAIGNS","CLEAR_CAMPAIGNS","FETCH_SETTINGS","CLEAR_SETTINGS","FETCH_ANALYTICS","CLEAR_ANALYTICS","FETCH_USERS","CLEAR_USERS","createSession","params","dispatch","a","email","password","remember","changeLoadingState","onError","token","localStorage","getItem","sessionStorage","type","post","response","result","data","interceptors","request","use","config","headers","authorization","error","Promise","reject","setItem","payload","removeItem","connect","ownprops","session","props","Form","useForm","form","React","useState","isLoading","onFormSubmit","setFields","name","field","errors","onChange","el","setFieldsValue","target","id","trim","className","initialValues","onFinish","spinning","indicator","LoadingOutlined","spin","tip","size","Item","validateTrigger","rules","required","message","pattern","prefix","UserOutlined","placeholder","Password","LockOutlined","valuePropName","noStyle","htmlType","Header","useDispatch","user","useSelector","state","overlay","onClick","to","placement","arrow","firstName","style","position","zIndex","height","width","display","justifyContent","alignItems","padding","backgroundImage","HeaderContent","navOptions","link","title","icon","DashboardOutlined","key","UnorderedListOutlined","subOptions","FormOutlined","MailOutlined","TeamOutlined","SettingOutlined","rootSubmenuKeys","subMenuKeyMapping","dashboard","lists","manage","templates","campaigns","users","settings","getInitiallyOpenKey","pathname","paths","split","filter","length","keys","initialSubKey","initialKey","Sider","Layout","renderOption","option","withRouter","setInitialKeys","useEffect","openKeys","setOpenKeys","theme","mode","defaultSelectedKeys","onOpenChange","latestOpenKey","find","indexOf","role","map","item","SubMenu","_","omit","fetchSubscribers","args","pagination","filters","listID","callback","get","console","log","fetchSubscribersCSV","subIDs","onSuccess","Error","_id","$in","select","feedback","createdAt","updatedAt","subscribed","fetchUserLists","editUserList","update","patch","$push","createUserList","listName","tableData","clearUserLists","fileList","setFileList","setTableData","tableColumn","setTableColumn","setIsLoading","values","hideModal","success","faultyRecords","resetFields","onFileRemove","match","subscribers","Dragger","action","info","slice","status","file","columnConfig","Object","startCase","dataIndex","onRemove","InboxOutlined","scroll","x","columns","dataSource","defaultPageSize","CreateList","subTitle","parseTimeStamp","timeStamp","format","moment","getDiffInMilliseconds","timeStamp1","timeStamp2","duration","diff","asMilliseconds","defaultSearchComponent","_this","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","clearSearchFilters","ref","node","searchInput","e","onPressEnter","handleSearch","marginBottom","SearchOutlined","handleSearchReset","filterIcon","filtered","color","searchText","undefined","fontSize","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","setTimeout","EditableContext","createContext","EditableRow","index","component","Provider","EditableCell","editable","children","handleSave","restProps","editing","setEditing","inputRef","useRef","useContext","current","focus","toggleEdit","save","validateFields","childNode","margin","onBlur","marginLeft","EditableTable","sortedInfo","selectedRowKeys","onLoading","pageSize","pageNo","componentDidMount","dispatchFetchUserLists","componentWillUnmount","componentDidUpdate","prevProps","prevState","isEqual","pageDetails","skip","limit","setState","handleChange","sorter","$regex","$options","onSelectedRowsDelete","deleteUserLists","listIDs","err","onSelectChange","row","findIndex","$set","onPaginationChange","this","total","rowSelection","hasSelected","components","body","cell","b","sortOrder","columnKey","order","ellipsis","render","val","col","onCell","disabled","danger","y","rowClassName","showSizeChanger","pageSizeOptions","loading","Component","ownProps","userLists","delete","ManageList","ManageListTable","SubscribersTable","dispatchFetchSubscribers","clearSubscribers","generateColumnConfig","obj","fixed","text","filteredValue","filterMultiple","filterKeys","reduce","deleteSubscribers","exportToCSV","listname","csv","csvFile","Blob","downloadLink","document","createElement","download","url","createObjectURL","href","click","revokeObjectURL","showModal","isModalVisible","DownloadOutlined","UploadOutlined","background","tableLayout","onCancel","footer","onBack","history","goBack","defaultModules","toolbar","script","header","direction","align","list","indent","defaultFormats","Quill","readOnly","read","modules","formats","bodyType","analytics","templateName","htmlBody","subject","fromEmail","fromName","TemplateFormFields","initialFormValues","setBodyType","removedAnalytics","setRemovedAnalytics","flex","Group","buttonStyle","getFieldValue","push","Button","content","delta","source","editor","htmltext","getHTML","getText","TextArea","minHeight","fetchTemplates","createTemplate","editTemplate","templateID","clearTemplates","setinitialFormValues","warning","res","layout","marginTop","TemplateTable","dispatchFetchTemplates","deleteTemplates","templateIDs","pick","EditTwoTone","ManageTemplates","fetchCampaigns","sendEmails","templateOptions","setTemplateOptions","listOptions","setListOptions","selectedTemplate","setSelectedTemplate","selectedList","setSelectedList","Array","isArray","options","template","onFieldsBlur","newTemplateValues","getTemplateValuesFromForm","prevTemplateValues","createCampaign","onSelect","notFoundContent","filterOption","suffix","DownOutlined","generateTemplateFormValues","CreateCampaign","CampaignsTable","dispatchFetchCampaigns","clearCampaigns","deleteCampaigns","campaignIDs","splice","sent","delivered","bounced","open","months","getChartdata","userAnalyticsData","visited","forEach","monthNo","i","Analytics","groupBy","autoFit","shape","point","ManageCampaign","CampaignTable","CampaignDetail","campaignID","campaignName","isTemplateLoading","setIsTemplateLoading","isListLoading","setIsListLoading","isSendEmailsLoading","setIsSendEmailsLoading","isSendTestEmailLoading","setIsSendTestEmailLoading","testModalVisible","setTestModalVisible","testEmail","setTestEmail","fetchTemplatesCallback","fetchUserListsCallback","TestMailModal","test","onSendTestEmail","destroyOnClose","closable","MailTwoTone","allowClear","renderTemplateTitle","Link","contentEditable","dangerouslySetInnerHTML","__html","bcrypt","require","hashCrypt","genSalt","salt","hash","createUser","changePassword","userID","getUsers","deleteUsers","buttonLayout","wrapperCol","xs","offset","sm","md","lg","CreateUserForm","isFormLoading","setIsFormLoading","hashedPassword","hasFeedback","dependencies","validator","rule","resolve","CreateUser","DeleteUserForm","setEmail","requiredMark","emails","onInputChange","ChangePasswordModal","ChangePasswordModalVisible","changeParentState","LockTwoTone","UserTable","dispatchFetchUsers","clearUsers","onChangePasswordClick","ManageUsers","Text","Typography","SettingsForm","getUserSettings","changeUserSettings","MailjetUsername","MailjetPassword","Settings","Dashboard","Content","exact","path","Subscribers","CreateTemplate","Home","sessionReducer","userListsReducer","subscribersListReducer","templatesReducer","campaignsReducer","settingsReducer","analyticsReducer","userReducer","combineReducers","subscribersReducer","usersReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middlewares","thunk","createStore","reducers","applyMiddleware","ReactDOM","store","getElementById"],"mappings":"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","file":"static/js/main.3c5136c1.chunk.js","sourcesContent":["export const regularExpressions = {\r\n  emailValidator: new RegExp(\r\n    /[a-zA-Z0-9._-]{1,}@[a-zA-Z0-9._-]{1,}[.]{1}[a-zA-Z0-9._-]{1,}/\r\n  ),\r\n  passwordValidator: new RegExp(/^.{4,}$/),\r\n};\r\n\r\nexport const ports = {\r\n  serverPort: \"3001\",\r\n  reactPort: \"3000\",\r\n};\r\n\r\nexport const apiUrl = `${window.location.protocol}//${\r\n  window.location.hostname\r\n}${window.location.hostname === \"localhost\" ? \":\" + ports.serverPort : \"\"}`;\r\n\r\nexport const feedbackStatusMapping = [\r\n  \"Unconfirmed\",\r\n  \"Complaint\",\r\n  \"Bounce:Permanent\",\r\n  \"Bounce:Transient\",\r\n  \"Bounce:Undertermined\",\r\n];\r\n\r\nexport const feedbackStatusColorMapping = [\r\n  \"default\",\r\n  \"error\",\r\n  \"warning\",\r\n  \"processing\",\r\n  \"success\",\r\n];\r\n\r\nexport const roles = [\r\n  { label: \"Super Admin\", value: 0 },\r\n  { label: \"Admin\", value: 1 },\r\n  { label: \"User\", value: 2 },\r\n];\r\n","import axios from \"axios\";\r\nimport { apiUrl } from \"../utils/static_vars\";\r\n\r\nconst URL = apiUrl;\r\n\r\nexport default axios.create({\r\n  baseURL: URL,\r\n});\r\n","export const LOGOUT = \"LOGOUT\";\r\nexport const LOGIN = \"LOGIN\";\r\n\r\nexport const FETCH_USER_LISTS = \"FETCH_USER_LISTS\";\r\nexport const CLEAR_USER_LISTS = \"CLEAR_USER_LISTS\";\r\n\r\nexport const FETCH_SUBSCRIBERS = \"FETCH_SUBSCRIBERS\";\r\nexport const CLEAR_SUBSCRIBERS = \"CLEAR_SUBSCRIBERS\";\r\n\r\nexport const FETCH_TEMPLATES = \"FETCH_TEMPLATES\";\r\nexport const CLEAR_TEMPLATES = \"CLEAR_TEMPLATES\";\r\n\r\nexport const FETCH_CAMPAIGNS = \"FETCH_CAMPAIGNS\";\r\nexport const CLEAR_CAMPAIGNS = \"CLEAR_CAMPAIGNS\";\r\n\r\nexport const FETCH_SETTINGS = \"FETCH_SETTINGS\";\r\nexport const CLEAR_SETTINGS = \"CLEAR_SETTINGS\";\r\n\r\nexport const FETCH_ANALYTICS = \"FETCH_ANALYTICS\";\r\nexport const CLEAR_ANALYTICS = \"CLEAR_ANALYTICS\";\r\n\r\nexport const FETCH_USERS = \"FETCH_USERS\";\r\nexport const CLEAR_USERS = \"CLEAR_USERS\";\r\n","import axios from \"../config/axios\";\r\n\r\nimport { LOGIN, LOGOUT } from \".\";\r\n\r\nexport const destroySession = () => ({ type: LOGOUT });\r\n\r\nexport const createSession = (params = {}) => async (dispatch) => {\r\n  const { email, password, remember, changeLoadingState, onError } = params;\r\n  try {\r\n    const token =\r\n      localStorage.getItem(\"token\") || sessionStorage.getItem(\"token\");\r\n    if (!token && !email && !password) return dispatch({ type: LOGOUT });\r\n\r\n    changeLoadingState && changeLoadingState(true);\r\n\r\n    const response = await axios.post(`/auth/login`, {\r\n      email,\r\n      password,\r\n      token,\r\n    });\r\n\r\n    const result = response.data;\r\n\r\n    axios.interceptors.request.use(\r\n      (config) => {\r\n        if (!config.headers.authorization && result.token)\r\n          config.headers.authorization = result.token;\r\n        return config;\r\n      },\r\n      (error) => Promise.reject(error)\r\n    );\r\n\r\n    changeLoadingState && changeLoadingState(false);\r\n    sessionStorage.setItem(\"token\", result.token);\r\n    if (remember) localStorage.setItem(\"token\", result.token);\r\n\r\n    dispatch({ type: LOGIN, payload: result });\r\n  } catch (err) {\r\n    changeLoadingState && changeLoadingState(false);\r\n    localStorage.removeItem(\"token\");\r\n    sessionStorage.removeItem(\"token\");\r\n    onError(err.response);\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { Form, Button, Input, Checkbox, Spin } from \"antd\";\r\nimport { connect } from \"react-redux\";\r\nimport { UserOutlined, LockOutlined, LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nimport { regularExpressions } from \"../../utils/static_vars\";\r\nimport { createSession } from \"../../actions/sessionActions\";\r\n\r\nimport \"./index.css\";\r\n\r\nconst Login = (props) => {\r\n  const [form] = Form.useForm();\r\n  const [isLoading, changeLoadingState] = React.useState(false);\r\n\r\n  const onFormSubmit = async ({ email, password, remember }) => {\r\n    const { createSession } = props;\r\n\r\n    const onError = (error) => {\r\n      if (error) {\r\n        const { data } = error;\r\n\r\n        form.setFields([\r\n          {\r\n            name: data.field,\r\n            errors: [data.error],\r\n          },\r\n        ]);\r\n      }\r\n    };\r\n\r\n    createSession({\r\n      email,\r\n      password,\r\n      remember,\r\n      changeLoadingState,\r\n      onError,\r\n    });\r\n  };\r\n\r\n  const onChange = (el) =>\r\n    form.setFieldsValue({ [el.target.id]: el.target.value.trim() });\r\n\r\n  return (\r\n    <Form\r\n      form={form}\r\n      className=\"login-form\"\r\n      initialValues={{\r\n        email: localStorage.getItem(\"email\"),\r\n        remember: false,\r\n      }}\r\n      onFinish={onFormSubmit}\r\n    >\r\n      <Spin\r\n        spinning={isLoading}\r\n        indicator={<LoadingOutlined spin />}\r\n        tip={`Please Wait...`}\r\n        size={`large`}\r\n      >\r\n        <Form.Item\r\n          name=\"email\"\r\n          validateTrigger=\"onBlur\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please enter your email!\",\r\n            },\r\n            {\r\n              pattern: regularExpressions.emailValidator,\r\n              message: \"Please enter a valid email\",\r\n            },\r\n          ]}\r\n        >\r\n          <Input\r\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n            placeholder=\"Email\"\r\n            onChange={onChange}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please enter your Password!\",\r\n            },\r\n          ]}\r\n        >\r\n          <Input.Password\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            onChange={onChange}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n            <Checkbox>Remember me</Checkbox>\r\n          </Form.Item>\r\n          {/* \r\n          <Button className=\"login-form-forgot\" type=\"link\">\r\n            Forgot password\r\n          </Button> */}\r\n        </Form.Item>\r\n\r\n        <Form.Item>\r\n          <Button\r\n            type=\"primary\"\r\n            htmlType=\"submit\"\r\n            className=\"login-form-button\"\r\n          >\r\n            Log in\r\n          </Button>\r\n        </Form.Item>\r\n      </Spin>\r\n    </Form>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ session }, ownprops) => {\r\n  return { session, ...ownprops };\r\n};\r\n\r\nexport default connect(mapStateToProps, { createSession })(Login);\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Dropdown, Menu, Button } from \"antd\";\r\nimport { UserOutlined } from \"@ant-design/icons\";\r\nimport { destroySession } from \"../../actions/sessionActions\";\r\n\r\nimport \"./header.css\";\r\n\r\nconst Header = () => {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => state.session.user);\r\n  const onLogout = () => dispatch(destroySession());\r\n  return (\r\n    <div className=\"header-content\">\r\n      <Dropdown\r\n        overlay={\r\n          <Menu>\r\n            <Menu.Item onClick={onLogout}>\r\n              <Button type=\"primary\">\r\n                <Link to=\"/\">Logout</Link>\r\n              </Button>\r\n            </Menu.Item>\r\n          </Menu>\r\n        }\r\n        placement=\"bottomCenter\"\r\n        arrow\r\n      >\r\n        <span>\r\n          {user.firstName}\r\n          <UserOutlined />\r\n        </span>\r\n      </Dropdown>{\" \"}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { Layout } from \"antd\";\r\n\r\nimport HeaderContent from \"./HeaderContent\";\r\n\r\nimport \"./header.css\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <Layout.Header\r\n      className=\"header\"\r\n      style={{\r\n        position: \"fixed\",\r\n        zIndex: 10,\r\n        height: \"80px\",\r\n        width: \"100%\",\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        padding: \"0 25px\",\r\n        backgroundImage: \"linear-gradient(to-right,#DE6834,#FFE7D4,#565CB0)\",\r\n      }}\r\n    >\r\n      <div>\r\n        <div className=\"logo\">\r\n          <span>CQ </span> Campaigns\r\n        </div>\r\n      </div>\r\n      <HeaderContent />\r\n    </Layout.Header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import {\r\n  DashboardOutlined,\r\n  UnorderedListOutlined,\r\n  FormOutlined,\r\n  MailOutlined,\r\n  TeamOutlined,\r\n  SettingOutlined,\r\n} from \"@ant-design/icons\";\r\n\r\nexport const navOptions = [\r\n  {\r\n    link: \"/\",\r\n    title: \"Dashboard\",\r\n    icon: <DashboardOutlined />,\r\n    key: 1,\r\n  },\r\n  {\r\n    title: \"Lists\",\r\n    icon: <UnorderedListOutlined />,\r\n    key: \"sub1\",\r\n    link: \"/lists\",\r\n    subOptions: [\r\n      {\r\n        link: \"/lists/create\",\r\n        title: \"Create List\",\r\n        key: 2,\r\n      },\r\n      {\r\n        link: \"/lists\",\r\n        title: \"Manage Lists\",\r\n        key: 3,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"Templates\",\r\n    icon: <FormOutlined />,\r\n    key: \"sub2\",\r\n    link: \"/templates\",\r\n    subOptions: [\r\n      {\r\n        link: \"/templates/create\",\r\n        title: \"Create Template\",\r\n        key: 4,\r\n      },\r\n      {\r\n        link: \"/templates\",\r\n        title: \"Manage Templates\",\r\n        key: 5,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"Campaigns\",\r\n    icon: <MailOutlined />,\r\n    key: \"sub3\",\r\n    link: \"/campaigns\",\r\n    subOptions: [\r\n      {\r\n        link: \"/campaigns/create\",\r\n        title: \"Create Campaign\",\r\n        key: 6,\r\n      },\r\n      {\r\n        link: \"/campaigns\",\r\n        title: \"Manage Campaigns\",\r\n        key: 7,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    title: \"Accounts\",\r\n    icon: <TeamOutlined />,\r\n    key: \"sub4\",\r\n    link: \"/users\",\r\n    subOptions: [\r\n      {\r\n        link: \"/users/create\",\r\n        title: \"Create new account \",\r\n        key: 8,\r\n      },\r\n      {\r\n        link: \"/users/\",\r\n        title: \"Delete account\",\r\n        key: 9,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    link: \"/settings\",\r\n    title: \"Settings\",\r\n    icon: <SettingOutlined />,\r\n    key: 10,\r\n  },\r\n];\r\n\r\nexport const rootSubmenuKeys = [\"sub1\", \"sub2\", \"sub3\", \"sub4\"];\r\n\r\nconst subMenuKeyMapping = {\r\n  dashboard: { link: \"1\" },\r\n  lists: { link: \"sub1\", create: \"2\", manage: \"3\" },\r\n  templates: { link: \"sub2\", create: \"4\", manage: \"5\" },\r\n  campaigns: { link: \"sub3\", create: \"6\", manage: \"7\" },\r\n  users: { link: \"sub4\", create: \"8\", manage: \"9\" },\r\n  settings: { link: \"10\" },\r\n};\r\n\r\nexport const getInitiallyOpenKey = (pathname) => {\r\n  if (pathname === \"/\") return {};\r\n  const paths = pathname.split(\"/\").filter((el) => el.length > 0);\r\n  const keys = {};\r\n\r\n  keys.initialSubKey = subMenuKeyMapping[paths[0]].link;\r\n\r\n  switch (paths[0]) {\r\n    case \"dashboard\":\r\n    case \"settings\":\r\n      keys.initialKey = subMenuKeyMapping[paths[0]].link;\r\n      break;\r\n    default:\r\n      keys.initialKey =\r\n        paths[1] !== \"create\"\r\n          ? subMenuKeyMapping[paths[0]].manage\r\n          : subMenuKeyMapping[paths[0]].create;\r\n  }\r\n\r\n  return keys;\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Layout, Menu } from \"antd\";\r\nimport _ from \"lodash\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\n\r\nimport { navOptions, rootSubmenuKeys, getInitiallyOpenKey } from \"./navOptions\";\r\n\r\nconst { Sider } = Layout;\r\n\r\nconst SideNav = ({ location: { pathname } }) => {\r\n  const [{ initialKey, initialSubKey }, setInitialKeys] = React.useState(\r\n    getInitiallyOpenKey(pathname)\r\n  );\r\n  useEffect(() => {\r\n    setInitialKeys(getInitiallyOpenKey(pathname));\r\n  }, [pathname]);\r\n  const [openKeys, setOpenKeys] = React.useState([initialSubKey]);\r\n\r\n  const onOpenChange = (keys) => {\r\n    const latestOpenKey = keys.find((key) => openKeys.indexOf(key) === -1);\r\n    if (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\r\n      setOpenKeys(keys);\r\n    } else {\r\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\r\n    }\r\n  };\r\n  const user = useSelector((state) => state.session.user);\r\n\r\n  return (\r\n    <Sider>\r\n      <Menu\r\n        theme=\"dark\"\r\n        mode=\"inline\"\r\n        style={{\r\n          height: \"100%\",\r\n          width: \"200px\",\r\n          position: \"fixed\",\r\n        }}\r\n        defaultSelectedKeys={[initialKey || \"1\"]}\r\n        openKeys={openKeys}\r\n        onOpenChange={onOpenChange}\r\n      >\r\n        {navOptions\r\n          .filter((el) => (user.role > 1 ? el.link !== `/users` : true))\r\n          .map((item) =>\r\n            item.subOptions ? renderWithSubOptions(item) : renderOption(item)\r\n          )}\r\n      </Menu>\r\n    </Sider>\r\n  );\r\n};\r\n\r\nfunction renderOption(option) {\r\n  return (\r\n    <Menu.Item {...option}>\r\n      <Link to={option.link}>{option.title}</Link>\r\n    </Menu.Item>\r\n  );\r\n}\r\n\r\nfunction renderWithSubOptions(option) {\r\n  return (\r\n    <Menu.SubMenu {..._.omit(option, [\"subOptions\"])}>\r\n      {option.subOptions.map((item) => renderOption(item))}\r\n    </Menu.SubMenu>\r\n  );\r\n}\r\n\r\nexport default withRouter(SideNav);\r\n","import axios from \"../config/axios\";\r\nimport { FETCH_SUBSCRIBERS, CLEAR_SUBSCRIBERS } from \".\";\r\n\r\nexport const fetchSubscribers = (args = {}) => async (dispatch) => {\r\n  const { pagination, filters, listID, callback } = args;\r\n  //listID required\r\n  try {\r\n    const { data } = await axios.get(`/api/list/${listID}`, {\r\n      params: { filters, pagination },\r\n    });\r\n    if (callback) callback();\r\n\r\n    dispatch({ type: FETCH_SUBSCRIBERS, payload: data });\r\n  } catch (error) {\r\n    console.log({ error });\r\n  }\r\n};\r\n\r\nexport const clearSubscribers = () => ({\r\n  type: CLEAR_SUBSCRIBERS,\r\n});\r\n\r\nexport const deleteSubscribers = (args = {}) => async (dispatch) => {\r\n  const { listID, subIDs, onSuccess, onError, pagination, filters } = args;\r\n  //subIDs, listID required\r\n  try {\r\n    const { data } = await axios.delete(\"/api/subscriber\", {\r\n      params: {\r\n        listID,\r\n        subIDs,\r\n      },\r\n    });\r\n\r\n    //if (onSuccess) onSuccess(data);\r\n    fetchSubscribers({\r\n      pagination,\r\n      filters,\r\n      listID,\r\n      callback: () => onSuccess(data),\r\n    })(dispatch);\r\n  } catch (error) {\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n\r\nexport const fetchSubscribersCSV = async (args = {}) => {\r\n  const { listID, subIDs = [], onSuccess, onError } = args;\r\n  // listID required\r\n  try {\r\n    if (!listID) throw new Error(\"No listID provided\");\r\n    const params = {};\r\n    if (subIDs.length)\r\n      params.filters = {\r\n        _id: { $in: subIDs },\r\n      };\r\n    params.select = {\r\n      _id: 0,\r\n      feedback: 0,\r\n      createdAt: 0,\r\n      updatedAt: 0,\r\n      subscribed: 0,\r\n    };\r\n    const { data } = await axios.get(`/api/list/${listID}/download`, {\r\n      params,\r\n    });\r\n\r\n    if (onSuccess) onSuccess(data);\r\n  } catch (error) {\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n","import axios from \"../config/axios\";\r\nimport _ from \"lodash\";\r\nimport { FETCH_USER_LISTS, CLEAR_USER_LISTS } from \".\";\r\nimport { fetchSubscribers } from \"./subscriberActions\";\r\n\r\nexport const fetchUserLists = (args = {}) => async (dispatch) => {\r\n  try {\r\n    const { callback } = args;\r\n    const { data } = await axios.get(\"/api/list/\", {\r\n      params: _.omit(args, \"callback\"),\r\n    });\r\n    if (callback) callback();\r\n    dispatch({ type: FETCH_USER_LISTS, payload: data });\r\n  } catch (error) {\r\n    console.log({ error });\r\n  }\r\n};\r\n\r\nexport const deleteUserLists = (args = {}) => async (dispatch) => {\r\n  const { listIDs, select, pagination, filters, onSuccess, onError } = args;\r\n  try {\r\n    const { data } = await axios.delete(\"/api/list\", {\r\n      params: { listIDs },\r\n    });\r\n    if (onSuccess) onSuccess(data);\r\n    fetchUserLists({ select, filters, pagination })(dispatch);\r\n  } catch (error) {\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n\r\nexport const editUserList = (args = {}) => async (dispatch) => {\r\n  const { update, select, pagination, filters, onSuccess, onError } = args;\r\n  try {\r\n    const { data } = await axios.patch(\"/api/list\", update);\r\n    if (onSuccess) onSuccess(data);\r\n    //if (select && filters && pagination)\r\n    if (update.update.$push) {\r\n      fetchSubscribers({ listID: update._id, filters, pagination })(dispatch);\r\n    } else fetchUserLists({ select, filters, pagination })(dispatch);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n\r\nexport const createUserList = async (args = {}) => {\r\n  const { listName, tableData: data, onSuccess, onError } = args;\r\n  //listName, tableData required\r\n  try {\r\n    const response = await axios.post(\"/api/list/\", {\r\n      listName,\r\n      data,\r\n    });\r\n    if (onSuccess) onSuccess(response.data);\r\n  } catch (error) {\r\n    if (onError) onError(error);\r\n    console.log({ error });\r\n  }\r\n};\r\n\r\nexport const clearUserLists = () => ({ type: CLEAR_USER_LISTS });\r\n","import React, { useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport { Form, Input, Button, Upload, message, Table, Spin } from \"antd\";\r\nimport { InboxOutlined } from \"@ant-design/icons\";\r\n\r\nimport { createUserList, editUserList } from \"../../actions/listActions\";\r\nimport { apiUrl } from \"../../utils/static_vars\";\r\n\r\nimport \"./Lists.css\";\r\n\r\nconst UpsertList = (props) => {\r\n  const [fileList, setFileList] = useState([]);\r\n  const [tableData, setTableData] = useState([]);\r\n  const [tableColumn, setTableColumn] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [form] = Form.useForm();\r\n\r\n  const token = useSelector((state) => state.session.token);\r\n  const dispatch = useDispatch();\r\n\r\n  const onFormSubmit = async (values) => {\r\n    setIsLoading(true);\r\n    const onSuccess = (data) => {\r\n      if (props.hideModal) {\r\n        props.hideModal();\r\n      }\r\n      setIsLoading(false);\r\n      message.success(data.success);\r\n      if (data.faultyRecords.length !== 0) {\r\n        message.error(`${data.faultyRecords.length} Faulty record(s)`);\r\n      }\r\n      form.resetFields();\r\n      onFileRemove();\r\n    };\r\n    const onError = (error) => {\r\n      setIsLoading(false);\r\n      console.log(\"onError\", error);\r\n      message.error(error.response.data.error);\r\n    };\r\n\r\n    if (props.match.params.id) {\r\n      const update = {\r\n        _id: props.match.params.id,\r\n        update: { $push: { subscribers: tableData } },\r\n      };\r\n      dispatch(\r\n        editUserList({\r\n          update,\r\n          onSuccess,\r\n          onError,\r\n          pagination: props.pagination,\r\n        })\r\n      );\r\n    } else {\r\n      createUserList({\r\n        listName: values.listName,\r\n        tableData,\r\n        onSuccess,\r\n        onError,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (info) => {\r\n    let fileList = [...info.fileList];\r\n\r\n    fileList = fileList.slice(-1);\r\n    setFileList(fileList);\r\n\r\n    const status = info.file.status;\r\n    if (status !== \"uploading\") {\r\n    }\r\n    if (status === \"done\") {\r\n      if (typeof info.file.response === \"string\")\r\n        return message.error(info.file.response);\r\n\r\n      message.success(`${info.file.name} file uploaded successfully.`);\r\n      const columnConfig = Object.keys(\r\n        _.omit(info.file.response[0], \"key\")\r\n      ).map((key) => ({\r\n        title: _.startCase(key),\r\n        key,\r\n        dataIndex: key,\r\n      }));\r\n      setTableColumn(columnConfig);\r\n      setTableData(info.file.response);\r\n    } else if (status === \"error\") {\r\n      message.error(`${info.file.name} file upload failed.`);\r\n    }\r\n  };\r\n\r\n  const onFileRemove = () => {\r\n    setFileList([]);\r\n    setTableColumn([]);\r\n    setTableData([]);\r\n  };\r\n\r\n  return (\r\n    <Spin spinning={isLoading} tip=\"Loading...\" size=\"large\">\r\n      <Form\r\n        form={form}\r\n        className=\"create-list-form\"\r\n        size=\"large\"\r\n        onFinish={onFormSubmit}\r\n      >\r\n        {!props.match.params.id && (\r\n          <Form.Item\r\n            name=\"listName\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please enter list name\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Enter List Name\"></Input>\r\n          </Form.Item>\r\n        )}\r\n        <Form.Item\r\n          name=\"dragger\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please Upload a file\",\r\n            },\r\n          ]}\r\n        >\r\n          <Upload.Dragger\r\n            name=\"file\"\r\n            headers={{ authorization: token }}\r\n            action={`${apiUrl}/api/list/upload`}\r\n            onChange={handleFileChange}\r\n            fileList={fileList}\r\n            onRemove={onFileRemove}\r\n          >\r\n            <p className=\"ant-upload-drag-icon\">\r\n              <InboxOutlined />\r\n            </p>\r\n            <h2>Import CSV</h2>\r\n            <p className=\"ant-upload-text\">\r\n              Please ensure the first row of the CSV file contains column names.\r\n              This row must contain an email header.\r\n            </p>\r\n            <p className=\"ant-upload-hint\">\r\n              Click or drag file to this area to upload\r\n            </p>\r\n          </Upload.Dragger>\r\n        </Form.Item>\r\n        {tableData.length ? (\r\n          <>\r\n            <Table\r\n              scroll={{ x: true }}\r\n              columns={tableColumn}\r\n              dataSource={tableData}\r\n              pagination={{ defaultPageSize: 5 }}\r\n            />\r\n            <Form.Item>\r\n              <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n                <Button type=\"primary\" htmlType=\"submit\">\r\n                  Submit\r\n                </Button>\r\n              </div>\r\n            </Form.Item>\r\n          </>\r\n        ) : null}\r\n      </Form>\r\n    </Spin>\r\n  );\r\n};\r\n\r\nexport default withRouter(UpsertList);\r\n","import React from \"react\";\r\nimport { PageHeader, Divider } from \"antd\";\r\n\r\nimport UpsertList from \"../../components/ListComponents/UpsertList\";\r\n\r\nconst CreateList = (props) => {\r\n  return (\r\n    <div>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Create Lists\"\r\n        subTitle=\"Create your lists here\"\r\n      />\r\n      <Divider />\r\n      <UpsertList />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateList;\r\n","import moment from \"moment\";\r\n\r\nexport const parseTimeStamp = (timeStamp, format) =>\r\n  moment(timeStamp).format(format);\r\n\r\nexport const parseMilliseconds = (timeStamp, format) =>\r\n  moment(timeStamp, \"x\").format(format);\r\n\r\nexport const getDiffInMilliseconds = (timeStamp1, timeStamp2) =>\r\n  moment.duration(moment(timeStamp1).diff(moment(timeStamp2))).asMilliseconds();\r\n","import React from \"react\";\r\nimport { Input, Button } from \"antd\";\r\nimport { SearchOutlined } from \"@ant-design/icons\";\r\n\r\nconst defaultSearchComponent = (_this, dataIndex) => ({\r\n  filterDropdown: ({\r\n    setSelectedKeys,\r\n    selectedKeys,\r\n    confirm,\r\n    clearFilters,\r\n  }) => {\r\n    _this.clearSearchFilters = clearFilters;\r\n    return (\r\n      <div style={{ padding: 8 }}>\r\n        <Input\r\n          ref={(node) => {\r\n            _this.searchInput = node;\r\n          }}\r\n          placeholder={`Search ${dataIndex}`}\r\n          value={selectedKeys[0]}\r\n          onChange={(e) =>\r\n            setSelectedKeys(e.target.value ? [e.target.value] : [])\r\n          }\r\n          onPressEnter={() =>\r\n            _this.handleSearch(selectedKeys, confirm, dataIndex)\r\n          }\r\n          style={{ width: 188, marginBottom: 8, display: \"block\" }}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => _this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n          icon={<SearchOutlined />}\r\n          size=\"small\"\r\n          style={{ width: 90 }}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button\r\n          onClick={() => _this.handleSearchReset(clearFilters)}\r\n          size=\"small\"\r\n          style={{ width: 90 }}\r\n        >\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    );\r\n  },\r\n  filterIcon: (filtered) => (\r\n    <SearchOutlined\r\n      style={{\r\n        color: _this.state.searchText ? \"#1890ff\" : undefined,\r\n        fontSize: \"1rem\",\r\n      }}\r\n    />\r\n  ),\r\n  onFilter: (value, record) =>\r\n    record[dataIndex]\r\n      ? record[dataIndex].toString().toLowerCase().includes(value.toLowerCase())\r\n      : \"\",\r\n  onFilterDropdownVisibleChange: (visible) => {\r\n    if (visible) {\r\n      setTimeout(() => _this.searchInput.select(), 100);\r\n    }\r\n  },\r\n});\r\n\r\nexport default defaultSearchComponent;\r\n","import React, { useContext, useState, useEffect, useRef } from \"react\";\r\nimport _ from \"lodash\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Table, Input, Button, Form, message, Tooltip } from \"antd\";\r\nimport { UnorderedListOutlined } from \"@ant-design/icons\";\r\n\r\nimport { parseTimeStamp, getDiffInMilliseconds } from \"../../utils/moment\";\r\nimport defaultSearchComponent from \"../defaultSearchComponent\";\r\n\r\nimport \"./table.css\";\r\n\r\nimport {\r\n  fetchUserLists,\r\n  deleteUserLists,\r\n  editUserList,\r\n  clearUserLists,\r\n} from \"../../actions/listActions\";\r\n\r\nconst EditableContext = React.createContext(null);\r\n\r\nconst EditableRow = ({ index, ...props }) => {\r\n  const [form] = Form.useForm();\r\n  return (\r\n    <Form form={form} component={false}>\r\n      <EditableContext.Provider value={form}>\r\n        <tr {...props} />\r\n      </EditableContext.Provider>\r\n    </Form>\r\n  );\r\n};\r\n\r\nconst EditableCell = ({\r\n  title,\r\n  editable,\r\n  children,\r\n  dataIndex,\r\n  record,\r\n  handleSave,\r\n  ...restProps\r\n}) => {\r\n  const [editing, setEditing] = useState(false);\r\n  const inputRef = useRef(null);\r\n  const form = useContext(EditableContext);\r\n\r\n  useEffect(() => {\r\n    if (editing) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [editing]);\r\n\r\n  const toggleEdit = () => {\r\n    setEditing(!editing);\r\n    form.setFieldsValue({\r\n      [dataIndex]: record[dataIndex],\r\n    });\r\n  };\r\n\r\n  const save = async () => {\r\n    try {\r\n      const values = await form.validateFields();\r\n      toggleEdit();\r\n      handleSave({ ...record, ...values });\r\n    } catch (errInfo) {\r\n      console.log(\"Save failed:\", errInfo);\r\n    }\r\n  };\r\n\r\n  let childNode = children;\r\n\r\n  if (editable) {\r\n    childNode = editing ? (\r\n      <Form.Item\r\n        style={{\r\n          margin: 0,\r\n        }}\r\n        name={dataIndex}\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: `${title} is required.`,\r\n          },\r\n        ]}\r\n      >\r\n        <Input ref={inputRef} onPressEnter={save} onBlur={save} />\r\n      </Form.Item>\r\n    ) : (\r\n      <div className=\"table-list-name-col\">\r\n        <div className=\"editable-cell-value-wrap\" onClick={toggleEdit}>\r\n          {children}\r\n        </div>\r\n        <Link to={`/lists/${record._id}`} className=\"link\">\r\n          <Tooltip placement=\"left\" title=\"view\" color=\"blue\">\r\n            <UnorderedListOutlined\r\n              title=\"view list\"\r\n              style={{ fontSize: \"1.3rem\", marginLeft: \"10px\" }}\r\n            />\r\n          </Tooltip>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <td {...restProps}>{childNode}</td>;\r\n};\r\n\r\nclass EditableTable extends React.Component {\r\n  state = {\r\n    searchText: \"\",\r\n    sortedInfo: {},\r\n    selectedRowKeys: [],\r\n    onLoading: false,\r\n    filters: {},\r\n    pageSize: 5,\r\n    pageNo: 1,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.dispatchFetchUserLists();\r\n  };\r\n\r\n  componentWillUnmount = () => this.props.clearUserLists();\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    const { pageSize, pageNo, filters } = this.state;\r\n    if (\r\n      !_.isEqual(\r\n        { pageSize, pageNo, ...filters },\r\n        {\r\n          pageSize: prevState.pageSize,\r\n          pageNo: prevState.pageNo,\r\n          ...prevState.filters,\r\n        }\r\n      )\r\n    ) {\r\n      this.dispatchFetchUserLists();\r\n    }\r\n  };\r\n\r\n  dispatchFetchUserLists = (pageDetails) => {\r\n    const { pageSize, pageNo } = pageDetails || this.state;\r\n    const { filters } = this.state;\r\n    const pagination = { skip: (pageNo - 1) * pageSize, limit: pageSize };\r\n    const select = [\"name\", \"createdAt\", \"updatedAt\", \"total\"];\r\n    this.setState({ onLoading: true });\r\n    const callback = () => {\r\n      this.setState({ onLoading: false });\r\n    };\r\n    this.props.fetchUserLists({ select, filters, pagination, callback });\r\n  };\r\n\r\n  handleChange = (pagination, filters, sorter) => {\r\n    this.setState({\r\n      sortedInfo: sorter,\r\n    });\r\n  };\r\n\r\n  // Functions for Search Component\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    // confirm();\r\n\r\n    if (selectedKeys[0])\r\n      this.setState({\r\n        filters: {\r\n          name: {\r\n            $regex: selectedKeys[0],\r\n            $options: \"$i\",\r\n          },\r\n        },\r\n      });\r\n\r\n    this.setState({\r\n      searchText: selectedKeys[0],\r\n    });\r\n  };\r\n\r\n  handleSearchReset = (clearFilters) => {\r\n    clearFilters();\r\n    this.setState({ searchText: \"\", filters: {} });\r\n  };\r\n\r\n  //selectedRowKeys functions\r\n  onSelectedRowsDelete = async () => {\r\n    const { selectedRowKeys, pageSize, pageNo } = this.state;\r\n    const { tableData, deleteUserLists } = this.props;\r\n\r\n    const listIDs = selectedRowKeys.map((index) => tableData[index - 1][\"_id\"]);\r\n\r\n    this.setState({ onLoading: true });\r\n\r\n    const select = [\"name\", \"createdAt\", \"updatedAt\", \"total\"];\r\n\r\n    const onSuccess = (data) => {\r\n      const state = { onLoading: false, selectedRowKeys: [] };\r\n      if (selectedRowKeys.length === tableData.length)\r\n        state.pageNo = pageNo > 1 ? pageNo - 1 : 1;\r\n\r\n      this.setState(state);\r\n\r\n      message.success(data);\r\n    };\r\n    const onError = (err) => {\r\n      this.setState({ onLoading: false });\r\n      message.error(err.response.data.error);\r\n      console.log({ err });\r\n    };\r\n\r\n    const skip =\r\n      ((selectedRowKeys.length === tableData.length\r\n        ? pageNo > 1\r\n          ? pageNo - 1\r\n          : 1\r\n        : pageNo) -\r\n        1) *\r\n      pageSize;\r\n\r\n    const pagination = { skip, limit: pageSize };\r\n    deleteUserLists({ select, listIDs, onSuccess, onError, pagination });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys) => this.setState({ selectedRowKeys });\r\n\r\n  handleSave = (row) => {\r\n    const { editUserList, tableData } = this.props;\r\n\r\n    if (_.findIndex(tableData, { _id: row._id, name: row.name }) !== -1) return;\r\n\r\n    const select = [\"name\", \"createdAt\", \"updatedAt\", \"total\"];\r\n    const onSuccess = (data) => {\r\n      message.success(data);\r\n    };\r\n    const onError = (err) => {\r\n      message.error(err.response.data.error);\r\n      console.log({ err });\r\n    };\r\n    const update = {\r\n      _id: row._id,\r\n      update: {\r\n        $set: { name: row.name },\r\n      },\r\n    };\r\n    const { pageSize, pageNo } = this.state;\r\n    const pagination = { skip: (pageNo - 1) * pageSize, limit: pageSize };\r\n    editUserList({ update, select, pagination, onSuccess, onError });\r\n  };\r\n\r\n  onPaginationChange = (pageNo, pageSize) => {\r\n    this.setState({ pageSize, pageNo });\r\n  };\r\n\r\n  render() {\r\n    const { sortedInfo, selectedRowKeys, onLoading, pageNo } = this.state;\r\n    const { tableData, total } = this.props;\r\n\r\n    const rowSelection = {\r\n      selectedRowKeys,\r\n      onChange: this.onSelectChange,\r\n    };\r\n\r\n    const hasSelected = selectedRowKeys.length > 0;\r\n\r\n    const components = {\r\n      body: {\r\n        row: EditableRow,\r\n        cell: EditableCell,\r\n      },\r\n    };\r\n\r\n    const columnConfig = [\r\n      {\r\n        title: \"List Name\",\r\n        key: \"name\",\r\n        dataIndex: \"name\",\r\n        editable: true,\r\n        ...defaultSearchComponent(this, \"name\"),\r\n      },\r\n      {\r\n        title: \"Total\",\r\n        key: \"total\",\r\n        dataIndex: \"total\",\r\n        sorter: (a, b) => a.total - b.total,\r\n        sortOrder: sortedInfo.columnKey === \"total\" && sortedInfo.order,\r\n        ellipsis: true,\r\n      },\r\n      {\r\n        title: \"Created At\",\r\n        key: \"createdAt\",\r\n        dataIndex: \"createdAt\",\r\n        render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n        sorter: (a, b) => getDiffInMilliseconds(a.createdAt, b.createdAt),\r\n\r\n        sortOrder: sortedInfo.columnKey === \"createdAt\" && sortedInfo.order,\r\n        ellipsis: true,\r\n      },\r\n      {\r\n        title: \"Updated At\",\r\n        key: \"updatedAt\",\r\n        dataIndex: \"updatedAt\",\r\n        render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n        sorter: (a, b) => getDiffInMilliseconds(a.updatedAt, b.updatedAt),\r\n        sortOrder: sortedInfo.columnKey === \"updatedAt\" && sortedInfo.order,\r\n        ellipsis: true,\r\n      },\r\n    ];\r\n\r\n    const columns = columnConfig.map((col) => {\r\n      if (!col.editable) {\r\n        return col;\r\n      }\r\n\r\n      return {\r\n        ...col,\r\n        onCell: (record) => ({\r\n          record,\r\n          editable: col.editable,\r\n          dataIndex: col.dataIndex,\r\n          title: col.title,\r\n          handleSave: this.handleSave,\r\n        }),\r\n      };\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          <div>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={this.onSelectedRowsDelete}\r\n              disabled={!hasSelected}\r\n              danger\r\n            >\r\n              Delete\r\n            </Button>\r\n            <span style={{ marginLeft: 8 }}>\r\n              {hasSelected ? `Selected ${selectedRowKeys.length} items` : \"\"}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <Button\r\n              onClick={() => this.handleSearchReset(this.clearSearchFilters)}\r\n            >\r\n              Clear Filters\r\n            </Button>\r\n            <Button onClick={() => this.setState({ sortedInfo: {} })}>\r\n              Clear Sorters\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        <Table\r\n          scroll={{ x: true, y: 600 }}\r\n          rowClassName={() => \"editable-row\"}\r\n          components={components}\r\n          rowSelection={rowSelection}\r\n          dataSource={tableData}\r\n          columns={columns}\r\n          pagination={{\r\n            showSizeChanger: true,\r\n            onChange: this.onPaginationChange,\r\n            total,\r\n            pageSizeOptions: [5, 10, 20, 50],\r\n            defaultPageSize: 5,\r\n            current: pageNo,\r\n          }}\r\n          onChange={this.handleChange}\r\n          loading={onLoading}\r\n        ></Table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = ({ userLists }, ownProps) => ({\r\n  ...ownProps,\r\n  tableData: userLists.data,\r\n  total: userLists.total,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  fetchUserLists,\r\n  clearUserLists,\r\n  deleteUserLists,\r\n  editUserList,\r\n})(EditableTable);\r\n","import React from \"react\";\r\nimport { PageHeader, Divider } from \"antd\";\r\n\r\nimport ManageListTable from \"../../components/ListComponents/ManageListTable\";\r\n\r\nclass ManageList extends React.Component {\r\n  render() {\r\n    return (\r\n      <>\r\n        <PageHeader\r\n          className=\"site-page-header\"\r\n          title=\"Manage Lists\"\r\n          subTitle=\"Edit or Delete your Lists here\"\r\n        />\r\n        <Divider />\r\n        <ManageListTable />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManageList;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport { Table, Button, message, Tag } from \"antd\";\r\nimport { DownloadOutlined, UploadOutlined } from \"@ant-design/icons\";\r\n\r\nimport defaultSearchComponent from \"../defaultSearchComponent\";\r\nimport {\r\n  fetchSubscribers,\r\n  clearSubscribers,\r\n  deleteSubscribers,\r\n  fetchSubscribersCSV,\r\n} from \"../../actions/subscriberActions\";\r\nimport UpsertList from \"./UpsertList\";\r\nimport { parseTimeStamp, getDiffInMilliseconds } from \"../../utils/moment\";\r\nimport {\r\n  feedbackStatusMapping,\r\n  feedbackStatusColorMapping,\r\n} from \"../../utils/static_vars\";\r\nimport Modal from \"antd/lib/modal/Modal\";\r\n\r\nclass SubscribersTable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      searchText: \"\",\r\n      sortedInfo: {},\r\n      selectedRowKeys: [],\r\n      isModalVisible: false,\r\n      onLoading: false,\r\n      filters: {},\r\n      pageSize: 5,\r\n      pageNo: 1,\r\n      columns: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.dispatchFetchSubscribers();\r\n  };\r\n\r\n  componentWillUnmount = () => this.props.clearSubscribers();\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    let { pageSize, pageNo, filters, searchText } = this.state;\r\n    const { tableData } = this.props;\r\n\r\n    if (!prevProps.tableData && tableData) {\r\n      this.generateColumnConfig();\r\n    }\r\n\r\n    if (\r\n      !_.isEqual(\r\n        { pageSize, pageNo, ...filters, searchText },\r\n        {\r\n          pageSize: prevState.pageSize,\r\n          pageNo: prevState.pageNo,\r\n          searchText: prevState.searchText,\r\n          ...prevState.filters,\r\n        }\r\n      )\r\n    ) {\r\n      this.generateColumnConfig();\r\n      this.dispatchFetchSubscribers();\r\n    }\r\n  };\r\n\r\n  generateColumnConfig = () => {\r\n    let { filters, sortedInfo } = this.state;\r\n    const { tableData } = this.props;\r\n    if (!tableData || !tableData.length) return;\r\n    let columnsConfig = [\r\n      ...Object.keys(\r\n        _.omit(tableData[0], [\"key\", \"_id\", \"subscribed\", \"feedback\"])\r\n      ),\r\n      \"subscribed\",\r\n      \"feedback\",\r\n    ].map((key) => {\r\n      let obj = {\r\n        title: _.startCase(key),\r\n        key,\r\n        dataIndex: key,\r\n        width: \"10vw\",\r\n      };\r\n      switch (key) {\r\n        case \"name\":\r\n          return { ...obj, ...defaultSearchComponent(this, \"name\") };\r\n        case \"createdAt\":\r\n          return {\r\n            ...obj,\r\n            render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n            sorter: (a, b) => getDiffInMilliseconds(a.createdAt, b.createdAt),\r\n            sortOrder: sortedInfo.columnKey === \"createdAt\" && sortedInfo.order,\r\n            ellipsis: true,\r\n          };\r\n        case \"updatedAt\":\r\n          return {\r\n            ...obj,\r\n            render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n            sorter: (a, b) => getDiffInMilliseconds(a.updatedAt, b.updatedAt),\r\n            sortOrder: sortedInfo.columnKey === \"updatedAt\" && sortedInfo.order,\r\n            ellipsis: true,\r\n          };\r\n        case \"subscribed\":\r\n          return {\r\n            ...obj,\r\n            fixed: \"right\",\r\n            filters: [\r\n              { text: \"Subscribed\", value: true },\r\n              { text: \"Unsubscribed\", value: false },\r\n            ],\r\n            filteredValue: filters[key] || null,\r\n            filterMultiple: false,\r\n            render: (val) =>\r\n              val ? (\r\n                <Tag color=\"success\">Subscribed</Tag>\r\n              ) : (\r\n                <Tag color=\"error\">Unsubscribed</Tag>\r\n              ),\r\n          };\r\n        case \"feedback\":\r\n          return {\r\n            ...obj,\r\n            fixed: \"right\",\r\n            filteredValue: filters[key] || null,\r\n            filters: feedbackStatusMapping.map((text, value) => ({\r\n              text,\r\n              value,\r\n            })),\r\n            render: (val) => (\r\n              <Tag color={feedbackStatusColorMapping[val]}>\r\n                {feedbackStatusMapping[val]}\r\n              </Tag>\r\n            ),\r\n          };\r\n        default:\r\n          return obj;\r\n      }\r\n    });\r\n    return columnsConfig;\r\n  };\r\n\r\n  dispatchFetchSubscribers = (pageDetails) => {\r\n    const { pageSize, pageNo, searchText } = pageDetails\r\n      ? pageDetails\r\n      : this.state;\r\n    let { filters } = this.state;\r\n\r\n    const filterKeys = Object.keys(filters).filter(\r\n      (key) => filters[key] && filters[key].length\r\n    );\r\n    filters = filterKeys.length\r\n      ? filterKeys.reduce((obj, value) => {\r\n          obj[value] = { $in: filters[value] };\r\n          return obj;\r\n        }, {})\r\n      : {};\r\n    filters = {\r\n      ...filters,\r\n      name: {\r\n        $regex: searchText,\r\n        $options: \"$i\",\r\n      },\r\n    };\r\n\r\n    const pagination = { skip: (pageNo - 1) * pageSize, limit: pageSize };\r\n    const listID = this.props.match.params.id;\r\n    this.setState({ onLoading: true });\r\n\r\n    const callback = () => {\r\n      this.setState({ onLoading: false });\r\n    };\r\n    this.props.fetchSubscribers({ filters, pagination, listID, callback });\r\n  };\r\n\r\n  handleChange = (pagination, filters, sorter) => {\r\n    this.setState({\r\n      sortedInfo: sorter,\r\n      filters,\r\n    });\r\n  };\r\n\r\n  // Functions for Search Component\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    // confirm();\r\n    if (selectedKeys[0]) {\r\n      this.setState({\r\n        searchText: selectedKeys[0],\r\n      });\r\n    }\r\n  };\r\n\r\n  handleSearchReset = (clearFilters) => {\r\n    clearFilters();\r\n    this.setState({ searchText: \"\", filters: {} });\r\n  };\r\n\r\n  onSelectedRowsDelete = async () => {\r\n    const { selectedRowKeys, pageSize, pageNo, filters } = this.state;\r\n    const { tableData, deleteSubscribers } = this.props;\r\n\r\n    const listID = this.props.match.params.id;\r\n    const subIDs = selectedRowKeys.map((index) => tableData[index - 1][\"_id\"]);\r\n\r\n    this.setState({ onLoading: true });\r\n\r\n    const onSuccess = (data) => {\r\n      const state = { onLoading: false, selectedRowKeys: [] };\r\n      if (selectedRowKeys.length === tableData.length)\r\n        state.pageNo = pageNo > 1 ? pageNo - 1 : 1;\r\n\r\n      this.setState(state);\r\n      message.success(data);\r\n    };\r\n    const onError = (err) => {\r\n      this.setState({ onLoading: false });\r\n      message.error(err.response.data.error);\r\n      console.log({ err });\r\n    };\r\n    const skip =\r\n      ((selectedRowKeys.length === tableData.length\r\n        ? pageNo > 1\r\n          ? pageNo - 1\r\n          : 1\r\n        : pageNo) -\r\n        1) *\r\n      pageSize;\r\n    const pagination = { skip, limit: pageSize };\r\n    deleteSubscribers({\r\n      listID,\r\n      subIDs,\r\n      onSuccess,\r\n      onError,\r\n      pagination,\r\n      filters,\r\n    });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys) => this.setState({ selectedRowKeys });\r\n\r\n  onPaginationChange = (pageNo, pageSize) => {\r\n    this.setState({ pageSize, pageNo });\r\n  };\r\n\r\n  exportToCSV = async () => {\r\n    const listID = this.props.match.params.id;\r\n    const { tableData } = this.props;\r\n    const { selectedRowKeys } = this.state;\r\n    const subIDs = selectedRowKeys.map((key) => tableData[key - 1]._id);\r\n    await fetchSubscribersCSV({\r\n      listID,\r\n      subIDs,\r\n      onSuccess: ({ listname, csv }) => {\r\n        let csvFile = new Blob([csv], { type: \"text/csv\" });\r\n        let downloadLink = document.createElement(\"a\");\r\n        downloadLink.download = `${listname}.csv`;\r\n        const url = window.URL.createObjectURL(csvFile);\r\n        downloadLink.href = url;\r\n        downloadLink.click();\r\n        window.URL.revokeObjectURL(url);\r\n      },\r\n      onError: (err) => message.error(err.message),\r\n    });\r\n    this.setState({ selectedRowKeys: [] });\r\n  };\r\n\r\n  showModal = () => {\r\n    this.setState({ isModalVisible: true });\r\n  };\r\n\r\n  hideModal = () => {\r\n    this.setState({ isModalVisible: false });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      selectedRowKeys,\r\n      onLoading,\r\n      isModalVisible,\r\n      pageNo,\r\n      pageSize,\r\n    } = this.state;\r\n    const { tableData, total } = this.props;\r\n\r\n    const rowSelection = {\r\n      selectedRowKeys,\r\n      onChange: this.onSelectChange,\r\n    };\r\n\r\n    const hasSelected = selectedRowKeys.length > 0;\r\n\r\n    const columns = this.generateColumnConfig();\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          <div>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={this.onSelectedRowsDelete}\r\n              disabled={!hasSelected}\r\n              danger\r\n            >\r\n              Delete\r\n            </Button>\r\n            <Button\r\n              type=\"primary\"\r\n              icon={<DownloadOutlined />}\r\n              style={{ marginLeft: \"8px\" }}\r\n              onClick={this.exportToCSV}\r\n            >\r\n              Export To CSV\r\n            </Button>\r\n            <Button\r\n              icon={<UploadOutlined />}\r\n              style={{\r\n                color: \"white\",\r\n                background: \"#52c41a\",\r\n                marginLeft: \"8px\",\r\n              }}\r\n              onClick={this.showModal}\r\n            >\r\n              Import CSV\r\n            </Button>\r\n            <span style={{ marginLeft: \"8px\" }}>\r\n              {hasSelected ? `Selected ${selectedRowKeys.length} items` : \"\"}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <Button\r\n              onClick={() => this.handleSearchReset(this.clearSearchFilters)}\r\n            >\r\n              Clear Filters\r\n            </Button>\r\n            <Button onClick={() => this.setState({ sortedInfo: {} })}>\r\n              Clear Sorters\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <Table\r\n          scroll={{ x: true, y: 600 }}\r\n          dataSource={tableData}\r\n          columns={columns}\r\n          rowSelection={rowSelection}\r\n          tableLayout=\"auto\"\r\n          pagination={{\r\n            showSizeChanger: true,\r\n            onChange: this.onPaginationChange,\r\n            total,\r\n            pageSizeOptions: [5, 10, 20, 50],\r\n            defaultPageSize: 5,\r\n            current: pageNo,\r\n          }}\r\n          onChange={this.handleChange}\r\n          loading={onLoading}\r\n        />\r\n        <Modal\r\n          title=\"Import CSV\"\r\n          visible={isModalVisible}\r\n          width=\"70vw\"\r\n          onCancel={this.hideModal}\r\n          footer={null}\r\n        >\r\n          <UpsertList\r\n            hideModal={this.hideModal}\r\n            pagination={{ skip: (pageNo - 1) * pageSize, limit: pageSize }}\r\n          />\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ subscribers }, ownProps) => {\r\n  return {\r\n    ...ownProps,\r\n    tableData: subscribers.data,\r\n    total: subscribers.total,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  fetchSubscribers,\r\n  deleteSubscribers,\r\n  clearSubscribers,\r\n})(withRouter(SubscribersTable));\r\n","import React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { PageHeader, Divider } from \"antd\";\r\n\r\nimport SubscribersTable from \"../../components/ListComponents/SubscribersTable\";\r\n\r\nconst Subscribers = (props) => {\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Subscribers Table\"\r\n        subTitle=\"Manage your subscribers here\"\r\n        onBack={() => props.history.goBack()}\r\n      />\r\n      <Divider />\r\n      <SubscribersTable />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(Subscribers);\r\n","import ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nimport React, { Component } from \"react\";\r\n\r\nconst defaultModules = {\r\n  toolbar: [\r\n    [\"bold\", \"italic\", \"underline\", \"strike\"],\r\n    [\"blockquote\", \"code-block\"],\r\n    [{ script: \"sub\" }, { script: \"super\" }],\r\n    [{ header: [1, 2, 3, 4, false] }],\r\n    [{ direction: \"rtl\" }, { align: [] }],\r\n    [\r\n      { list: \"ordered\" },\r\n      { list: \"bullet\" },\r\n      { indent: \"-1\" },\r\n      { indent: \"+1\" },\r\n    ],\r\n    [{ color: [] }, { background: [] }],\r\n    [\"link\", \"clean\"],\r\n  ],\r\n};\r\n\r\nconst defaultFormats = [\r\n  \"header\",\r\n  \"size\",\r\n  \"script\",\r\n  \"bold\",\r\n  \"italic\",\r\n  \"underline\",\r\n  \"strike\",\r\n  \"blockquote\",\r\n  \"code-block\",\r\n  \"list\",\r\n  \"bullet\",\r\n  \"indent\",\r\n  \"link\",\r\n  \"image\",\r\n  \"color\",\r\n  \"background\",\r\n  \"font\",\r\n  \"align\",\r\n  \"direction\",\r\n];\r\n\r\nexport default class Quill extends Component {\r\n  render() {\r\n    return (\r\n      <ReactQuill\r\n        value={this.props.value || \"\"}\r\n        className={this.props.className || \"\"}\r\n        placeholder={this.props.placeholder || \"\"}\r\n        readOnly={this.props.read}\r\n        theme={this.props.theme}\r\n        onChange={this.props.onChange} // onChange(content, delta, source, editor)\r\n        style={this.props.style || undefined}\r\n        modules={this.props.modules || defaultModules}\r\n        formats={this.props.formats || defaultFormats}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport { Form, Row, Col, Input, Radio, Checkbox } from \"antd\";\r\n\r\nimport Quill from \"../quill\";\r\n\r\nconst initialValues = {\r\n  bodyType: 1,\r\n  analytics: [2],\r\n  templateName: null,\r\n  body: null,\r\n  htmlBody: null,\r\n  subject: null,\r\n  fromEmail: null,\r\n  fromName: null,\r\n};\r\n\r\nconst TemplateFormFields = (props) => {\r\n  const [bodyType, setBodyType] = useState(\r\n    (props.initialFormValues && props.initialFormValues.bodyType) ||\r\n      initialValues.bodyType\r\n  );\r\n  const [removedAnalytics, setRemovedAnalytics] = useState([]);\r\n  useEffect(() => {\r\n    if (props.form) {\r\n      props.form.setFieldsValue(props.initialFormValues || initialValues);\r\n    }\r\n  }, [props.initialFormValues, props.form]);\r\n\r\n  const onBodyTypeChange = (e) => {\r\n    setBodyType(e.target.value);\r\n    if (props.form) {\r\n      let analytics = props.form.getFieldValue(\"analytics\");\r\n      switch (e.target.value) {\r\n        case 0:\r\n          if (analytics.includes(0)) removedAnalytics.push(0);\r\n          if (analytics.includes(1)) removedAnalytics.push(1);\r\n          setRemovedAnalytics(removedAnalytics);\r\n          analytics = analytics.filter((el) => el !== 0 && el !== 1);\r\n          break;\r\n        case 1:\r\n          analytics = [...analytics, ...removedAnalytics];\r\n          setRemovedAnalytics([]);\r\n          break;\r\n      }\r\n      props.form.setFieldsValue({ analytics });\r\n    }\r\n  };\r\n\r\n  const onEditorChange = (content, delta, source, editor) => {\r\n    const htmltext = editor.getHTML(),\r\n      text = editor.getText();\r\n    if (text.length) {\r\n      props.form.setFieldsValue({ htmlBody: htmltext });\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col flex={\"50%\"} style={{ padding: \"0.5rem 1rem 0 0\" }}>\r\n          <h2>Template Details</h2>\r\n          <Form.Item\r\n            name=\"templateName\"\r\n            label=\"Name\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please enter template name\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Enter Template Name\"></Input>\r\n          </Form.Item>\r\n        </Col>\r\n        <Col flex={\"50%\"} style={{ padding: \"0.5rem 0 0 1rem\" }}>\r\n          <h2>Analytics</h2>\r\n          <Form.Item name=\"analytics\">\r\n            <Checkbox.Group>\r\n              <Checkbox value={0} disabled={bodyType !== 1}>\r\n                Insert tracking pixel. Available for HTML emails only.\r\n              </Checkbox>\r\n              <br />\r\n              <Checkbox value={1} disabled={bodyType !== 1}>\r\n                {`Track link clickthroughs, syntax: {linklabel/http://mylinktotrack.com}. Available for HTML emails only`}\r\n              </Checkbox>\r\n              <br />\r\n              <Checkbox value={2}>Add unsubscribe link</Checkbox>\r\n            </Checkbox.Group>\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <h2>E-mail Details</h2>\r\n      <Row>\r\n        <Col flex={1}>\r\n          <Form.Item\r\n            name=\"fromEmail\"\r\n            label=\"From E-mail\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please enter From E-mail\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input type=\"email\" placeholder=\"Enter From E-mail\"></Input>\r\n          </Form.Item>\r\n        </Col>\r\n        <Col flex={1}>\r\n          <Form.Item\r\n            style={{ marginLeft: \"1rem\" }}\r\n            name=\"fromName\"\r\n            label=\"From Name\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please enter From Name\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Enter From Name\"></Input>\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <h2>Create email</h2>\r\n      <Row>\r\n        <Col>\r\n          <Form.Item\r\n            name=\"bodyType\"\r\n            label=\"Type\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n              },\r\n            ]}\r\n          >\r\n            <Radio.Group buttonStyle=\"solid\" onChange={onBodyTypeChange}>\r\n              <Radio.Button value={0}>Plain Text</Radio.Button>\r\n              <Radio.Button value={1}>HTML</Radio.Button>\r\n            </Radio.Group>\r\n          </Form.Item>\r\n        </Col>\r\n        <Col flex=\"auto\">\r\n          <Form.Item\r\n            style={{ marginLeft: \"1.5rem\" }}\r\n            name=\"subject\"\r\n            label=\"Subject\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please enter a Subject\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Enter Subject\"></Input>\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <Form.Item\r\n        name={bodyType === 1 ? \"htmlBody\" : \"body\"}\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"E-mail Body is required\",\r\n          },\r\n        ]}\r\n      >\r\n        {bodyType === 1 ? (\r\n          <Quill\r\n            theme=\"snow\"\r\n            value={(props.initialFormValues || initialValues).htmlBody}\r\n            placeholder=\"E-mail Body\"\r\n            onChange={onEditorChange}\r\n            style={{ background: \"white\" }}\r\n          />\r\n        ) : (\r\n          <Input.TextArea\r\n            style={{\r\n              minHeight: \"30vh\",\r\n            }}\r\n            placeholder=\"E-mail Body\"\r\n          />\r\n        )}\r\n      </Form.Item>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TemplateFormFields;\r\n","import axios from \"../config/axios\";\r\nimport _ from \"lodash\";\r\n\r\nimport { FETCH_TEMPLATES, CLEAR_TEMPLATES } from \"./index\";\r\n\r\nexport const fetchTemplates = (args = {}) => async (dispatch) => {\r\n  const { callback } = args;\r\n  try {\r\n    const { data } = await axios.get(`/api/template/`, {\r\n      params: _.omit(args, \"callback\"),\r\n    });\r\n\r\n    if (callback) callback();\r\n    dispatch({ type: FETCH_TEMPLATES, payload: data });\r\n  } catch (error) {\r\n    console.log({ error });\r\n  }\r\n};\r\n\r\nexport const createTemplate = (args = {}) => async () => {\r\n  const { data, onSuccess, onError } = args;\r\n  try {\r\n    const response = await axios.post(\"/api/template/\", data);\r\n    if (onSuccess) onSuccess(response.data);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error.response.data);\r\n  }\r\n};\r\n\r\nexport const editTemplate = (args = {}) => async () => {\r\n  const { templateID, data, onSuccess, onError } = args;\r\n  try {\r\n    const response = await axios.patch(`/api/template/${templateID}`, data);\r\n    if (onSuccess) onSuccess(response.data);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error.response.data);\r\n  }\r\n};\r\n\r\nexport const deleteTemplates = (args = {}) => async (dispatch) => {\r\n  const { templateIDs, pagination, filters, onSuccess, onError } = args;\r\n  try {\r\n    const { data } = await axios.delete(\"/api/template\", {\r\n      params: { templateIDs },\r\n    });\r\n\r\n    if (onSuccess) onSuccess(data);\r\n    fetchTemplates({ filters, pagination })(dispatch);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n\r\nexport const clearTemplates = () => ({ type: CLEAR_TEMPLATES });\r\n","import { useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport { Form, Button, message } from \"antd\";\r\n\r\nimport TemplateFormFields from \"./TemplateFormFields\";\r\nimport { createTemplate, editTemplate } from \"../../actions/templateActions\";\r\n\r\nconst initialValues = {\r\n  bodyType: 0,\r\n  analytics: [],\r\n  templateName: null,\r\n  body: null,\r\n  htmlBody: null,\r\n  subject: null,\r\n  fromEmail: null,\r\n  fromName: null,\r\n};\r\n\r\nconst TemplateForm = (props) => {\r\n  const templateID = props.match.params.id;\r\n  const [form] = Form.useForm();\r\n  const [initialFormValues, setinitialFormValues] = useState(\r\n    props.initialFormValues || props.location.state || initialValues\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (props.location.pathname.split(\"/\").includes(\"create\")) {\r\n      form.setFieldsValue(initialValues);\r\n    }\r\n  }, [form, props.location.pathname]);\r\n\r\n  const onSubmit = (data) => {\r\n    if (_.isEqual(initialFormValues, data)) {\r\n      message.warning(\"No changes made\", 1);\r\n      return props.history.push(\"/templates/\");\r\n    }\r\n\r\n    const body = data.htmlBody;\r\n    delete data.htmlBody;\r\n    if (body) data.body = body;\r\n    const templateName = data.templateName;\r\n    delete data.templateName;\r\n    data.name = templateName;\r\n\r\n    const onSuccess = (res) => {\r\n      message.success(res, 1);\r\n      form.resetFields();\r\n      setinitialFormValues({\r\n        bodyType: 0,\r\n        analytics: [],\r\n      });\r\n      return props.history.push(\"/templates/\");\r\n    };\r\n    const onError = (err) => message.error(\"Some Error Occured\", 1);\r\n    dispatch(\r\n      (templateID ? editTemplate : createTemplate)({\r\n        data,\r\n        templateID,\r\n        onSuccess,\r\n        onError,\r\n      })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      form={form}\r\n      onFinish={onSubmit}\r\n      initialValues={initialFormValues}\r\n      layout=\"vertical\"\r\n    >\r\n      <TemplateFormFields\r\n        form={form}\r\n        initialFormValues={props.location.state}\r\n      />\r\n      <Button type=\"primary\" htmlType=\"Submit\" style={{ marginTop: \"2rem\" }}>\r\n        {props.match.params.id ? `Update ` : `Create `} Template\r\n      </Button>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default withRouter(TemplateForm);\r\n","import { PageHeader, Divider } from \"antd\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport TemplateForm from \"../../components/Templates/TemplateForm\";\r\nconst CreateTemplate = (props) => {\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Create Template\"\r\n        subTitle=\"Create or Edit your templates here\"\r\n        onBack={() => props.history.goBack()}\r\n      />\r\n      <Divider />\r\n      <TemplateForm />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withRouter(CreateTemplate);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter, Link } from \"react-router-dom\";\r\nimport { Table, Button, message, Tooltip } from \"antd\";\r\nimport { EditTwoTone } from \"@ant-design/icons\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  fetchTemplates,\r\n  deleteTemplates,\r\n  clearTemplates,\r\n} from \"../../actions/templateActions\";\r\nimport { getDiffInMilliseconds, parseTimeStamp } from \"../../utils/moment\";\r\nimport defaultSearchComponent from \"../../components/defaultSearchComponent\";\r\n\r\nimport \"./table.css\";\r\n\r\nclass TemplateTable extends React.Component {\r\n  state = {\r\n    searchText: \"\",\r\n    sortedInfo: {},\r\n    selectedRowKeys: [],\r\n    onLoading: false,\r\n    filters: {},\r\n    pageSize: 10,\r\n    pageNo: 1,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.dispatchFetchTemplates();\r\n  };\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    const { pageSize, pageNo, searchText } = this.state;\r\n    if (\r\n      !_.isEqual(\r\n        { pageSize, pageNo, searchText },\r\n        {\r\n          pageSize: prevState.pageSize,\r\n          pageNo: prevState.pageNo,\r\n          searchText: prevState.searchText,\r\n        }\r\n      )\r\n    ) {\r\n      this.dispatchFetchTemplates();\r\n    }\r\n  };\r\n\r\n  componentWillUnmount = () => this.props.clearTemplates();\r\n\r\n  dispatchFetchTemplates = (pageDetails) => {\r\n    const { pageSize, pageNo } = pageDetails ? pageDetails : this.state;\r\n    let { filters, searchText } = this.state;\r\n    if (searchText && searchText.length)\r\n      filters.name = {\r\n        $regex: searchText,\r\n        $options: \"$i\",\r\n      };\r\n\r\n    const pagination = { skip: (pageNo - 1) * pageSize, limit: pageSize };\r\n    this.setState({ onLoading: true });\r\n\r\n    const callback = () => {\r\n      this.setState({ onLoading: false });\r\n    };\r\n    this.props.fetchTemplates({ filters, pagination, callback });\r\n  };\r\n\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    // confirm();\r\n\r\n    if (selectedKeys[0]) {\r\n      this.setState({\r\n        searchText: selectedKeys[0],\r\n      });\r\n    }\r\n  };\r\n\r\n  handleChange = (pagination, filters, sorter) => {\r\n    this.setState({\r\n      sortedInfo: sorter,\r\n    });\r\n  };\r\n\r\n  handleSearchReset = (clearFilters) => {\r\n    clearFilters();\r\n    this.setState({ searchText: \"\", filters: {} });\r\n  };\r\n\r\n  onSelectedRowsDelete = () => {\r\n    const { selectedRowKeys, pageSize, pageNo, filters } = this.state;\r\n    const { tableData, deleteTemplates } = this.props;\r\n\r\n    const templateIDs = selectedRowKeys.map(\r\n      (index) => tableData[index - 1][\"_id\"]\r\n    );\r\n\r\n    this.setState({ onLoading: true });\r\n\r\n    const onSuccess = (data) => {\r\n      const state = { onLoading: false, selectedRowKeys: [] };\r\n      if (selectedRowKeys.length === tableData.length)\r\n        state.pageNo = pageNo > 1 ? pageNo - 1 : 1;\r\n\r\n      this.setState(state);\r\n      message.success(data);\r\n    };\r\n\r\n    const onError = (err) => {\r\n      this.setState({ onLoading: false });\r\n      message.error(err.response.data.error);\r\n      console.log({ err });\r\n    };\r\n\r\n    const skip =\r\n      ((selectedRowKeys.length === tableData.length\r\n        ? pageNo > 1\r\n          ? pageNo - 1\r\n          : 1\r\n        : pageNo) -\r\n        1) *\r\n      pageSize;\r\n\r\n    const pagination = { skip, limit: pageSize };\r\n    deleteTemplates({ templateIDs, onSuccess, onError, filters, pagination });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys) => this.setState({ selectedRowKeys });\r\n\r\n  onPaginationChange = (pageNo, pageSize) => {\r\n    this.setState({ pageSize, pageNo });\r\n  };\r\n\r\n  render() {\r\n    const { selectedRowKeys, onLoading, pageNo, sortedInfo } = this.state;\r\n    const { tableData, total } = this.props;\r\n\r\n    const rowSelection = {\r\n      selectedRowKeys,\r\n      onChange: this.onSelectChange,\r\n    };\r\n    const hasSelected = selectedRowKeys.length > 0;\r\n\r\n    const columns = [\r\n      {\r\n        title: \"Template Name\",\r\n        key: \"name\",\r\n        dataIndex: \"name\",\r\n        render: (text, record) => (\r\n          <span className=\"template-name\">\r\n            {record.name}\r\n            <Link\r\n              to={{\r\n                pathname: `/templates/${record._id}`,\r\n                state: {\r\n                  ..._.pick(record, [\r\n                    \"analytics\",\r\n                    \"fromEmail\",\r\n                    \"fromName\",\r\n                    \"bodyType\",\r\n                    \"subject\",\r\n                  ]),\r\n                  [record.bodyType === 1 ? \"htmlBody\" : \"body\"]: record.body,\r\n                  templateName: record.name,\r\n                },\r\n              }}\r\n              className=\"link\"\r\n            >\r\n              <Tooltip placement=\"left\" title=\"Edit\" color=\"blue\">\r\n                <EditTwoTone\r\n                  title=\"Edit template\"\r\n                  style={{ fontSize: \"large\" }}\r\n                />\r\n              </Tooltip>\r\n            </Link>\r\n          </span>\r\n        ),\r\n        ...defaultSearchComponent(this, \"name\"),\r\n      },\r\n      {\r\n        title: \"Created At\",\r\n        key: \"createdAt\",\r\n        dataIndex: \"createdAt\",\r\n        render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n        sorter: (a, b) => getDiffInMilliseconds(a.createdAt, b.createdAt),\r\n        sortOrder: sortedInfo.columnKey === \"createdAt\" && sortedInfo.order,\r\n        ellipsis: true,\r\n        width: \"26%\",\r\n      },\r\n      {\r\n        title: \"Updated At\",\r\n        key: \"updatedAt\",\r\n        dataIndex: \"updatedAt\",\r\n        render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n        sorter: (a, b) => getDiffInMilliseconds(a.updatedAt, b.updatedAt),\r\n        sortOrder: sortedInfo.columnKey === \"updatedAt\" && sortedInfo.order,\r\n        ellipsis: true,\r\n        width: \"26%\",\r\n      },\r\n    ];\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          <div>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={this.onSelectedRowsDelete}\r\n              disabled={!hasSelected}\r\n              danger\r\n            >\r\n              Delete\r\n            </Button>\r\n\r\n            <span style={{ marginLeft: \"8px\" }}>\r\n              {hasSelected ? `Selected ${selectedRowKeys.length} items` : \"\"}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <Button\r\n              onClick={() => this.handleSearchReset(this.clearSearchFilters)}\r\n            >\r\n              Clear Filters\r\n            </Button>\r\n            <Button onClick={() => this.setState({ sortedInfo: {} })}>\r\n              Clear Sorters\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <Table\r\n          scroll={{ x: true, y: 600 }}\r\n          columns={columns}\r\n          rowSelection={rowSelection}\r\n          tableLayout=\"auto\"\r\n          dataSource={tableData}\r\n          pagination={{\r\n            showSizeChanger: true,\r\n            onChange: this.onPaginationChange,\r\n            total,\r\n            pageSizeOptions: [5, 10, 20, 50],\r\n            defaultPageSize: 10,\r\n            current: pageNo,\r\n          }}\r\n          onChange={this.handleChange}\r\n          loading={onLoading}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ templates }, ownProps) => {\r\n  return {\r\n    ...ownProps,\r\n    tableData: templates.data,\r\n    total: templates.total,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  fetchTemplates,\r\n  deleteTemplates,\r\n  clearTemplates,\r\n})(withRouter(TemplateTable));\r\n","import React from \"react\";\r\nimport { PageHeader, Divider } from \"antd\";\r\n\r\nimport TemplateTable from \"../../components/Templates/TemplateTable\";\r\n\r\nconst ManageTemplates = () => {\r\n  return (\r\n    <div>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Manage Templates\"\r\n        subTitle=\"Edit or Delete your templates here\"\r\n      />\r\n      <Divider />\r\n      <TemplateTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageTemplates;\r\n","import axios from \"../config/axios\";\r\nimport _ from \"lodash\";\r\n\r\nimport { FETCH_CAMPAIGNS, CLEAR_CAMPAIGNS } from \".\";\r\n\r\nexport const createCampaign = (args = {}) => async () => {\r\n  const { data, onSuccess, onError } = args;\r\n  try {\r\n    const response = await axios.post(\"/api/campaign/\", data);\r\n    if (onSuccess) onSuccess(response.data);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error.response.data);\r\n  }\r\n};\r\n\r\nexport const deleteCampaigns = (args = {}) => async (dispatch) => {\r\n  const { campaignIDs, pagination, filters, onSuccess, onError } = args;\r\n  try {\r\n    const { data } = await axios.delete(\"/api/campaign\", {\r\n      params: { campaignIDs },\r\n    });\r\n\r\n    if (onSuccess) onSuccess(data);\r\n    fetchCampaigns({ filters, pagination })(dispatch);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n\r\nexport const fetchCampaigns = (args = {}) => async (dispatch) => {\r\n  const { callback } = args;\r\n  try {\r\n    const { data } = await axios.get(`/api/campaign/`, {\r\n      params: _.omit(args, \"callback\"),\r\n    });\r\n\r\n    if (callback) callback();\r\n    dispatch({ type: FETCH_CAMPAIGNS, payload: data });\r\n  } catch (error) {\r\n    console.log({ error });\r\n  }\r\n};\r\n\r\nexport const sendEmails = (args = {}) => async (dispatch) => {\r\n  const { body, onSuccess, onError } = args;\r\n  try {\r\n    const { data } = await axios.post(`/api/campaign/sendmail`, body);\r\n\r\n    if (onSuccess) onSuccess(data);\r\n  } catch (error) {\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n\r\nexport const clearCampaigns = () => ({ type: CLEAR_CAMPAIGNS });\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { AutoComplete, Form, Input, Button, message } from \"antd\";\r\nimport { DownOutlined } from \"@ant-design/icons\";\r\nimport _ from \"lodash\";\r\n\r\nimport { fetchTemplates, editTemplate } from \"../../actions/templateActions\";\r\nimport { fetchUserLists } from \"../../actions/listActions\";\r\nimport { createCampaign } from \"../../actions/campaignActions\";\r\nimport TemplateFormFields from \"../Templates/TemplateFormFields\";\r\n\r\nconst CampaignForm = (props) => {\r\n  const templates = useSelector((state) => state.templates.data);\r\n  const lists = useSelector((state) => state.userLists.data);\r\n  const [templateOptions, setTemplateOptions] = useState(null);\r\n  const [listOptions, setListOptions] = useState(null);\r\n  const dispatch = useDispatch();\r\n\r\n  const [form] = Form.useForm();\r\n\r\n  const [selectedTemplate, setSelectedTemplate] = useState();\r\n  const [selectedList, setSelectedList] = useState();\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchTemplates());\r\n    dispatch(fetchUserLists());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(templates)) {\r\n      const options = templates.map((template, index) => ({\r\n        key: template._id,\r\n        label: template.name,\r\n        value: template.name,\r\n        index,\r\n      }));\r\n\r\n      setTemplateOptions(options);\r\n    }\r\n  }, [templates]);\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(lists)) {\r\n      const options = lists.map((list, index) => ({\r\n        key: list._id,\r\n        label: list.name,\r\n        value: list.name,\r\n        index,\r\n      }));\r\n\r\n      setListOptions(options);\r\n    }\r\n  }, [lists]);\r\n\r\n  const getTemplateValuesFromForm = (values) => ({\r\n    ..._.pick(values, [\r\n      \"analytics\",\r\n      \"bodyType\",\r\n      \"subject\",\r\n      \"fromName\",\r\n      \"fromEmail\",\r\n    ]),\r\n    body: values.body || values.htmlBody,\r\n    name: values.templateName,\r\n  });\r\n\r\n  const getInitialTemplateValues = () =>\r\n    _.pick(templates[selectedTemplate.index], [\r\n      \"analytics\",\r\n      \"bodyType\",\r\n      \"body\",\r\n      \"name\",\r\n      \"subject\",\r\n      \"fromName\",\r\n      \"fromEmail\",\r\n    ]);\r\n\r\n  const onFormSubmit = (values) => {\r\n    const data = {\r\n      name: values.name,\r\n      templateID: selectedTemplate.key,\r\n      listID: selectedList.key,\r\n    };\r\n\r\n    const onSuccess = (data) => {\r\n      message.success(data);\r\n      form.resetFields();\r\n      props.history.push(\"/campaigns\");\r\n    };\r\n\r\n    const onError = (error) => {\r\n      message.error(error);\r\n      console.log(error);\r\n    };\r\n    const newTemplateValues = getTemplateValuesFromForm(values),\r\n      prevTemplateValues = getInitialTemplateValues();\r\n    if (!_.isEqual(newTemplateValues, prevTemplateValues))\r\n      dispatch(\r\n        editTemplate({\r\n          data: newTemplateValues,\r\n          templateID: selectedTemplate.key,\r\n        })\r\n      );\r\n    dispatch(createCampaign({ data, onSuccess, onError }));\r\n  };\r\n\r\n  const onFieldsBlur = () => {\r\n    let resetFields = [];\r\n    if (!selectedTemplate) resetFields.push(\"selectedTemplate\");\r\n    if (!selectedList) resetFields.push(\"selectedList\");\r\n\r\n    if (resetFields.length) form.resetFields(resetFields);\r\n  };\r\n\r\n  const generateTemplateFormValues = () => {\r\n    const record = templates[selectedTemplate.index];\r\n\r\n    return {\r\n      ..._.pick(record, [\r\n        \"analytics\",\r\n        \"fromEmail\",\r\n        \"fromName\",\r\n        \"bodyType\",\r\n        \"subject\",\r\n      ]),\r\n      [record.bodyType === 1 ? \"htmlBody\" : \"body\"]: record.body,\r\n      templateName: record.name,\r\n    };\r\n  };\r\n\r\n  return (\r\n    <Form form={form} onFinish={onFormSubmit} layout=\"vertical\">\r\n      <Form.Item\r\n        name=\"name\"\r\n        label=\"Campaign Name\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: \"Please Enter Campaign Name\",\r\n          },\r\n        ]}\r\n      >\r\n        <Input size=\"large\" placeholder=\"Enter Campaign Name\" />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        name=\"selectedList\"\r\n        label=\"Select List\"\r\n        rules={[{ required: true, message: \"Please Select a List\" }]}\r\n      >\r\n        <AutoComplete\r\n          onBlur={onFieldsBlur}\r\n          onSelect={(value, option) => setSelectedList(option)}\r\n          onChange={(value) => setSelectedList()}\r\n          notFoundContent=\"No Match\"\r\n          filterOption={true}\r\n          options={listOptions}\r\n        >\r\n          <Input\r\n            suffix={<DownOutlined />}\r\n            size=\"large\"\r\n            placeholder=\"Select List\"\r\n          />\r\n        </AutoComplete>\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        name=\"selectedTemplate\"\r\n        label=\"Select Template\"\r\n        rules={[{ required: true, message: \"Please Select a Template\" }]}\r\n      >\r\n        <AutoComplete\r\n          onBlur={onFieldsBlur}\r\n          onSelect={(value, option) => setSelectedTemplate(option)}\r\n          onChange={(value) => setSelectedTemplate()}\r\n          filterOption={true}\r\n          options={templateOptions}\r\n          notFoundContent=\"No Match\"\r\n        >\r\n          <Input\r\n            suffix={<DownOutlined />}\r\n            size=\"large\"\r\n            placeholder=\"Select Template\"\r\n          />\r\n        </AutoComplete>\r\n      </Form.Item>\r\n\r\n      {selectedTemplate && (\r\n        <TemplateFormFields\r\n          form={form}\r\n          initialFormValues={generateTemplateFormValues()}\r\n        />\r\n      )}\r\n\r\n      <Form.Item>\r\n        <Button type=\"primary\" htmlType=\"submit\">\r\n          Submit\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default withRouter(CampaignForm);\r\n","import React from \"react\";\r\nimport { PageHeader, Divider } from \"antd\";\r\n\r\nimport CampaignForm from \"../../components/Campaigns/CampaignForm\";\r\n\r\nconst CreateCampaign = () => {\r\n  return (\r\n    <div>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Create Campaigns\"\r\n        subTitle=\"create your campaigns here\"\r\n      />\r\n      <Divider />\r\n      <CampaignForm />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateCampaign;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter, Link } from \"react-router-dom\";\r\nimport { Table, Button, message } from \"antd\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  fetchCampaigns,\r\n  deleteCampaigns,\r\n  clearCampaigns,\r\n} from \"../../actions/campaignActions\";\r\nimport { getDiffInMilliseconds, parseTimeStamp } from \"../../utils/moment\";\r\nimport defaultSearchComponent from \"../defaultSearchComponent\";\r\n\r\nimport \"./table.css\";\r\n\r\nclass CampaignsTable extends React.Component {\r\n  state = {\r\n    searchText: \"\",\r\n    sortedInfo: {},\r\n    selectedRowKeys: [],\r\n    onLoading: false,\r\n    filters: {},\r\n    pageSize: 5,\r\n    pageNo: 1,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.dispatchFetchCampaigns();\r\n  };\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    const { pageSize, pageNo, searchText } = this.state;\r\n    if (\r\n      !_.isEqual(\r\n        { pageSize, pageNo, searchText },\r\n        {\r\n          pageSize: prevState.pageSize,\r\n          pageNo: prevState.pageNo,\r\n          searchText: prevState.searchText,\r\n        }\r\n      )\r\n    ) {\r\n      this.dispatchFetchCampaigns();\r\n    }\r\n  };\r\n\r\n  componentWillUnmount = () => this.props.clearCampaigns();\r\n\r\n  dispatchFetchCampaigns = (pageDetails) => {\r\n    const { pageSize, pageNo } = pageDetails ? pageDetails : this.state;\r\n    let { filters, searchText } = this.state;\r\n    if (searchText && searchText.length)\r\n      filters.name = {\r\n        $regex: searchText,\r\n        $options: \"$i\",\r\n      };\r\n\r\n    const pagination = { skip: (pageNo - 1) * pageSize, limit: pageSize };\r\n    this.setState({ onLoading: true });\r\n\r\n    const callback = () => {\r\n      this.setState({ onLoading: false });\r\n    };\r\n    this.props.fetchCampaigns({ filters, pagination, callback });\r\n  };\r\n\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    // confirm();\r\n\r\n    if (selectedKeys[0]) {\r\n      this.setState({\r\n        searchText: selectedKeys[0],\r\n      });\r\n    }\r\n  };\r\n\r\n  handleChange = (pagination, filters, sorter) => {\r\n    this.setState({\r\n      sortedInfo: sorter,\r\n    });\r\n  };\r\n\r\n  handleSearchReset = (clearFilters) => {\r\n    clearFilters();\r\n    this.setState({ searchText: \"\", filters: {} });\r\n  };\r\n\r\n  onSelectedRowsDelete = () => {\r\n    const { selectedRowKeys, pageSize, pageNo, filters } = this.state;\r\n    const { tableData, deleteCampaigns } = this.props;\r\n\r\n    const campaignIDs = selectedRowKeys.map(\r\n      (index) => tableData[index - 1][\"_id\"]\r\n    );\r\n\r\n    this.setState({ onLoading: true });\r\n\r\n    const onSuccess = (data) => {\r\n      const state = { onLoading: false, selectedRowKeys: [] };\r\n      if (selectedRowKeys.length === tableData.length)\r\n        state.pageNo = pageNo > 1 ? pageNo - 1 : 1;\r\n\r\n      this.setState(state);\r\n      message.success(data);\r\n    };\r\n\r\n    const onError = (err) => {\r\n      this.setState({ onLoading: false });\r\n      message.error(err.response.data.error);\r\n      console.log({ err });\r\n    };\r\n\r\n    const skip =\r\n      ((selectedRowKeys.length === tableData.length\r\n        ? pageNo > 1\r\n          ? pageNo - 1\r\n          : 1\r\n        : pageNo) -\r\n        1) *\r\n      pageSize;\r\n\r\n    const pagination = { skip, limit: pageSize };\r\n    deleteCampaigns({ campaignIDs, onSuccess, onError, filters, pagination });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys) => this.setState({ selectedRowKeys });\r\n\r\n  onPaginationChange = (pageNo, pageSize) => {\r\n    this.setState({ pageSize, pageNo });\r\n  };\r\n\r\n  render() {\r\n    const { selectedRowKeys, onLoading, pageNo, sortedInfo } = this.state;\r\n    const { tableData, total } = this.props;\r\n\r\n    const rowSelection = {\r\n      selectedRowKeys,\r\n      onChange: this.onSelectChange,\r\n    };\r\n    const hasSelected = selectedRowKeys.length > 0;\r\n\r\n    let columns = [\r\n      {\r\n        title: \"Campaign Name\",\r\n        key: \"name\",\r\n        dataIndex: \"name\",\r\n        ...defaultSearchComponent(this, \"name\"),\r\n        width: \"20%\",\r\n      },\r\n      {\r\n        title: \"Created At\",\r\n        key: \"createdAt\",\r\n        dataIndex: \"createdAt\",\r\n        render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n        sorter: (a, b) => getDiffInMilliseconds(a.createdAt, b.createdAt),\r\n        sortOrder: sortedInfo.columnKey === \"createdAt\" && sortedInfo.order,\r\n        ellipsis: true,\r\n        width: \"15%\",\r\n      },\r\n    ];\r\n\r\n    if (tableData && tableData.length) {\r\n      columns.splice(\r\n        1,\r\n        0,\r\n        {\r\n          title: \"Sent\",\r\n          key: \"sent\",\r\n          dataIndex: \"sent\",\r\n          render: (val, record) => record.analytics.sent,\r\n          align: \"center\",\r\n          //  width: \"5%\",\r\n        },\r\n        {\r\n          title: \"Delivered\",\r\n          key: \"delivered\",\r\n          render: (val, record) => record.analytics.delivered,\r\n          dataIndex: \"delivered\",\r\n          align: \"center\",\r\n          //  width: \"8%\",\r\n        },\r\n        {\r\n          title: \"Bounced\",\r\n          key: \"bounced\",\r\n          dataIndex: \"bounced\",\r\n          render: (val, record) => record.analytics.bounced,\r\n          align: \"center\",\r\n          // width: \"8%\",\r\n        },\r\n        {\r\n          title: \"Opened\",\r\n          key: \"open\",\r\n          dataIndex: \"open\",\r\n          render: (val, record) => record.analytics.open,\r\n          align: \"center\",\r\n          //  width: \"8%\",\r\n        }\r\n      );\r\n      columns.push({\r\n        title: \"Actions\",\r\n        key: \"actions\",\r\n        dataIndex: \"actions\",\r\n        width: \"10%\",\r\n        fixed: \"right\",\r\n        align: \"center\",\r\n        render: (val, record) => (\r\n          <Link to={{ state: record, pathname: `/campaigns/${record._id}` }}>\r\n            Manage\r\n          </Link>\r\n        ),\r\n      });\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          <div>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={this.onSelectedRowsDelete}\r\n              disabled={!hasSelected}\r\n              danger\r\n            >\r\n              Delete\r\n            </Button>\r\n\r\n            <span style={{ marginLeft: \"8px\" }}>\r\n              {hasSelected ? `Selected ${selectedRowKeys.length} items` : \"\"}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <Button\r\n              onClick={() => this.handleSearchReset(this.clearSearchFilters)}\r\n            >\r\n              Clear Filters\r\n            </Button>\r\n            <Button onClick={() => this.setState({ sortedInfo: {} })}>\r\n              Clear Sorters\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <Table\r\n          scroll={{ x: true, y: 600 }}\r\n          columns={columns}\r\n          rowSelection={rowSelection}\r\n          tableLayout=\"auto\"\r\n          dataSource={tableData}\r\n          pagination={{\r\n            showSizeChanger: true,\r\n            onChange: this.onPaginationChange,\r\n            total,\r\n            pageSizeOptions: [5, 10, 20, 50],\r\n            defaultPageSize: 5,\r\n            current: pageNo,\r\n          }}\r\n          onChange={this.handleChange}\r\n          loading={onLoading}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ campaigns }, ownProps) => {\r\n  return {\r\n    ...ownProps,\r\n    tableData: campaigns.data,\r\n    total: campaigns.total,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  fetchCampaigns,\r\n  deleteCampaigns,\r\n  clearCampaigns,\r\n})(withRouter(CampaignsTable));\r\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport { Chart, LineAdvance } from \"bizcharts\";\r\n\r\nimport { getUserAnalytics } from \"../../actions/analyticsActions\";\r\n\r\nconst months = [\r\n  \"January\",\r\n  \"February\",\r\n  \"March\",\r\n  \"April\",\r\n  \"May\",\r\n  \"June\",\r\n  \"July\",\r\n  \"August\",\r\n  \"September\",\r\n  \"October\",\r\n  \"November\",\r\n  \"December\",\r\n];\r\n\r\nconst Analytics = () => {\r\n  const dispatch = useDispatch();\r\n  const userAnalyticsData = useSelector((state) => state.analytics) || [];\r\n\r\n  useEffect(() => {\r\n    dispatch(getUserAnalytics(\"month\"));\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Chart\r\n      padding={[10, 20, 50, 40]}\r\n      autoFit\r\n      height={270}\r\n      data={getChartdata(userAnalyticsData)}\r\n    >\r\n      <LineAdvance shape=\"straight\" point position=\"x*y\" color=\"type\" />\r\n    </Chart>\r\n  );\r\n};\r\n\r\nfunction getChartdata(userAnalyticsData) {\r\n  const data = [];\r\n  const visited = months.map(() => false);\r\n\r\n  userAnalyticsData.forEach(({ _id: { monthNo } }) => {\r\n    visited[monthNo - 1] = true;\r\n  });\r\n  let i = 0;\r\n  userAnalyticsData.forEach(\r\n    ({ _id: { monthNo }, sent, delivered, bounced }) => {\r\n      data.push({ type: \"sent\", y: sent, x: months[monthNo - 1] });\r\n      data.push({ type: \"delivered\", y: delivered, x: months[monthNo - 1] });\r\n      data.push({ type: \"bounced\", y: bounced, x: months[monthNo - 1] });\r\n      if (monthNo < 12)\r\n        for (i = monthNo; i < months.length; i++) {\r\n          if (visited[i]) break;\r\n          data.push({ type: \"sent\", y: 0, x: months[i] });\r\n          data.push({ type: \"delivered\", y: 0, x: months[i] });\r\n          data.push({ type: \"bounced\", y: 0, x: months[i] });\r\n          visited[i] = true;\r\n        }\r\n    }\r\n  );\r\n  for (; i < months.length; i++) {\r\n    if (visited[i]) break;\r\n    data.push({ type: \"sent\", y: 0, x: months[i] });\r\n    data.push({ type: \"delivered\", y: 0, x: months[i] });\r\n    data.push({ type: \"bounced\", y: 0, x: months[i] });\r\n    visited[i] = true;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport default Analytics;\r\n","import axios from \"../config/axios\";\r\nimport { FETCH_ANALYTICS } from \".\";\r\n\r\nexport const getUserAnalytics = (groupBy) => async (dispatch) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `/api/analytics${groupBy && groupBy.length ? `?groupBy=${groupBy}` : \"\"}`\r\n    );\r\n\r\n    dispatch({ type: FETCH_ANALYTICS, payload: response.data });\r\n  } catch (error) {\r\n    console.log({ error });\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { PageHeader, Divider } from \"antd\";\r\n\r\nimport CampaignTable from \"../../components/Campaigns/CampaignTable\";\r\nimport Analytics from \"../../components/Campaigns/Analytics\";\r\n\r\nconst ManageCampaign = () => {\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Manage Campaigns\"\r\n        subTitle=\"Manage your campaigns here\"\r\n      />\r\n      <Divider />\r\n      <CampaignTable />\r\n      <Analytics />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ManageCampaign;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Divider,\r\n  Button,\r\n  Tag,\r\n  Card,\r\n  Typography,\r\n  PageHeader,\r\n  message,\r\n  Modal,\r\n  Input,\r\n  Spin,\r\n} from \"antd\";\r\nimport { MailTwoTone } from \"@ant-design/icons\";\r\nimport _ from \"lodash\";\r\n\r\nimport { fetchTemplates, clearTemplates } from \"../../actions/templateActions\";\r\nimport { fetchUserLists, clearUserLists } from \"../../actions/listActions\";\r\nimport { sendEmails } from \"../../actions/campaignActions\";\r\nimport { regularExpressions } from \"../../utils/static_vars\";\r\n\r\nimport \"./campaign.css\";\r\n\r\nconst CampaignDetail = (props) => {\r\n  const template = useSelector((state) =>\r\n    state.templates.data ? state.templates.data[0] : null\r\n  );\r\n  const list = useSelector((state) =>\r\n    state.userLists.data ? state.userLists.data[0] : null\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const {\r\n    templateID,\r\n    listID,\r\n    _id: campaignID,\r\n    name: campaignName,\r\n  } = props.location.state;\r\n  const [isTemplateLoading, setIsTemplateLoading] = useState(false);\r\n  const [isListLoading, setIsListLoading] = useState(false);\r\n  const [isSendEmailsLoading, setIsSendEmailsLoading] = useState(false);\r\n  const [isSendTestEmailLoading, setIsSendTestEmailLoading] = useState(false);\r\n  const [testModalVisible, setTestModalVisible] = useState(false);\r\n  const [testEmail, setTestEmail] = useState();\r\n\r\n  const fetchTemplatesCallback = () => {\r\n    setIsTemplateLoading(false);\r\n  };\r\n\r\n  const fetchUserListsCallback = () => {\r\n    setIsListLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsListLoading(true);\r\n    setIsTemplateLoading(true);\r\n    dispatch(\r\n      fetchTemplates({\r\n        filters: { _id: templateID },\r\n        callback: fetchTemplatesCallback,\r\n      })\r\n    );\r\n    dispatch(\r\n      fetchUserLists({\r\n        filters: { _id: listID },\r\n        callback: fetchUserListsCallback,\r\n      })\r\n    );\r\n\r\n    return () => {\r\n      dispatch(clearTemplates());\r\n      dispatch(clearUserLists());\r\n    };\r\n  }, [templateID, dispatch, listID]);\r\n\r\n  const onSuccess = (data) => {\r\n    setIsSendEmailsLoading(false);\r\n    setIsSendTestEmailLoading(false);\r\n    setTestModalVisible(false);\r\n    message.success(\"Email(s) sent successfully\");\r\n  };\r\n  const onError = (err) => {\r\n    setIsSendEmailsLoading(false);\r\n    setIsSendTestEmailLoading(false);\r\n    if (err && err.response) message.error(err.response.data.error);\r\n    else message.error(\"Some error occured\");\r\n  };\r\n\r\n  const onSendEmails = () => {\r\n    setIsSendEmailsLoading(true);\r\n    dispatch(\r\n      sendEmails({\r\n        body: { listID, campaignID, templateID },\r\n        onSuccess,\r\n        onError,\r\n      })\r\n    );\r\n  };\r\n\r\n  const onSendTestEmail = () => {\r\n    if (!regularExpressions.emailValidator.test(testEmail))\r\n      return message.error(\"Invalid Email\");\r\n    setIsSendTestEmailLoading(true);\r\n\r\n    dispatch(\r\n      sendEmails({ body: { to: testEmail, templateID }, onSuccess, onError })\r\n    );\r\n  };\r\n\r\n  const showModal = () => {\r\n    setTestModalVisible(true);\r\n  };\r\n\r\n  const handleOk = () => {\r\n    onSendTestEmail();\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setTestModalVisible(false);\r\n  };\r\n\r\n  const renderCardTitle = () => {\r\n    return (\r\n      <>\r\n        <Tag color=\"orange\">Subject :</Tag> {template.subject}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderListTitle = () => {\r\n    return (\r\n      <>\r\n        <Tag color=\"#108ee9\">List Attached :</Tag>{\" \"}\r\n        <Link to={`/lists/${list._id}`}> {list.name} </Link>\r\n        <Divider type=\"vertical\" />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderTemplateTitle = () => {\r\n    const record = template;\r\n\r\n    return (\r\n      <>\r\n        <Tag color=\"#108ee9\">Template Attached :</Tag>\r\n        <Link\r\n          to={{\r\n            pathname: `/templates/${record._id}`,\r\n            state: {\r\n              ..._.pick(record, [\r\n                \"analytics\",\r\n                \"fromEmail\",\r\n                \"fromName\",\r\n                \"bodyType\",\r\n                \"subject\",\r\n              ]),\r\n              [record.bodyType === 1 ? \"htmlBody\" : \"body\"]: record.body,\r\n              templateName: record.name,\r\n            },\r\n          }}\r\n          // className=\"link\"\r\n        >\r\n          {template.name}\r\n        </Link>\r\n        <Divider type=\"vertical\" />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const TestMailModal = (\r\n    <Modal\r\n      title=\"Send Test Email\"\r\n      visible={testModalVisible}\r\n      footer={[\r\n        <Button key=\"back\" onClick={handleCancel}>\r\n          Cancel\r\n        </Button>,\r\n        <Button\r\n          key=\"submit\"\r\n          type=\"primary\"\r\n          loading={isSendTestEmailLoading}\r\n          onClick={handleOk}\r\n        >\r\n          Submit\r\n        </Button>,\r\n      ]}\r\n      destroyOnClose\r\n      closable={false}\r\n    >\r\n      <Input\r\n        prefix={<MailTwoTone />}\r\n        onChange={(e) => setTestEmail(e.target.value)}\r\n        placeholder=\" E-mail\"\r\n        allowClear\r\n      />\r\n    </Modal>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Campaign Details\"\r\n        subTitle=\"view and send your campaign\"\r\n        onBack={() => props.history.goBack()}\r\n      />\r\n      <Divider />\r\n      <Spin spinning={isTemplateLoading || isListLoading}>\r\n        {template && (\r\n          <div\r\n            style={{ background: \"white\", padding: \"20px\", fontSize: \"1rem\" }}\r\n          >\r\n            <h2>{campaignName}</h2>\r\n\r\n            <div>\r\n              {list && renderListTitle()}\r\n              {template && renderTemplateTitle()}\r\n            </div>\r\n\r\n            <p>\r\n              <Tag color=\"#87d068\">From :</Tag>\r\n              {template.fromName}\r\n              <Typography.Link> {`<${template.fromEmail}>`} </Typography.Link>\r\n            </p>\r\n\r\n            <Card title={renderCardTitle()}>\r\n              <div\r\n                contentEditable=\"false\"\r\n                dangerouslySetInnerHTML={{ __html: template.body }}\r\n              />\r\n            </Card>\r\n\r\n            <div className=\"card-footer\">\r\n              <div>\r\n                <Button\r\n                  type=\"primary\"\r\n                  onClick={onSendEmails}\r\n                  loading={isSendEmailsLoading}\r\n                >\r\n                  Send Emails\r\n                </Button>\r\n\r\n                {TestMailModal}\r\n                <Button type=\"secondary\" onClick={showModal}>\r\n                  Send Test Email\r\n                </Button>\r\n              </div>\r\n              <div>{/* for future add on buttons */}</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </Spin>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CampaignDetail;\r\n","var bcrypt = require(\"bcryptjs\");\r\n\r\nexport async function hashCrypt(text) {\r\n  const salt = await bcrypt.genSalt(8);\r\n  return bcrypt.hash(text, salt, null);\r\n}\r\n","import axios from \"../config/axios\";\r\nimport { FETCH_USERS, CLEAR_USERS } from \".\";\r\n\r\nexport const createUser = (args = {}) => async () => {\r\n  const { data, onSuccess, onError } = args;\r\n  try {\r\n    const response = await axios.post(\"/api/user/\", data);\r\n    if (onSuccess) onSuccess(response.data);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error.response.data);\r\n  }\r\n};\r\n\r\nexport const changePassword = (args = {}) => async (dispatch) => {\r\n  const { userID, payload, onError, onSuccess } = args;\r\n  try {\r\n    const response = await axios.patch(`/api/user/${userID}`, payload);\r\n    if (onSuccess) onSuccess(response.data);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error.response.data);\r\n  }\r\n};\r\n\r\nexport const getUsers = (args = {}) => async (dispatch) => {\r\n  const { filters, pagination, callback } = args;\r\n  try {\r\n    const response = await axios.get(\"/api/user/\", {\r\n      params: { filters, pagination },\r\n    });\r\n    if (callback) callback();\r\n    dispatch({ type: FETCH_USERS, payload: response.data });\r\n  } catch (error) {\r\n    console.log({ error });\r\n  }\r\n};\r\n\r\nexport const deleteUsers = (args = {}) => async (dispatch) => {\r\n  const { data, onSuccess, onError, filters, pagination } = args;\r\n  try {\r\n    const response = await axios.delete(\"/api/user/\", {\r\n      params: data,\r\n    });\r\n    if (onSuccess) onSuccess(response.data);\r\n    if (filters || pagination) getUsers({ filters, pagination })(dispatch);\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error.response.data);\r\n  }\r\n};\r\n\r\nexport const clearUsers = () => ({ type: CLEAR_USERS });\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Form, Input, Checkbox, Button, message, Spin } from \"antd\";\r\nimport _ from \"lodash\";\r\n\r\nimport { hashCrypt } from \"../../utils/bcrypt\";\r\nimport { regularExpressions } from \"../../utils/static_vars\";\r\nimport { createUser } from \"../../actions/AccountActions\";\r\n\r\nconst buttonLayout = {\r\n  wrapperCol: {\r\n    xs: { offset: 8 },\r\n    sm: { offset: 8 },\r\n    md: { offset: 10 },\r\n    lg: { offset: 10 },\r\n  },\r\n};\r\n\r\nconst CreateUserForm = () => {\r\n  const [form] = Form.useForm();\r\n  const dispatch = useDispatch();\r\n  const [isFormLoading, setIsFormLoading] = useState(false);\r\n\r\n  const onFormSubmit = async (values) => {\r\n    const hashedPassword = await hashCrypt(values.password);\r\n\r\n    const data = {\r\n      ..._.omit(values, \"confirmPassword\"),\r\n      password: hashedPassword,\r\n      role: values.role ? 1 : 2, // 1:admin, 2:normal user\r\n    };\r\n\r\n    const onSuccess = (data) => {\r\n      setIsFormLoading(false);\r\n      message.success(data);\r\n      form.resetFields();\r\n    };\r\n\r\n    const onError = (data) => {\r\n      message.error(data.error);\r\n      setIsFormLoading(false);\r\n\r\n      form.setFields([\r\n        {\r\n          name: data.field,\r\n          errors: [data.error],\r\n        },\r\n      ]);\r\n    };\r\n\r\n    dispatch(createUser({ data, onSuccess, onError }));\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: \"60%\" }}>\r\n      <Spin spinning={isFormLoading}>\r\n        <Form\r\n          style={{ background: \"white\", padding: \"2.2rem\" }}\r\n          form={form}\r\n          onFinish={onFormSubmit}\r\n          layout=\"vertical\"\r\n        >\r\n          <Form.Item\r\n            name=\"firstName\"\r\n            label=\"First Name\"\r\n            hasFeedback\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please enter First Name\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Enter First Name\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"lastName\"\r\n            label=\"Last Name\"\r\n            hasFeedback\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please enter Last Name\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Please enter Last Name\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"email\"\r\n            label=\"Email\"\r\n            hasFeedback\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please Enter Email\",\r\n              },\r\n              {\r\n                pattern: regularExpressions.emailValidator,\r\n                message: \"Please enter a valid email\",\r\n              },\r\n            ]}\r\n          >\r\n            <Input placeholder=\"Enter Email\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please Enter password\",\r\n              },\r\n              {\r\n                pattern: regularExpressions.passwordValidator,\r\n                message: \"Password must be atleast of 4 characters\",\r\n              },\r\n            ]}\r\n            hasFeedback\r\n          >\r\n            <Input type=\"password\" placeholder=\"Enter password\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"confirmPassword\"\r\n            label=\"Confirm Password\"\r\n            dependencies={[\"password\"]}\r\n            hasFeedback\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Please confirm your password!\",\r\n              },\r\n              ({ getFieldValue }) => ({\r\n                validator(rule, value) {\r\n                  if (!value || getFieldValue(\"password\") === value) {\r\n                    return Promise.resolve();\r\n                  }\r\n                  return Promise.reject(\"Passwords do not match!\");\r\n                },\r\n              }),\r\n            ]}\r\n          >\r\n            <Input type=\"password\" placeholder=\"Enter password again\" />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"role\" valuePropName=\"checked\">\r\n            <Checkbox>Has Admin Rights</Checkbox>\r\n          </Form.Item>\r\n\r\n          <Form.Item {...buttonLayout}>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Submit\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Spin>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateUserForm;\r\n","import React from \"react\";\r\nimport { PageHeader, Divider } from \"antd\";\r\n\r\nimport CreateUserForm from \"../../components/Accounts/CreateUserForm\";\r\n\r\nconst CreateUser = () => {\r\n  return (\r\n    <div>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Create User\"\r\n        subTitle=\"create new users here\"\r\n      />\r\n      <Divider />\r\n      <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n        <CreateUserForm />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateUser;\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Form, Input, message, Button } from \"antd\";\r\nimport { MailTwoTone } from \"@ant-design/icons\";\r\n\r\nimport { deleteUsers, getUsers } from \"../../actions/AccountActions\";\r\nimport { regularExpressions } from \"../../utils/static_vars\";\r\n\r\nconst buttonLayout = {\r\n  wrapperCol: {\r\n    xs: { offset: 8 },\r\n    sm: { offset: 8 },\r\n    md: { offset: 10 },\r\n    lg: { offset: 10 },\r\n  },\r\n};\r\n\r\nconst DeleteUserForm = () => {\r\n  const [form] = Form.useForm();\r\n  const user = useSelector((state) => state.session.user);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [email, setEmail] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n\r\n  const onDelete = () => {\r\n    const data = {\r\n      emails: [email],\r\n    };\r\n\r\n    setIsLoading(true);\r\n\r\n    const onSuccess = (data) => {\r\n      setEmail(\"\");\r\n      setIsLoading(false);\r\n      message.success(data);\r\n      form.resetFields();\r\n\r\n      if (user.role === 0) {\r\n        dispatch(getUsers());\r\n      }\r\n    };\r\n\r\n    const onError = (data) => {\r\n      setIsLoading(false);\r\n      message.error(data.error);\r\n    };\r\n\r\n    dispatch(deleteUsers({ data, onSuccess, onError }));\r\n  };\r\n\r\n  const onInputChange = (e) => {\r\n    setEmail(e.target.value);\r\n    form.setFields([\r\n      {\r\n        name: \"email\",\r\n        errors: null,\r\n      },\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: \"60%\" }}>\r\n      <Form\r\n        requiredMark={false}\r\n        style={{\r\n          background: \"white\",\r\n          padding: \"2.2rem\",\r\n        }}\r\n        form={form}\r\n        onFinish={onDelete}\r\n        layout=\"vertical\"\r\n      >\r\n        <Form.Item\r\n          name=\"email\"\r\n          label=\"Email\"\r\n          validateTrigger=\"onSubmit\"\r\n          rules={[\r\n            ({ getFieldValue }) => ({\r\n              validator(rule, value) {\r\n                if (value && value.match(regularExpressions.emailValidator)) {\r\n                  return Promise.resolve();\r\n                }\r\n                return Promise.reject(\"Please enter a valid email\");\r\n              },\r\n            }),\r\n          ]}\r\n        >\r\n          <Input\r\n            prefix={<MailTwoTone />}\r\n            onChange={(e) => {\r\n              onInputChange(e);\r\n            }}\r\n            placeholder=\"Enter Email\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item {...buttonLayout}>\r\n          <Button type=\"danger\" loading={isLoading} htmlType=\"submit\">\r\n            Delete\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeleteUserForm;\r\n","import { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Button, message, Modal, Input, Form } from \"antd\";\r\nimport { LockTwoTone } from \"@ant-design/icons\";\r\n\r\nimport { hashCrypt } from \"../../utils/bcrypt\";\r\nimport { regularExpressions } from \"../../utils/static_vars\";\r\nimport { changePassword } from \"../../actions/AccountActions\";\r\n\r\nconst ChangePasswordModal = (props) => {\r\n  const { ChangePasswordModalVisible, changeParentState, userID } = props;\r\n  const [form] = Form.useForm();\r\n  const dispatch = useDispatch();\r\n  const [isFormLoading, setIsFormLoading] = useState(false);\r\n\r\n  const onFormSubmit = async (values) => {\r\n    const hashedPassword = await hashCrypt(values.password);\r\n\r\n    const data = {\r\n      password: hashedPassword,\r\n    };\r\n\r\n    const onSuccess = (data) => {\r\n      setIsFormLoading(false);\r\n      message.success(data);\r\n      changeParentState({\r\n        userID: null,\r\n        ChangePasswordModalVisible: false,\r\n      });\r\n      form.resetFields();\r\n    };\r\n\r\n    const onError = (data) => {\r\n      message.error(data.error);\r\n      setIsFormLoading(false);\r\n\r\n      form.setFields([\r\n        {\r\n          name: data.field,\r\n          errors: [data.error],\r\n        },\r\n      ]);\r\n    };\r\n\r\n    dispatch(changePassword({ userID, payload: data, onSuccess, onError }));\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    form.resetFields();\r\n    changeParentState({\r\n      userID: null,\r\n      ChangePasswordModalVisible: false,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title=\"Change Password\"\r\n      visible={ChangePasswordModalVisible}\r\n      footer={false}\r\n      destroyOnClose\r\n      closable={false}\r\n    >\r\n      <Form\r\n        style={{ background: \"white\", padding: \"2.2rem\" }}\r\n        form={form}\r\n        onFinish={onFormSubmit}\r\n        layout=\"vertical\"\r\n      >\r\n        <Form.Item\r\n          name=\"password\"\r\n          label=\"Password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please Enter password\",\r\n            },\r\n            {\r\n              pattern: regularExpressions.passwordValidator,\r\n              message: \"Password must be atleast of 4 characters\",\r\n            },\r\n          ]}\r\n          hasFeedback\r\n        >\r\n          <Input\r\n            type={\"password\"}\r\n            prefix={<LockTwoTone />}\r\n            placeholder=\"Enter password\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"confirmPassword\"\r\n          label=\"Confirm Password\"\r\n          dependencies={[\"password\"]}\r\n          hasFeedback\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: \"Please confirm your password!\",\r\n            },\r\n            ({ getFieldValue }) => ({\r\n              validator(rule, value) {\r\n                if (!value || getFieldValue(\"password\") === value) {\r\n                  return Promise.resolve();\r\n                }\r\n                return Promise.reject(\"Passwords do not match!\");\r\n              },\r\n            }),\r\n          ]}\r\n        >\r\n          <Input\r\n            type={\"password\"}\r\n            prefix={<LockTwoTone />}\r\n            placeholder=\"Enter password again\"\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item>\r\n          <Button loading={isFormLoading} type=\"primary\" htmlType=\"submit\">\r\n            Submit\r\n          </Button>\r\n          <Button key=\"back\" onClick={handleCancel}>\r\n            Cancel\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ChangePasswordModal;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Table, Button, message, Typography } from \"antd\";\r\nimport _ from \"lodash\";\r\n\r\nimport {\r\n  deleteUsers,\r\n  clearUsers,\r\n  getUsers,\r\n} from \"../../actions/AccountActions\";\r\nimport { roles } from \"../../utils/static_vars\";\r\nimport { getDiffInMilliseconds, parseTimeStamp } from \"../../utils/moment\";\r\nimport ChangePasswordModal from \"./ChangePasswordModal\";\r\n\r\nimport \"./table.css\";\r\n\r\nclass UserTable extends React.Component {\r\n  state = {\r\n    searchText: \"\",\r\n    sortedInfo: {},\r\n    selectedRowKeys: [],\r\n    onLoading: false,\r\n    filters: {},\r\n    pageSize: 5,\r\n    pageNo: 1,\r\n    ChangePasswordModalVisible: false,\r\n    userID: null,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.dispatchFetchUsers();\r\n  };\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    const { pageSize, pageNo, searchText } = this.state;\r\n    if (\r\n      !_.isEqual(\r\n        { pageSize, pageNo, searchText },\r\n        {\r\n          pageSize: prevState.pageSize,\r\n          pageNo: prevState.pageNo,\r\n          searchText: prevState.searchText,\r\n        }\r\n      )\r\n    ) {\r\n      this.dispatchFetchUsers();\r\n    }\r\n  };\r\n\r\n  componentWillUnmount = () => this.props.clearUsers();\r\n\r\n  dispatchFetchUsers = (pageDetails) => {\r\n    const { pageSize, pageNo } = pageDetails ? pageDetails : this.state;\r\n    let { filters, searchText } = this.state;\r\n    if (searchText && searchText.length)\r\n      filters.name = {\r\n        $regex: searchText,\r\n        $options: \"$i\",\r\n      };\r\n\r\n    const pagination = { skip: (pageNo - 1) * pageSize, limit: pageSize };\r\n    this.setState({ onLoading: true });\r\n\r\n    const callback = () => {\r\n      this.setState({ onLoading: false });\r\n    };\r\n    this.props.getUsers({ filters, pagination, callback });\r\n  };\r\n\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    // confirm();\r\n\r\n    if (selectedKeys[0]) {\r\n      this.setState({\r\n        searchText: selectedKeys[0],\r\n      });\r\n    }\r\n  };\r\n\r\n  handleChange = (pagination, filters, sorter) => {\r\n    this.setState({\r\n      sortedInfo: sorter,\r\n    });\r\n  };\r\n\r\n  handleSearchReset = (clearFilters) => {\r\n    clearFilters();\r\n    this.setState({ searchText: \"\", filters: {} });\r\n  };\r\n  onSelectedRowsDelete = () => {\r\n    const { selectedRowKeys, pageSize, pageNo, filters } = this.state;\r\n    const { tableData, deleteUsers } = this.props;\r\n\r\n    const emails =\r\n      selectedRowKeys.map((index) => tableData[index - 1].email) || [];\r\n\r\n    this.setState({ onLoading: true });\r\n\r\n    const onSuccess = (data) => {\r\n      const state = { onLoading: false, selectedRowKeys: [] };\r\n      if (selectedRowKeys.length === tableData.length)\r\n        state.pageNo = pageNo > 1 ? pageNo - 1 : 1;\r\n\r\n      this.setState(state);\r\n      message.success(data);\r\n    };\r\n\r\n    const onError = (err) => {\r\n      this.setState({ onLoading: false });\r\n      message.error(err.response.data.error);\r\n      console.log({ err });\r\n    };\r\n\r\n    const skip =\r\n      ((selectedRowKeys.length === tableData.length\r\n        ? pageNo > 1\r\n          ? pageNo - 1\r\n          : 1\r\n        : pageNo) -\r\n        1) *\r\n      pageSize;\r\n\r\n    const pagination = { skip, limit: pageSize };\r\n    deleteUsers({ data: { emails }, onSuccess, onError, filters, pagination });\r\n  };\r\n\r\n  onSelectChange = (selectedRowKeys) => this.setState({ selectedRowKeys });\r\n\r\n  onPaginationChange = (pageNo, pageSize) => {\r\n    this.setState({ pageSize, pageNo });\r\n  };\r\n\r\n  onChangePasswordClick = (userID) => {\r\n    this.setState({\r\n      ChangePasswordModalVisible: true,\r\n      userID,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { selectedRowKeys, onLoading, pageNo, sortedInfo } = this.state;\r\n    const { tableData, total } = this.props;\r\n\r\n    const rowSelection = {\r\n      selectedRowKeys,\r\n      onChange: this.onSelectChange,\r\n    };\r\n    const hasSelected = selectedRowKeys.length > 0;\r\n\r\n    let columns = [\r\n      {\r\n        title: \"First Name\",\r\n        key: \"firstName\",\r\n        dataIndex: \"firstName\",\r\n      },\r\n      {\r\n        title: \"Last Name\",\r\n        key: \"lastName\",\r\n        dataIndex: \"lastName\",\r\n      },\r\n      {\r\n        title: \"Email\",\r\n        key: \"email\",\r\n        dataIndex: \"email\",\r\n      },\r\n      {\r\n        title: \"Role\",\r\n        key: \"role\",\r\n        dataIndex: \"role\",\r\n        render: (val) => roles[val].label,\r\n      },\r\n      {\r\n        title: \"Created At\",\r\n        key: \"createdAt\",\r\n        dataIndex: \"createdAt\",\r\n        render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n        sorter: (a, b) => getDiffInMilliseconds(a.createdAt, b.createdAt),\r\n        sortOrder: sortedInfo.columnKey === \"createdAt\" && sortedInfo.order,\r\n        ellipsis: true,\r\n        width: \"20%\",\r\n      },\r\n      {\r\n        title: \"Updated At\",\r\n        key: \"updatedAt\",\r\n        dataIndex: \"updatedAt\",\r\n        render: (val) => parseTimeStamp(val, \"MMMM Do YYYY, h:mm:ss a\"),\r\n        sorter: (a, b) => getDiffInMilliseconds(a.updatedAt, b.updatedAt),\r\n        sortOrder: sortedInfo.columnKey === \"updatedAt\" && sortedInfo.order,\r\n        ellipsis: true,\r\n        width: \"20%\",\r\n      },\r\n    ];\r\n    if (tableData && tableData.length) {\r\n      columns.push({\r\n        title: \"Actions\",\r\n        key: \"actions\",\r\n        dataIndex: \"actions\",\r\n        fixed: \"right\",\r\n        render: (val, record) => (\r\n          <Typography.Link\r\n            onClick={() => this.onChangePasswordClick(record._id)}\r\n          >\r\n            Change Password\r\n          </Typography.Link>\r\n        ),\r\n      });\r\n    }\r\n    return (\r\n      <>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"10px\",\r\n          }}\r\n        >\r\n          <div>\r\n            <Button\r\n              type=\"primary\"\r\n              onClick={this.onSelectedRowsDelete}\r\n              disabled={!hasSelected}\r\n              danger\r\n            >\r\n              Delete\r\n            </Button>\r\n\r\n            <span style={{ marginLeft: \"8px\" }}>\r\n              {hasSelected ? `Selected ${selectedRowKeys.length} items` : \"\"}\r\n            </span>\r\n          </div>\r\n          <div>\r\n            <Button onClick={() => this.setState({ sortedInfo: {} })}>\r\n              Clear Sorters\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <ChangePasswordModal\r\n          ChangePasswordModalVisible={this.state.ChangePasswordModalVisible}\r\n          changeParentState={(state) => this.setState(state)}\r\n          userID={this.state.userID}\r\n        />\r\n        <Table\r\n          scroll={{ x: true, y: 600 }}\r\n          columns={columns}\r\n          rowSelection={rowSelection}\r\n          tableLayout=\"auto\"\r\n          dataSource={tableData}\r\n          pagination={{\r\n            showSizeChanger: true,\r\n            onChange: this.onPaginationChange,\r\n            total,\r\n            pageSizeOptions: [5, 10, 20, 50],\r\n            defaultPageSize: 5,\r\n            current: pageNo,\r\n          }}\r\n          onChange={this.handleChange}\r\n          loading={onLoading}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ users }, ownProps) => {\r\n  return {\r\n    ...ownProps,\r\n    tableData: users.data,\r\n    total: users.total,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  clearUsers,\r\n  deleteUsers,\r\n  getUsers,\r\n})(withRouter(UserTable));\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { PageHeader, Divider } from \"antd\";\r\nimport DeleteUserForm from \"../../components/Accounts/DeleteUserForm\";\r\nimport UserTable from \"../../components/Accounts/UserTable\";\r\n\r\nconst ManageUsers = () => {\r\n  const user = useSelector((state) => state.session && state.session.user);\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Delete User\"\r\n        subTitle=\"Delete users here\"\r\n      />\r\n      <Divider />\r\n      <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n        <DeleteUserForm />\r\n      </div>\r\n\r\n      {user && user.role === 0 && (\r\n        <>\r\n          <Divider />\r\n          <UserTable />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ManageUsers;\r\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Form, Row, Col, Input, Typography, Button, Tag, message } from \"antd\";\r\nimport _ from \"lodash\";\r\nimport {\r\n  getUserSettings,\r\n  changeUserSettings,\r\n} from \"../../actions/settingsActions\";\r\n\r\nconst { Text } = Typography;\r\n\r\nconst SettingsForm = () => {\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(getUserSettings());\r\n  }, [dispatch]);\r\n\r\n  const settings = useSelector((state) =>\r\n    _.omit(state.settings, [\"userID\", \"_id\", \"__v\"])\r\n  );\r\n  const [form] = Form.useForm();\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue(settings);\r\n  }, [settings, form]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const onSubmit = (values) => {\r\n    if (_.isEqual(values, settings)) return message.info(\"No changes made\");\r\n    setIsLoading(true);\r\n    const onSuccess = (data) => setIsLoading(false);\r\n    const onError = (err) => {\r\n      console.log(err);\r\n      setIsLoading(false);\r\n    };\r\n    dispatch(changeUserSettings({ payload: values, onSuccess, onError }));\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Col flex=\"55%\">\r\n        <Form\r\n          layout=\"vertical\"\r\n          form={form}\r\n          style={{ background: \"white\", padding: \"2.2rem\" }}\r\n          onFinish={onSubmit}\r\n        >\r\n          <h2>Mailjet Configuration</h2>\r\n          <Form.Item\r\n            name={\"MailjetUsername\"}\r\n            label={\r\n              <span>\r\n                <h3>\r\n                  Mailjet Username -{\" \"}\r\n                  {!settings.MailjetUsername && (\r\n                    <Tag color=\"#f50\">Not Saved</Tag>\r\n                  )}\r\n                </h3>\r\n                <Text type=\"secondary\">Your Mailjet public key</Text>\r\n              </span>\r\n            }\r\n          >\r\n            <Input placeholder={`Example: zVqHiOr8ClmcbVi3hHn2MZVb6fcW8HXS`} />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name={\"MailjetPassword\"}\r\n            label={\r\n              <span>\r\n                <h3>\r\n                  Mailjet Password -{\" \"}\r\n                  {!settings.MailjetPassword && (\r\n                    <Tag color=\"#f50\">Not Saved</Tag>\r\n                  )}\r\n                </h3>\r\n                <Text type=\"secondary\">Your Mailjet private key</Text>\r\n              </span>\r\n            }\r\n          >\r\n            <Input placeholder={`Example: zVqHiOr8ClmcbVi3hHn2MZVb6fcW8HXS`} />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button\r\n              type=\"success\"\r\n              htmlType=\"submit\"\r\n              loading={isLoading}\r\n              style={{\r\n                color: \"white\",\r\n                background: \"#52c41a\",\r\n              }}\r\n            >\r\n              Save Settings\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Col>\r\n    </Row>\r\n  );\r\n};\r\n\r\nexport default SettingsForm;\r\n","import { FETCH_SETTINGS } from \".\";\r\nimport axios from \"../config/axios\";\r\n\r\nexport const getUserSettings = (args = {}) => async (dispatch) => {\r\n  const { onSuccess, onError } = args;\r\n  try {\r\n    const { data: payload } = await axios.get(\"/api/settings\");\r\n    if (onSuccess) onSuccess(payload);\r\n    dispatch({ type: FETCH_SETTINGS, payload });\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n\r\nexport const changeUserSettings = (args = {}) => async (dispatch) => {\r\n  const { onSuccess, onError, payload } = args;\r\n  try {\r\n    const { data } = await axios.post(\"/api/settings\", payload);\r\n    if (onSuccess) onSuccess(data);\r\n    dispatch({ type: FETCH_SETTINGS, payload });\r\n  } catch (error) {\r\n    console.log({ error });\r\n    if (onError) onError(error);\r\n  }\r\n};\r\n","import { PageHeader, Divider } from \"antd\";\r\nimport SettingsForm from \"../../components/Settings/SettingsForm\";\r\n\r\nconst Settings = () => {\r\n  return (\r\n    <>\r\n      <PageHeader className=\"site-page-header\" title=\"Settings\" />\r\n      <Divider />\r\n      <SettingsForm />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import React from \"react\";\r\nimport { PageHeader, Divider } from \"antd\";\r\nimport ListsTable from \"../../components/ListComponents/ManageListTable\";\r\nimport CampaignTable from \"../../components/Campaigns/CampaignTable\";\r\nimport Analytics from \"../../components/Campaigns/Analytics\";\r\n\r\nconst Dashboard = () => {\r\n  return (\r\n    <>\r\n      <PageHeader\r\n        className=\"site-page-header\"\r\n        title=\"Dashboard\"\r\n        subTitle=\"View your Lists, Campaigns & Analytics\"\r\n      />\r\n      <Divider />\r\n      <Analytics />\r\n      <h2>Your Campaigns</h2>\r\n      <Divider />\r\n      <CampaignTable />\r\n      <h2>Your Lists</h2>\r\n      <Divider />\r\n      <ListsTable />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { Layout } from \"antd\";\r\n\r\nimport CreateList from \"./List/CreateList\";\r\nimport ManageList from \"./List/ManageList\";\r\nimport Subscribers from \"./List/Subscribers\";\r\nimport CreateTemplate from \"./Templates/CreateTemplate\";\r\nimport ManageTemplates from \"./Templates/ManageTemplates\";\r\nimport CreateCampaign from \"./Campaigns/CreateCampaign\";\r\nimport ManageCampaign from \"./Campaigns/ManageCampaign\";\r\nimport CampaignDetail from \"./Campaigns/CampaignDetail\";\r\nimport CreateUser from \"./Accounts/CreateUser\";\r\nimport ManageUsers from \"./Accounts/ManageUsers\";\r\nimport Settings from \"./Settings\";\r\nimport Dashboard from \"./Dashboard/Dashboard\";\r\n\r\nconst Content = () => {\r\n  const user = useSelector((state) => state.session.user);\r\n  return (\r\n    <Layout.Content\r\n      className=\"site-layout-background\"\r\n      style={{\r\n        padding: \"1rem\",\r\n        margin: 0,\r\n        minHeight: 280,\r\n      }}\r\n    >\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Dashboard} />\r\n        <Route exact path=\"/lists/create\" component={CreateList} />\r\n        <Route exact path=\"/lists\" component={ManageList} />\r\n        <Route exact path=\"/lists/:id\" component={Subscribers} />\r\n        <Route exact path=\"/templates/create\" component={CreateTemplate} />\r\n        <Route exact path=\"/templates/\" component={ManageTemplates} />\r\n        <Route exact path=\"/templates/:id\" component={CreateTemplate} />\r\n        <Route exact path=\"/campaigns/create\" component={CreateCampaign} />\r\n        <Route exact path=\"/campaigns/\" component={ManageCampaign} />\r\n        <Route exact path=\"/campaigns/:id\" component={CampaignDetail} />\r\n        <Route\r\n          exact\r\n          path=\"/users/create\"\r\n          component={\r\n            user.role < 2 ? CreateUser : () => <h1>{`401: Not Authorized`}</h1>\r\n          }\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/users/\"\r\n          component={\r\n            user.role < 2 ? ManageUsers : () => <h1>{`401: Not Authorized`}</h1>\r\n          }\r\n        />\r\n        <Route exact path=\"/settings\" component={Settings} />\r\n      </Switch>\r\n    </Layout.Content>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import React from \"react\";\r\nimport { Layout } from \"antd\";\r\n\r\nimport Header from \"../../components/AppHeader\";\r\nimport SideNav from \"../../components/SideNav/SideNav\";\r\nimport Content from \"../Content\";\r\n\r\nconst Home = (props) => {\r\n  return (\r\n    <Layout style={{ minHeight: \"100vh\", width: \"100vw\" }}>\r\n      <Header />\r\n      <Layout style={{ margin: \"80px 0px 0px 0px\" }}>\r\n        <SideNav />\r\n\r\n        <Content />\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Spin, message } from \"antd\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\n\r\nimport Login from \"./containers/Login\";\r\nimport Home from \"./containers/Home\";\r\nimport { createSession } from \"./actions/sessionActions\";\r\n\r\nimport \"antd/dist/antd.css\";\r\nimport \"./app.css\";\r\n\r\nconst App = ({ user, createSession }) => {\r\n  const [isLoading, changeLoadingState] = React.useState(false);\r\n\r\n  React.useEffect(() => {\r\n    const onError = (response) => {\r\n      if (response && typeof response.data === \"string\")\r\n        message.error(response.data);\r\n    };\r\n    if (!user) createSession({ changeLoadingState, onError });\r\n  }, [user, createSession]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Spin\r\n        className=\"spinner\"\r\n        spinning={isLoading}\r\n        indicator={\r\n          <LoadingOutlined style={{ color: \"white\", fontSize: \"4rem\" }} />\r\n        }\r\n      />\r\n\r\n      {!isLoading && (user ? <Home /> : <Login />)}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ session: { user } }, ownProps) => ({\r\n  user,\r\n  ...ownProps,\r\n});\r\n\r\nexport default connect(mapStateToProps, { createSession })(App);\r\n","import { LOGIN, LOGOUT } from \"../actions\";\r\n\r\nconst sessionReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case LOGIN:\r\n      return { ...state, ...action.payload };\r\n    case LOGOUT:\r\n      localStorage.removeItem(\"token\");\r\n      sessionStorage.removeItem(\"token\");\r\n      return {};\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default sessionReducer;\r\n","import { FETCH_USER_LISTS, LOGOUT, CLEAR_USER_LISTS } from \"../actions\";\r\n\r\nconst userListsReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_USER_LISTS:\r\n      return { ...action.payload };\r\n    case LOGOUT:\r\n    case CLEAR_USER_LISTS:\r\n      return {};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userListsReducer;\r\n","import { FETCH_SUBSCRIBERS, CLEAR_SUBSCRIBERS, LOGOUT } from \"../actions\";\r\n\r\nconst subscribersListReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_SUBSCRIBERS:\r\n      return { ...action.payload };\r\n    case LOGOUT:\r\n    case CLEAR_SUBSCRIBERS:\r\n      return {};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default subscribersListReducer;\r\n","import { FETCH_TEMPLATES, LOGOUT, CLEAR_TEMPLATES } from \"../actions/index\";\r\n\r\nconst templatesReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_TEMPLATES:\r\n      return { ...action.payload };\r\n    case LOGOUT:\r\n    case CLEAR_TEMPLATES:\r\n      return {};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default templatesReducer;\r\n","import { FETCH_CAMPAIGNS, LOGOUT, CLEAR_CAMPAIGNS } from \"../actions/index\";\r\n\r\nconst campaignsReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_CAMPAIGNS:\r\n      return { ...action.payload };\r\n    case LOGOUT:\r\n    case CLEAR_CAMPAIGNS:\r\n      return {};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default campaignsReducer;\r\n","import { FETCH_SETTINGS, CLEAR_SETTINGS, LOGOUT } from \"../actions\";\r\n\r\nconst settingsReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_SETTINGS:\r\n      return { ...action.payload };\r\n    case LOGOUT:\r\n    case CLEAR_SETTINGS:\r\n      return {};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default settingsReducer;\r\n","import { FETCH_ANALYTICS, CLEAR_ANALYTICS, LOGOUT } from \"../actions/index\";\r\n\r\nconst analyticsReducer = (state = [], action) => {\r\n  switch (action.type) {\r\n    case FETCH_ANALYTICS:\r\n      return [...action.payload];\r\n    case LOGOUT:\r\n    case CLEAR_ANALYTICS:\r\n      return [];\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default analyticsReducer;\r\n","import { FETCH_USERS, LOGOUT, CLEAR_USERS } from \"../actions\";\r\n\r\nconst userReducer = (state = { total: 0 }, action) => {\r\n  switch (action.type) {\r\n    case FETCH_USERS:\r\n      return { ...action.payload };\r\n    case LOGOUT:\r\n    case CLEAR_USERS:\r\n      return { total: 0 };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport sessionReducer from \"./sessionReducer\";\r\nimport userListsReducer from \"./userListsReducer\";\r\nimport subscribersReducer from \"./subscribersReducer\";\r\nimport templatesReducer from \"./templatesReducer\";\r\nimport campaignsReducer from \"./campaignsReducer\";\r\nimport settingsReducer from \"./settingsReducer\";\r\nimport analyticsReducer from \"./analyticsReducer\";\r\nimport usersReducer from \"./usersReducer\";\r\n\r\nexport default combineReducers({\r\n  session: sessionReducer,\r\n  userLists: userListsReducer,\r\n  subscribers: subscribersReducer,\r\n  templates: templatesReducer,\r\n  campaigns: campaignsReducer,\r\n  analytics: analyticsReducer,\r\n  settings: settingsReducer,\r\n  users: usersReducer,\r\n});\r\n","import { createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport reducers from \"../reducers\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst middlewares = [thunk];\r\n\r\nexport default createStore(\r\n  reducers,\r\n  composeEnhancers(applyMiddleware(...middlewares))\r\n);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport App from \"./App\";\r\nimport store from \"./config/store\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}