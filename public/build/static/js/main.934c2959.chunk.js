(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{1031:function(e,t,a){},1106:function(e,t,a){},1107:function(e,t,a){},1391:function(e,t,a){},1405:function(e,t){},1407:function(e,t){},1418:function(e,t){},1420:function(e,t){},1445:function(e,t){},1447:function(e,t){},1448:function(e,t){},1453:function(e,t){},1455:function(e,t){},1474:function(e,t){},1486:function(e,t){},1489:function(e,t){},1492:function(e,t,a){},1494:function(e,t,a){},1495:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(0),s=a.n(r),c=a(57),i=a.n(c),o=a(33),l=a(81),u=a(17),d=a(23),p=a(867),b=a(829),j=a(1511),h=a(167),f=a(16),m=a.n(f),g=a(42),O=a(1506),x=a(1510),v=a(326),y=a(107),S=a(1513),w=a(1514),k={emailValidator:new RegExp(/[a-zA-Z0-9._-]{1,}@[a-zA-Z0-9._-]{1,}[.]{1}[a-zA-Z0-9._-]{1,}/),passwordValidator:new RegExp(/^.{4,}$/)},C="".concat(window.location.protocol,"//").concat(window.location.hostname).concat("localhost"===window.location.hostname?":3001":""),I=["Unconfirmed","Complaint","Bounce:Permanent","Bounce:Transient","Bounce:Undertermined"],E=["default","error","warning","processing","success"],N={"Super Admin":0,Admin:1,User:2},T=["Super Admin","Admin","User"],D=a(825),L=C,F=a.n(D).a.create({baseURL:L}),A="LOGOUT",M="LOGIN",P="FETCH_USER_LISTS",R="CLEAR_USER_LISTS",z="FETCH_SUBSCRIBERS",_="CLEAR_SUBSCRIBERS",U="FETCH_TEMPLATES",V="CLEAR_TEMPLATES",K="FETCH_CAMPAIGNS",B="CLEAR_CAMPAIGNS",Y="FETCH_SETTINGS",q="CLEAR_SETTINGS",H="FETCH_ANALYTICS",$="CLEAR_ANALYTICS",G="FETCH_USERS",W="CLEAR_USERS",J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o,l,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.email,r=e.password,s=e.remember,c=e.changeLoadingState,i=e.onError,t.prev=1,(o=localStorage.getItem("token")||sessionStorage.getItem("token"))||n||r){t.next=5;break}return t.abrupt("return",a({type:A}));case 5:return c&&c(!0),t.next=8,F.post("/auth/login",{email:n,password:r,token:o});case 8:l=t.sent,u=l.data,F.interceptors.request.use((function(e){return!e.headers.authorization&&u.token&&(e.headers.authorization=u.token),e}),(function(e){return Promise.reject(e)})),c&&c(!1),sessionStorage.setItem("token",u.token),s&&localStorage.setItem("token",u.token),a({type:M,payload:u}),t.next=23;break;case 17:t.prev=17,t.t0=t.catch(1),c&&c(!1),localStorage.removeItem("token"),sessionStorage.removeItem("token"),i(t.t0.response);case 23:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()},Z=(a(902),Object(o.b)((function(e,t){var a=e.session;return Object(u.a)({session:a},t)}),{createSession:J})((function(e){var t=O.a.useForm(),a=Object(d.a)(t,1)[0],r=s.a.useState(!1),c=Object(d.a)(r,2),i=c[0],o=c[1],l=function(){var t=Object(g.a)(m.a.mark((function t(n){var r,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.email,s=n.password,c=n.remember,(0,e.createSession)({email:r,password:s,remember:c,changeLoadingState:o,onError:function(e){if(e){var t=e.data;a.setFields([{name:t.field,errors:[t.error]}])}}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(e){return a.setFieldsValue(Object(h.a)({},e.target.id,e.target.value.trim()))};return Object(n.jsx)(O.a,{form:a,className:"login-form",initialValues:{email:localStorage.getItem("email"),remember:!1},onFinish:l,children:Object(n.jsxs)(b.a,{spinning:i,indicator:Object(n.jsx)(j.a,{spin:!0}),tip:"Please Wait...",size:"large",children:[Object(n.jsx)(O.a.Item,{name:"email",validateTrigger:"onBlur",rules:[{required:!0,message:"Please enter your email!"},{pattern:k.emailValidator,message:"Please enter a valid email"}],children:Object(n.jsx)(x.a,{prefix:Object(n.jsx)(S.a,{className:"site-form-item-icon"}),placeholder:"Email",onChange:u})}),Object(n.jsx)(O.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your Password!"}],children:Object(n.jsx)(x.a.Password,{prefix:Object(n.jsx)(w.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password",onChange:u})}),Object(n.jsx)(O.a.Item,{children:Object(n.jsx)(O.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(n.jsx)(v.a,{children:"Remember me"})})}),Object(n.jsx)(O.a.Item,{children:Object(n.jsx)(y.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"})})]})})}))),X=a(1499),Q=a(386),ee=a(184),te=(a(539),function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.session.user}));return Object(n.jsxs)("div",{className:"header-content",children:[Object(n.jsx)(Q.a,{overlay:Object(n.jsx)(ee.a,{children:Object(n.jsx)(ee.a.Item,{onClick:function(){return e({type:A})},children:Object(n.jsx)(y.a,{type:"primary",children:Object(n.jsx)(l.b,{to:"/",children:"Logout"})})})}),placement:"bottomCenter",arrow:!0,children:Object(n.jsxs)("span",{children:[t.firstName,Object(n.jsx)(S.a,{})]})})," "]})}),ae=function(){return Object(n.jsxs)(X.a.Header,{className:"header",style:{position:"fixed",zIndex:10,height:"80px",width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 25px",backgroundImage:"linear-gradient(to-right,#DE6834,#FFE7D4,#565CB0)"},children:[Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"logo",children:[Object(n.jsx)("span",{children:"CQ "})," Campaigns"]})}),Object(n.jsx)(te,{})]})},ne=a(58),re=a.n(ne),se=a(93),ce=a(1518),ie=a(1519),oe=a(1515),le=a(1516),ue=a(1517),de=a(1528),pe=["sub1","sub2","sub3","sub4"],be={dashboard:{link:"1"},lists:{link:"sub1",create:"2",manage:"3"},templates:{link:"sub2",create:"4",manage:"5"},campaigns:{link:"sub3",create:"6",manage:"7"},users:{link:"sub4",create:"8",manage:"9"},settings:{link:"10"}},je=function(e){if("/"===e)return{};var t=e.split("/").filter((function(e){return e.length>0})),a={};switch(a.initialSubKey=be[t[0]]&&be[t[0]].link||1,t[0]){case"dashboard":case"settings":a.initialKey=a.initialSubKey;break;default:a.initialKey=Object.keys(be).includes(t[0])?"create"!==t[1]?be[t[0]].manage:be[t[0]].create:a.initialSubKey}return a},he=X.a.Sider;function fe(e){return Object(n.jsx)(ee.a.Item,Object(u.a)(Object(u.a)({},e),{},{children:Object(n.jsx)(l.b,{to:e.link,children:e.title})}))}var me=Object(se.f)((function(e){var t=e.location.pathname,a=s.a.useState(je(t)),c=Object(d.a)(a,2),i=c[0],l=i.initialKey,p=i.initialSubKey,b=c[1];Object(r.useEffect)((function(){b(je(t))}),[t]);var j,h=s.a.useState([p]),f=Object(d.a)(h,2),m=f[0],g=f[1],O=Object(o.d)((function(e){return e.session.user}));return Object(n.jsx)(he,{children:Object(n.jsx)(ee.a,{theme:"dark",mode:"inline",style:{height:"100%",width:"200px",position:"fixed"},defaultSelectedKeys:[l||"1"],openKeys:m,onOpenChange:function(e){var t=e.find((function(e){return-1===m.indexOf(e)}));-1===pe.indexOf(t)?g(e):g(t?[t]:[])},children:(j=O.role,[{link:"/",title:"Dashboard",icon:Object(n.jsx)(ce.a,{}),key:1},{title:"Lists",icon:Object(n.jsx)(ie.a,{}),key:"sub1",link:"/lists",subOptions:[{link:"/lists/create",title:"Create List",key:2},{link:"/lists",title:"Manage Lists",key:3}]},{title:"Templates",icon:Object(n.jsx)(oe.a,{}),key:"sub2",link:"/templates",subOptions:[{link:"/templates/create",title:"Create Template",key:4},{link:"/templates",title:"Manage Templates",key:5}]},{title:"Campaigns",icon:Object(n.jsx)(le.a,{}),key:"sub3",link:"/campaigns",subOptions:[{link:"/campaigns/create",title:"Create Campaign",key:6},{link:"/campaigns",title:"Manage Campaigns",key:7}]},{title:"Accounts",icon:Object(n.jsx)(ue.a,{}),key:"sub4",link:"/users",subOptions:[{link:"/users/create",title:"Create new account ",key:8},{link:"/users",title:j<1?"Users List":"Delete account",key:9}]},{link:"/settings",title:"Settings",icon:Object(n.jsx)(de.a,{}),key:10}].filter((function(e){return!(j>1)||"/users"!==e.link}))).map((function(e){return e.subOptions?(t=e,Object(n.jsx)(ee.a.SubMenu,Object(u.a)(Object(u.a)({},re.a.omit(t,["subOptions"])),{},{children:t.subOptions.map((function(e){return fe(e)}))}))):fe(e);var t}))})})})),ge=a(1507),Oe=a(1500),xe=a(198),ve=a(1504),ye=a(1503),Se=a(1520),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.pagination,r=e.filters,s=e.listID,c=e.callback,t.prev=1,t.next=4,F.get("/api/list/".concat(s),{params:{filters:r,pagination:n}});case 4:i=t.sent,o=i.data,c&&c(),a({type:z,payload:o}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},ke=function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n,r,s,c,i,o,l,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},a=t.listID,n=t.subIDs,r=void 0===n?[]:n,s=t.onSuccess,c=t.onError,e.prev=2,a){e.next=5;break}throw new Error("No listID provided");case 5:return i={},r.length&&(i.filters={_id:{$in:r}}),i.select={_id:0,feedback:0,createdAt:0,updatedAt:0,subscribed:0},e.next=10,F.get("/api/list/".concat(a,"/download"),{params:i});case 10:o=e.sent,l=o.data,s&&s(l),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),c&&c(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.callback,t.next=4,F.get("/api/list/",{params:re.a.omit(e,"callback")});case 4:r=t.sent,s=r.data,n&&n(),a({type:P,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log({error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o,l,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.update,r=e.select,s=e.pagination,c=e.filters,i=e.onSuccess,o=e.onError,t.prev=1,t.next=4,F.patch("/api/list",n);case 4:l=t.sent,u=l.data,i&&i(u),n.update.$push?we({listID:n._id,filters:c,pagination:s})(a):Ce({select:r,filters:c,pagination:s})(a),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0}),o&&o(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Ee=function(){var e=Object(g.a)(m.a.mark((function e(){var t,a,n,r,s,c,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},a=t.listName,n=t.tableData,r=t.onSuccess,s=t.onError,e.prev=2,e.next=5,F.post("/api/list/",{listName:a,data:n});case 5:c=e.sent,r&&r(c.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),s&&s(e.t0),console.log({error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){return{type:R}},Te=(a(998),Object(se.f)((function(e){var t=Object(r.useState)([]),a=Object(d.a)(t,2),s=a[0],c=a[1],i=Object(r.useState)([]),l=Object(d.a)(i,2),u=l[0],j=l[1],h=Object(r.useState)([]),f=Object(d.a)(h,2),v=f[0],S=f[1],w=Object(r.useState)(!1),k=Object(d.a)(w,2),I=k[0],E=k[1],N=O.a.useForm(),T=Object(d.a)(N,1)[0],D=Object(o.d)((function(e){return e.session.token})),L=Object(o.c)(),F=function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(!0),n=function(t){e.hideModal&&e.hideModal(),E(!1),p.b[t.warn?"warn":"success"](t.success||t.warn),t.faultyRecords&&0!==t.faultyRecords.length&&p.b.error("".concat(t.faultyRecords.length," Faulty record(s)")),T.resetFields(),A()},r=function(e){E(!1),console.log("onError",e),p.b.error(e.response.data.error)},e.match.params.id?(s={_id:e.match.params.id,update:{$push:{subscribers:u}}},L(Ie({update:s,onSuccess:n,onError:r,pagination:e.pagination}))):Ee({listName:a.listName,tableData:u,onSuccess:n,onError:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){c([]),S([]),j([])};return Object(n.jsx)(b.a,{spinning:I,tip:"Loading...",size:"large",children:Object(n.jsxs)(O.a,{form:T,className:"create-list-form",size:"large",onFinish:F,children:[!e.match.params.id&&Object(n.jsx)(O.a.Item,{name:"listName",rules:[{required:!0,message:"Please enter list name"}],children:Object(n.jsx)(x.a,{placeholder:"Enter List Name"})}),Object(n.jsx)(O.a.Item,{name:"dragger",rules:[{required:!0,message:"Please Upload a file"}],children:Object(n.jsxs)(ve.a.Dragger,{name:"file",headers:{authorization:D},action:"".concat(C,"/api/list/upload"),onChange:function(e){var t=Object(xe.a)(e.fileList);t=t.slice(-1),c(t);var a=e.file.status;if("done"===a){if("string"===typeof e.file.response)return p.b.error(e.file.response);p.b.success("".concat(e.file.name," file uploaded successfully."));var n=Object.keys(re.a.omit(e.file.response[0],"key")).map((function(e){return{title:re.a.startCase(e),key:e,dataIndex:e}}));S(n),j(e.file.response)}else"error"===a&&p.b.error("".concat(e.file.name," file upload failed."))},fileList:s,onRemove:A,children:[Object(n.jsx)("p",{className:"ant-upload-drag-icon",children:Object(n.jsx)(Se.a,{})}),Object(n.jsx)("h2",{children:"Import CSV"}),Object(n.jsx)("p",{className:"ant-upload-text",children:"Please ensure the first row of the CSV file contains column names. This row must contain an email header."}),Object(n.jsx)("p",{className:"ant-upload-hint",children:"Click or drag file to this area to upload"})]})}),u.length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ye.a,{scroll:{x:!0},columns:v,dataSource:u,pagination:{defaultPageSize:5}}),Object(n.jsx)(O.a.Item,{children:Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})})})]}):null]})})}))),De=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Create Lists",subTitle:"Create your lists here"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(Te,{})]})},Le=a(127),Fe=a(128),Ae=a(131),Me=a(130),Pe=a(509),Re=a(141),ze=a(285),_e=a.n(ze),Ue=function(e,t){return _e()(e).format(t)},Ve=function(e,t){return _e.a.duration(_e()(e).diff(_e()(t))).asMilliseconds()},Ke=a(1527),Be=function(e,t){return{filterDropdown:function(a){var r=a.setSelectedKeys,s=a.selectedKeys,c=a.confirm,i=a.clearFilters;return e.clearSearchFilters=i,Object(n.jsxs)("div",{style:{padding:8},children:[Object(n.jsx)(x.a,{ref:function(t){e.searchInput=t},placeholder:"Search ".concat(t),value:s[0],onChange:function(e){return r(e.target.value?[e.target.value]:[])},onPressEnter:function(){return e.handleSearch(s,c,t)},style:{width:188,marginBottom:8,display:"block"}}),Object(n.jsx)(y.a,{type:"primary",onClick:function(){return e.handleSearch(s,c,t)},icon:Object(n.jsx)(Ke.a,{}),size:"small",style:{width:90},children:"Search"}),Object(n.jsx)(y.a,{onClick:function(){return e.handleSearchReset(i)},size:"small",style:{width:90},children:"Reset"})]})},filterIcon:function(t){return Object(n.jsx)(Ke.a,{style:{color:e.state.searchText?"#1890ff":void 0,fontSize:"1rem"}})},onFilter:function(e,a){return a[t]?a[t].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){return e.searchInput.select()}),100)}}},Ye=(a(1031),s.a.createContext(null)),qe=function(e){e.index;var t=Object(Pe.a)(e,["index"]),a=O.a.useForm(),r=Object(d.a)(a,1)[0];return Object(n.jsx)(O.a,{form:r,component:!1,children:Object(n.jsx)(Ye.Provider,{value:r,children:Object(n.jsx)("tr",Object(u.a)({},t))})})},He=function(e){var t=e.title,a=e.editable,s=e.children,c=e.dataIndex,i=e.record,o=e.handleSave,p=Object(Pe.a)(e,["title","editable","children","dataIndex","record","handleSave"]),b=Object(r.useState)(!1),j=Object(d.a)(b,2),f=j[0],v=j[1],y=Object(r.useRef)(null),S=Object(r.useContext)(Ye);Object(r.useEffect)((function(){f&&y.current.focus()}),[f]);var w=function(){v(!f),S.setFieldsValue(Object(h.a)({},c,i[c]))},k=function(){var e=Object(g.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.validateFields();case 3:t=e.sent,w(),o(Object(u.a)(Object(u.a)({},i),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=s;return a&&(C=f?Object(n.jsx)(O.a.Item,{style:{margin:0},name:c,rules:[{required:!0,message:"".concat(t," is required.")}],children:Object(n.jsx)(x.a,{ref:y,onPressEnter:k,onBlur:k})}):Object(n.jsxs)("div",{className:"table-list-name-col",children:[Object(n.jsx)("div",{className:"editable-cell-value-wrap",onClick:w,children:s}),Object(n.jsx)(l.b,{to:"/lists/".concat(i._id),className:"link",children:Object(n.jsx)(Re.a,{placement:"left",title:"view",color:"blue",children:Object(n.jsx)(ie.a,{title:"view list",style:{fontSize:"1.3rem",marginLeft:"10px"}})})})]})),Object(n.jsx)("td",Object(u.a)(Object(u.a)({},p),{},{children:C}))},$e=function(e){Object(Ae.a)(a,e);var t=Object(Me.a)(a);function a(){var e;Object(Le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchText:"",sortedInfo:{},selectedRowKeys:[],onLoading:!1,filters:{},pageSize:5,pageNo:1},e.componentDidMount=function(){e.dispatchFetchUserLists()},e.componentWillUnmount=function(){return e.props.clearUserLists()},e.componentDidUpdate=function(t,a){var n=e.state,r=n.pageSize,s=n.pageNo,c=n.filters;re.a.isEqual(Object(u.a)({pageSize:r,pageNo:s},c),Object(u.a)({pageSize:a.pageSize,pageNo:a.pageNo},a.filters))||e.dispatchFetchUserLists()},e.dispatchFetchUserLists=function(t){var a=t||e.state,n=a.pageSize,r=a.pageNo,s=e.state.filters,c={skip:(r-1)*n,limit:n};e.setState({onLoading:!0});e.props.fetchUserLists({select:["name","createdAt","updatedAt","total"],filters:s,pagination:c,callback:function(){e.setState({onLoading:!1})}})},e.handleChange=function(t,a,n){e.setState({sortedInfo:n})},e.handleSearch=function(t,a,n){t[0]&&e.setState({filters:{name:{$regex:t[0],$options:"$i"}}}),e.setState({searchText:t[0]})},e.handleSearchReset=function(t){t(),e.setState({searchText:"",filters:{}})},e.onSelectedRowsDelete=Object(g.a)(m.a.mark((function t(){var a,n,r,s,c,i,o,l,u,d,b,j;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,n=a.selectedRowKeys,r=a.pageSize,s=a.pageNo,c=e.props,i=c.tableData,o=c.deleteUserLists,l=n.map((function(e){return i[e-1]._id})),e.setState({onLoading:!0}),u=["name","createdAt","updatedAt","total"],d=function(t){var a={onLoading:!1,selectedRowKeys:[]};n.length===i.length&&(a.pageNo=s>1?s-1:1),e.setState(a),p.b.success(t)},b=function(t){e.setState({onLoading:!1}),p.b.error(t.response.data.error),console.log({err:t})},j=((n.length===i.length?s>1?s-1:1:s)-1)*r,o({select:u,listIDs:l,onSuccess:d,onError:b,pagination:{skip:j,limit:r}});case 10:case"end":return t.stop()}}),t)}))),e.onSelectChange=function(t){return e.setState({selectedRowKeys:t})},e.handleSave=function(t){var a=e.props,n=a.editUserList,r=a.tableData;if(-1===re.a.findIndex(r,{_id:t._id,name:t.name})){e.setState({onLoading:!0});var s={_id:t._id,update:{$set:{name:t.name}}},c=e.state,i=c.pageSize;n({update:s,select:["name","createdAt","updatedAt","total"],pagination:{skip:(c.pageNo-1)*i,limit:i},onSuccess:function(t){e.setState({onLoading:!1}),p.b.success(t)},onError:function(t){e.setState({onLoading:!1}),p.b.error(t.response.data.error),console.log({err:t})}})}},e.onPaginationChange=function(t,a){e.setState({pageSize:a,pageNo:t})},e}return Object(Fe.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.sortedInfo,r=t.selectedRowKeys,s=t.onLoading,c=t.pageNo,i=this.props,o=i.tableData,l=i.total,d={selectedRowKeys:r,onChange:this.onSelectChange},p=r.length>0,b={body:{row:qe,cell:He}},j=[Object(u.a)({title:"List Name",key:"name",dataIndex:"name",editable:!0},Be(this,"name")),{title:"Total",key:"total",dataIndex:"total",sorter:function(e,t){return e.total-t.total},sortOrder:"total"===a.columnKey&&a.order,ellipsis:!0},{title:"Created At",key:"createdAt",dataIndex:"createdAt",render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.createdAt,t.createdAt)},sortOrder:"createdAt"===a.columnKey&&a.order,ellipsis:!0},{title:"Updated At",key:"updatedAt",dataIndex:"updatedAt",render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.updatedAt,t.updatedAt)},sortOrder:"updatedAt"===a.columnKey&&a.order,ellipsis:!0}].map((function(t){return t.editable?Object(u.a)(Object(u.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}));return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{type:"primary",onClick:this.onSelectedRowsDelete,disabled:!p,danger:!0,children:"Delete"}),Object(n.jsx)("span",{style:{marginLeft:8},children:p?"Selected ".concat(r.length," items"):""})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{onClick:function(){return e.handleSearchReset(e.clearSearchFilters)},children:"Clear Filters"}),Object(n.jsx)(y.a,{onClick:function(){return e.setState({sortedInfo:{}})},children:"Clear Sorters"})]})]}),Object(n.jsx)(ye.a,{scroll:{x:!0,y:600},rowClassName:function(){return"editable-row"},components:b,rowSelection:d,dataSource:o,columns:j,pagination:{showSizeChanger:!0,onChange:this.onPaginationChange,total:l,pageSizeOptions:[5,10,20,50],defaultPageSize:5,current:c},onChange:this.handleChange,loading:s})]})}}]),a}(s.a.Component),Ge=Object(o.b)((function(e,t){var a=e.userLists;return Object(u.a)(Object(u.a)({},t),{},{tableData:a.data,total:a.total})}),{fetchUserLists:Ce,clearUserLists:Ne,deleteUserLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o,l,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.listIDs,r=e.select,s=e.pagination,c=e.filters,i=e.onSuccess,o=e.onError,t.prev=1,t.next=4,F.delete("/api/list",{params:{listIDs:n}});case 4:l=t.sent,u=l.data,i&&i(u),Ce({select:r,filters:c,pagination:s})(a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),o&&o(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},editUserList:Ie})($e),We=function(e){Object(Ae.a)(a,e);var t=Object(Me.a)(a);function a(){return Object(Le.a)(this,a),t.apply(this,arguments)}return Object(Fe.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Manage Lists",subTitle:"Edit or Delete your Lists here"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(Ge,{})]})}}]),a}(s.a.Component),Je=a(390),Ze=a(1512),Xe=a(1526),Qe=a(1525),et=a(356),tt=a.n(et),at=function(e){Object(Ae.a)(a,e);var t=Object(Me.a)(a);function a(e){var r;return Object(Le.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){r.dispatchFetchSubscribers()},r.componentWillUnmount=function(){return r.props.clearSubscribers()},r.componentDidUpdate=function(e,t){var a=r.state,n=a.pageSize,s=a.pageNo,c=a.filters,i=a.searchText,o=r.props.tableData;!e.tableData&&o&&r.generateColumnConfig(),re.a.isEqual(Object(u.a)(Object(u.a)({pageSize:n,pageNo:s},c),{},{searchText:i}),Object(u.a)({pageSize:t.pageSize,pageNo:t.pageNo,searchText:t.searchText},t.filters))||(r.generateColumnConfig(),r.dispatchFetchSubscribers())},r.generateColumnConfig=function(){var e=r.state,t=e.filters,a=e.sortedInfo,s=r.props.tableData;if(s&&s.length)return[].concat(Object(xe.a)(Object.keys(re.a.omit(s[0],["key","_id","subscribed","feedback"]))),["subscribed","feedback"]).map((function(e){var s={title:re.a.startCase(e),key:e,dataIndex:e,width:"10vw"};switch(e){case"name":return Object(u.a)(Object(u.a)({},s),Be(Object(Je.a)(r),"name"));case"createdAt":return Object(u.a)(Object(u.a)({},s),{},{render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.createdAt,t.createdAt)},sortOrder:"createdAt"===a.columnKey&&a.order,ellipsis:!0});case"updatedAt":return Object(u.a)(Object(u.a)({},s),{},{render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.updatedAt,t.updatedAt)},sortOrder:"updatedAt"===a.columnKey&&a.order,ellipsis:!0});case"subscribed":return Object(u.a)(Object(u.a)({},s),{},{fixed:"right",filters:[{text:"Subscribed",value:!0},{text:"Unsubscribed",value:!1}],filteredValue:t[e]||null,filterMultiple:!1,render:function(e){return e?Object(n.jsx)(Ze.a,{color:"success",children:"Subscribed"}):Object(n.jsx)(Ze.a,{color:"error",children:"Unsubscribed"})}});case"feedback":return Object(u.a)(Object(u.a)({},s),{},{fixed:"right",filteredValue:t[e]||null,filters:I.map((function(e,t){return{text:e,value:t}})),render:function(e){return Object(n.jsx)(Ze.a,{color:E[e],children:I[e]})}});default:return s}}))},r.dispatchFetchSubscribers=function(e){var t=e||r.state,a=t.pageSize,n=t.pageNo,s=t.searchText,c=r.state.filters,i=Object.keys(c).filter((function(e){return c[e]&&c[e].length}));c=i.length?i.reduce((function(e,t){return e[t]={$in:c[t]},e}),{}):{},c=Object(u.a)(Object(u.a)({},c),{},{name:{$regex:s,$options:"$i"}});var o={skip:(n-1)*a,limit:a},l=r.props.match.params.id;r.setState({onLoading:!0});r.props.fetchSubscribers({filters:c,pagination:o,listID:l,callback:function(){r.setState({onLoading:!1})}})},r.handleChange=function(e,t,a){r.setState({sortedInfo:a,filters:t})},r.handleSearch=function(e,t,a){e[0]&&r.setState({searchText:e[0]})},r.handleSearchReset=function(e){e(),r.setState({searchText:"",filters:{}})},r.onSelectedRowsDelete=Object(g.a)(m.a.mark((function e(){var t,a,n,s,c,i,o,l,u,d,b,j,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.state,a=t.selectedRowKeys,n=t.pageSize,s=t.pageNo,c=t.filters,i=r.props,o=i.tableData,l=i.deleteSubscribers,u=r.props.match.params.id,d=a.map((function(e){return o[e-1]._id})),r.setState({onLoading:!0}),b=function(e){var t={onLoading:!1,selectedRowKeys:[]};a.length===o.length&&(t.pageNo=s>1?s-1:1),r.setState(t),p.b.success(e)},j=function(e){r.setState({onLoading:!1}),p.b.error(e.response.data.error),console.log({err:e})},h=((a.length===o.length?s>1?s-1:1:s)-1)*n,l({listID:u,subIDs:d,onSuccess:b,onError:j,pagination:{skip:h,limit:n},filters:c});case 10:case"end":return e.stop()}}),e)}))),r.onSelectChange=function(e){return r.setState({selectedRowKeys:e})},r.onPaginationChange=function(e,t){r.setState({pageSize:t,pageNo:e})},r.exportToCSV=Object(g.a)(m.a.mark((function e(){var t,a,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.match.params.id,a=r.props.tableData,n=r.state.selectedRowKeys,s=n.map((function(e){return a[e-1]._id})),e.next=6,ke({listID:t,subIDs:s,onSuccess:function(e){var t=e.listname,a=e.csv,n=new Blob([a],{type:"text/csv"}),r=document.createElement("a");r.download="".concat(t,".csv");var s=window.URL.createObjectURL(n);r.href=s,r.click(),window.URL.revokeObjectURL(s)},onError:function(e){return p.b.error(e.message)}});case 6:r.setState({selectedRowKeys:[]});case 7:case"end":return e.stop()}}),e)}))),r.showModal=function(){r.setState({isModalVisible:!0})},r.hideModal=function(){r.setState({isModalVisible:!1})},r.state={searchText:"",sortedInfo:{},selectedRowKeys:[],isModalVisible:!1,onLoading:!1,filters:{},pageSize:5,pageNo:1,columns:null},r}return Object(Fe.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,r=t.onLoading,s=t.isModalVisible,c=t.pageNo,i=t.pageSize,o=this.props,l=o.tableData,u=o.total,d={selectedRowKeys:a,onChange:this.onSelectChange},p=a.length>0,b=this.generateColumnConfig();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{type:"primary",onClick:this.onSelectedRowsDelete,disabled:!p,danger:!0,children:"Delete"}),Object(n.jsx)(y.a,{type:"primary",icon:Object(n.jsx)(Xe.a,{}),style:{marginLeft:"8px"},onClick:this.exportToCSV,children:"Export To CSV"}),Object(n.jsx)(y.a,{icon:Object(n.jsx)(Qe.a,{}),style:{color:"white",background:"#52c41a",marginLeft:"8px"},onClick:this.showModal,children:"Import CSV"}),Object(n.jsx)("span",{style:{marginLeft:"8px"},children:p?"Selected ".concat(a.length," items"):""})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{onClick:function(){return e.handleSearchReset(e.clearSearchFilters)},children:"Clear Filters"}),Object(n.jsx)(y.a,{onClick:function(){return e.setState({sortedInfo:{}})},children:"Clear Sorters"})]})]}),Object(n.jsx)(ye.a,{scroll:{x:!0,y:600},dataSource:l,columns:b,rowSelection:d,tableLayout:"auto",pagination:{showSizeChanger:!0,onChange:this.onPaginationChange,total:u,pageSizeOptions:[5,10,20,50],defaultPageSize:5,current:c},onChange:this.handleChange,loading:r}),Object(n.jsx)(tt.a,{title:"Import CSV",visible:s,width:"70vw",onCancel:this.hideModal,footer:null,children:Object(n.jsx)(Te,{hideModal:this.hideModal,pagination:{skip:(c-1)*i,limit:i}})})]})}}]),a}(s.a.Component),nt=Object(o.b)((function(e,t){var a=e.subscribers;return Object(u.a)(Object(u.a)({},t),{},{tableData:a.data,total:a.total})}),{fetchSubscribers:we,deleteSubscribers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o,l,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.listID,r=e.subIDs,s=e.onSuccess,c=e.onError,i=e.pagination,o=e.filters,t.prev=1,t.next=4,F.delete("/api/subscriber",{params:{listID:n,subIDs:r}});case 4:l=t.sent,u=l.data,we({pagination:i,filters:o,listID:n,callback:function(){return s(u)}})(a),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),c&&c(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},clearSubscribers:function(){return{type:_}}})(Object(se.f)(at)),rt=Object(se.f)((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Subscribers Table",subTitle:"Manage your subscribers here",onBack:function(){return e.history.goBack()}}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(nt,{})]})})),st=a(286),ct=a(170),it=a(403),ot=a(848),lt=a.n(ot),ut=(a(1105),{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{script:"sub"},{script:"super"}],[{header:[1,2,3,4,!1]}],[{direction:"rtl"},{align:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link","clean"]]}),dt=["header","size","script","bold","italic","underline","strike","blockquote","code-block","list","bullet","indent","link","image","color","background","font","align","direction"],pt=function(e){Object(Ae.a)(a,e);var t=Object(Me.a)(a);function a(){return Object(Le.a)(this,a),t.apply(this,arguments)}return Object(Fe.a)(a,[{key:"render",value:function(){return Object(n.jsx)(lt.a,{value:this.props.value||"",className:this.props.className||"",placeholder:this.props.placeholder||"",readOnly:this.props.read,theme:this.props.theme,onChange:this.props.onChange,style:this.props.style||void 0,modules:this.props.modules||ut,formats:this.props.formats||dt})}}]),a}(r.Component),bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.callback,t.prev=1,t.next=4,F.get("/api/template/",{params:re.a.omit(e,"callback")});case 4:r=t.sent,s=r.data,n&&n(),a({type:U,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.a)(m.a.mark((function t(){var a,n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.data,n=e.onSuccess,r=e.onError,t.prev=1,t.next=4,F.post("/api/template/",a);case 4:s=t.sent,n&&n(s.data),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log({error:t.t0}),r&&r(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.a)(m.a.mark((function t(){var a,n,r,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.templateID,n=e.data,r=e.onSuccess,s=e.onError,t.prev=1,t.next=4,F.patch("/api/template/".concat(a),n);case 4:c=t.sent,r&&r(c.data),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log({error:t.t0}),s&&s(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))},ft=function(){return{type:V}},mt={bodyType:0,analytics:[],templateName:null,body:null,htmlBody:null,subject:null,fromEmail:null,fromName:null};var gt=Object(se.f)((function(e){var t=e.templateID||e.match.params.id,a=e.form,s=Object(o.c)(),c=Object(r.useState)(mt.bodyType),i=Object(d.a)(c,2),l=i[0],p=i[1],b=Object(o.d)((function(e){return t&&e.templates.data&&e.templates.data.filter((function(e){return e._id===t}))[0]})),j=Object(r.useState)([]),f=Object(d.a)(j,2),m=f[0],g=f[1];Object(r.useEffect)((function(){t&&!b&&s(bt())}),[t,s,a,b]),Object(r.useEffect)((function(){var t=function(e){var t;return e?Object(u.a)(Object(u.a)({},re.a.pick(e,["analytics","fromEmail","fromName","bodyType","subject"])),{},(t={},Object(h.a)(t,1===e.bodyType?"htmlBody":"body",e.body),Object(h.a)(t,"templateName",e.name),t)):void 0}(b||mt);e.setInitialTemplateValues&&e.setInitialTemplateValues(t),e.setInitialFormValues&&e.setInitialFormValues(t),p(t.bodyType),a.setFieldsValue(t)}),[b,a]),Object(r.useEffect)((function(){return function(){return s(ft())}}),[s]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(st.a,{children:[Object(n.jsxs)(ct.a,{flex:"50%",style:{padding:"0.5rem 1rem 0 0"},children:[Object(n.jsx)("h2",{children:"Template Details"}),Object(n.jsx)(O.a.Item,{name:"templateName",label:"Name",rules:[{required:!0,message:"Please enter template name"}],children:Object(n.jsx)(x.a,{placeholder:"Enter Template Name"})})]}),Object(n.jsxs)(ct.a,{flex:"50%",style:{padding:"0.5rem 0 0 1rem"},children:[Object(n.jsx)("h2",{children:"Analytics"}),Object(n.jsx)(O.a.Item,{name:"analytics",children:Object(n.jsxs)(v.a.Group,{children:[Object(n.jsx)(v.a,{value:0,disabled:1!==l,children:"Insert tracking pixel. Available for HTML emails only."}),Object(n.jsx)("br",{}),Object(n.jsx)(v.a,{value:1,disabled:1!==l,children:"Track link clickthroughs, syntax: {linklabel/http://mylinktotrack.com}. Available for HTML emails only"}),Object(n.jsx)("br",{}),Object(n.jsx)(v.a,{value:2,children:"Add unsubscribe link"})]})})]})]}),Object(n.jsx)("h2",{children:"E-mail Details"}),Object(n.jsxs)(st.a,{children:[Object(n.jsx)(ct.a,{flex:1,children:Object(n.jsx)(O.a.Item,{name:"fromEmail",label:"From E-mail",rules:[{required:!0,message:"Please enter From E-mail"}],children:Object(n.jsx)(x.a,{type:"email",placeholder:"Enter From E-mail"})})}),Object(n.jsx)(ct.a,{flex:1,children:Object(n.jsx)(O.a.Item,{style:{marginLeft:"1rem"},name:"fromName",label:"From Name",rules:[{required:!0,message:"Please enter From Name"}],children:Object(n.jsx)(x.a,{placeholder:"Enter From Name"})})})]}),Object(n.jsx)("h2",{children:"Create email"}),Object(n.jsxs)(st.a,{children:[Object(n.jsx)(ct.a,{children:Object(n.jsx)(O.a.Item,{name:"bodyType",label:"Type",rules:[{required:!0}],children:Object(n.jsxs)(it.a.Group,{buttonStyle:"solid",onChange:function(e){if(p(e.target.value),a){var t=a.getFieldValue("analytics")||[];switch(e.target.value){case 0:t.includes(0)&&m.push(0),t.includes(1)&&m.push(1),g(m),t=t.filter((function(e){return 0!==e&&1!==e}));break;case 1:t=[].concat(Object(xe.a)(t),Object(xe.a)(m)),g([])}a.setFieldsValue({analytics:t})}},children:[Object(n.jsx)(it.a.Button,{value:0,children:"Plain Text"}),Object(n.jsx)(it.a.Button,{value:1,children:"HTML"})]})})}),Object(n.jsx)(ct.a,{flex:"auto",children:Object(n.jsx)(O.a.Item,{style:{marginLeft:"1.5rem"},name:"subject",label:"Subject",rules:[{required:!0,message:"Please enter a Subject"}],children:Object(n.jsx)(x.a,{placeholder:"Enter Subject"})})})]}),Object(n.jsx)(O.a.Item,{name:1===l?"htmlBody":"body",rules:[{required:!0,message:"E-mail Body is required"}],children:1===l?Object(n.jsx)(pt,{theme:"snow",value:(e.initialFormValues||mt).htmlBody,placeholder:"E-mail Body",onChange:function(e,t,n,r){var s=r.getHTML();r.getText().length&&a.setFieldsValue({htmlBody:s})},style:{background:"white"}}):Object(n.jsx)(x.a.TextArea,{style:{minHeight:"30vh"},placeholder:"E-mail Body"})})]})})),Ot={bodyType:0,analytics:[],templateName:null,body:null,htmlBody:null,subject:null,fromEmail:null,fromName:null},xt=Object(se.f)((function(e){var t=e.match.params.id,a=O.a.useForm(),s=Object(d.a)(a,1)[0],c=Object(r.useState)(e.initialFormValues||Ot),i=Object(d.a)(c,2),l=i[0],u=i[1],b=Object(o.c)();Object(r.useEffect)((function(){t||s.setFieldsValue(Ot)}),[s,t]);return Object(n.jsxs)(O.a,{form:s,onFinish:function(a){if(re.a.isEqual(l,a))return p.b.warning("No changes made",1),e.history.goBack();var n=a.htmlBody;delete a.htmlBody,n&&(a.body=n);var r=a.templateName;delete a.templateName,a.name=r;b((t?ht:jt)({data:a,templateID:t,onSuccess:function(t){return p.b.success(t,1),s.resetFields(),u({bodyType:0,analytics:[]}),e.history.goBack()},onError:function(e){return p.b.error("Some Error Occured",1)}}))},initialValues:l,layout:"vertical",children:[Object(n.jsx)(gt,{form:s,templateID:t,setInitialTemplateValues:u}),Object(n.jsxs)(y.a,{type:"primary",htmlType:"Submit",style:{marginTop:"2rem"},children:[e.match.params.id?"Update ":"Create "," Template"]})]})})),vt=Object(se.f)((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Create Template",subTitle:"Create or Edit your templates here",onBack:function(){return e.history.goBack()}}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(xt,{})]})})),yt=a(1524),St=(a(1106),function(e){Object(Ae.a)(a,e);var t=Object(Me.a)(a);function a(){var e;Object(Le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchText:"",sortedInfo:{},selectedRowKeys:[],onLoading:!1,filters:{campaignID:{$eq:null}},pageSize:10,pageNo:1},e.componentDidMount=function(){e.dispatchFetchTemplates()},e.componentDidUpdate=function(t,a){var n=e.state,r=n.pageSize,s=n.pageNo,c=n.searchText;re.a.isEqual({pageSize:r,pageNo:s,searchText:c},{pageSize:a.pageSize,pageNo:a.pageNo,searchText:a.searchText})||e.dispatchFetchTemplates()},e.componentWillUnmount=function(){return e.props.clearTemplates()},e.dispatchFetchTemplates=function(t){var a=t||e.state,n=a.pageSize,r=a.pageNo,s=e.state,c=s.filters,i=s.searchText;i&&i.length&&(c.name={$regex:i,$options:"$i"});var o={skip:(r-1)*n,limit:n};e.setState({onLoading:!0});e.props.fetchTemplates({filters:c,pagination:o,callback:function(){e.setState({onLoading:!1})}})},e.handleSearch=function(t,a,n){t[0]&&e.setState({searchText:t[0]})},e.handleChange=function(t,a,n){e.setState({sortedInfo:n})},e.handleSearchReset=function(t){t(),e.setState({searchText:"",filters:{campaignID:{$eq:null}}})},e.onSelectedRowsDelete=function(){var t=e.state,a=t.selectedRowKeys,n=t.pageSize,r=t.pageNo,s=t.filters,c=e.props,i=c.tableData,o=c.deleteTemplates,l=a.map((function(e){return i[e-1]._id}));e.setState({onLoading:!0});o({templateIDs:l,onSuccess:function(t){var n={onLoading:!1,selectedRowKeys:[]};a.length===i.length&&(n.pageNo=r>1?r-1:1),e.setState(n),p.b.success(t)},onError:function(t){e.setState({onLoading:!1}),p.b.error(t.response.data.error),console.log({err:t})},filters:s,pagination:{skip:((a.length===i.length?r>1?r-1:1:r)-1)*n,limit:n}})},e.onSelectChange=function(t){return e.setState({selectedRowKeys:t})},e.onPaginationChange=function(t,a){e.setState({pageSize:a,pageNo:t})},e}return Object(Fe.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,r=t.onLoading,s=t.pageNo,c=t.sortedInfo,i=this.props,o=i.tableData,d=i.total,p={selectedRowKeys:a,onChange:this.onSelectChange},b=a.length>0,j=[Object(u.a)({title:"Template Name",key:"name",dataIndex:"name",render:function(e,t){return Object(n.jsxs)("span",{className:"template-name",children:[t.name,Object(n.jsx)(l.b,{to:"/templates/".concat(t._id),className:"link",children:Object(n.jsx)(Re.a,{placement:"left",title:"Edit",color:"blue",children:Object(n.jsx)(yt.a,{title:"Edit template",style:{fontSize:"large"}})})})]})},width:"26%"},Be(this,"name")),{title:"Created At",key:"createdAt",dataIndex:"createdAt",render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.createdAt,t.createdAt)},sortOrder:"createdAt"===c.columnKey&&c.order,ellipsis:!0,width:"26%"},{title:"Updated At",key:"updatedAt",dataIndex:"updatedAt",render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.updatedAt,t.updatedAt)},sortOrder:"updatedAt"===c.columnKey&&c.order,ellipsis:!0,width:"26%"}];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{type:"primary",onClick:this.onSelectedRowsDelete,disabled:!b,danger:!0,children:"Delete"}),Object(n.jsx)("span",{style:{marginLeft:"8px"},children:b?"Selected ".concat(a.length," items"):""})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{onClick:function(){return e.handleSearchReset(e.clearSearchFilters)},children:"Clear Filters"}),Object(n.jsx)(y.a,{onClick:function(){return e.setState({sortedInfo:{}})},children:"Clear Sorters"})]})]}),Object(n.jsx)(ye.a,{scroll:{x:!0,y:600},columns:j,rowSelection:p,dataSource:o,pagination:{showSizeChanger:!0,onChange:this.onPaginationChange,total:d,pageSizeOptions:[5,10,20,50],defaultPageSize:10,current:s},onChange:this.handleChange,loading:r})]})}}]),a}(s.a.Component)),wt=Object(o.b)((function(e,t){var a=e.templates;return Object(u.a)(Object(u.a)({},t),{},{tableData:a.data,total:a.total})}),{fetchTemplates:bt,deleteTemplates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.templateIDs,r=e.pagination,s=e.filters,c=e.onSuccess,i=e.onError,t.prev=1,t.next=4,F.delete("/api/template",{params:{templateIDs:n}});case 4:o=t.sent,l=o.data,c&&c(l),bt({filters:s,pagination:r})(a),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0}),i&&i(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},clearTemplates:ft})(Object(se.f)(St)),kt=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Manage Templates",subTitle:"Edit or Delete your templates here"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(wt,{})]})},Ct=a(1501),It=a(1523),Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.callback,t.prev=1,t.next=4,F.get("/api/campaign/",{params:re.a.omit(e,"callback")});case 4:r=t.sent,s=r.data,n&&n(),a({type:K,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.body,r=e.onSuccess,s=e.onError,t.prev=1,t.next=4,F.post("/api/campaign/sendmail",n);case 4:c=t.sent,i=c.data,r&&r(i),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),s&&s(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Tt=function(){return{type:B}},Dt=Object(se.f)((function(e){var t=e.match.params.id,a=Object(o.d)((function(e){return t&&e.campaigns.data&&e.campaigns.data.filter((function(e){return e._id===t}))[0]})),s=Object(o.d)((function(e){return e.templates.data&&e.templates.data.filter((function(e){return!e.campaignID}))})),c=Object(o.d)((function(e){return e.userLists.data})),i=Object(r.useState)([]),l=Object(d.a)(i,2),b=l[0],j=l[1],h=Object(r.useState)([]),f=Object(d.a)(h,2),v=f[0],S=f[1],w=Object(r.useState)(),k=Object(d.a)(w,2),C=k[0],I=k[1],E=Object(o.c)(),N=O.a.useForm(),T=Object(d.a)(N,1)[0],D=Object(r.useState)({}),L=Object(d.a)(D,2),A=L[0],M=L[1],P=Object(r.useState)(),R=Object(d.a)(P,2),z=R[0],_=R[1];Object(r.useEffect)((function(){return t?E(Et({filters:{_id:t}})):(E(Tt()),T.resetFields(),_()),E(bt()),E(Ce()),function(){E(Tt()),E(ft()),E(Ne())}}),[E,t,e.location.pathname,T]),Object(r.useEffect)((function(){if(Array.isArray(s)){var e=s.map((function(e,t){return{key:e._id,label:e.name,value:e.name,index:t}}));j(e)}}),[s&&s.length]),Object(r.useEffect)((function(){if(Array.isArray(c)){var e=c.map((function(e,t){return{key:e._id,label:e.name,value:e.name,index:t}}));if(S(e),a){var t=e.filter((function(e){return e.key===a.listID})),n={name:a.name};t.length&&(n.selectedList=t[0].label,_(t[0])),T.setFieldsValue(n)}}}),[c,a,T]);var U=function(){var e=[];A||e.push("selectedTemplate"),z||e.push("selectedList"),e.length&&T.resetFields(e)},V=function(e){return Object(u.a)(Object(u.a)({},re.a.pick(e,["analytics","bodyType","subject","fromName","fromEmail"])),{},{body:e.body||e.htmlBody,name:e.templateName})};return Object(n.jsxs)(O.a,{form:T,onFinish:function(t){var n={name:t.name,template:V(t),listID:z.key},r=function(t){p.b.success(t),T.resetFields(),e.history.goBack()},s=function(e){p.b.error(e),console.log(e)};if(a){var c={name:a.name,template:V(C),listID:a.listID};if(re.a.isEqual(c,n))return p.b.warn("No Changes made");n.template._id=a.templateID,E(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.a)(m.a.mark((function t(){var a,n,r,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.campaignID,n=e.data,r=e.onSuccess,s=e.onError,t.prev=1,t.next=4,F.patch("/api/campaign/".concat(a),n);case 4:c=t.sent,r&&r(c.data),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log({error:t.t0}),s&&s(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))}({campaignID:a._id,data:n,onSuccess:r,onError:s}))}else E(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.a)(m.a.mark((function t(){var a,n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.data,n=e.onSuccess,r=e.onError,t.prev=1,t.next=4,F.post("/api/campaign/",a);case 4:s=t.sent,n&&n(s.data),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log({error:t.t0}),r&&r(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))}({data:n,onSuccess:r,onError:s}))},layout:"vertical",children:[Object(n.jsx)(O.a.Item,{name:"name",label:"Campaign Name",rules:[{required:!0,message:"Please Enter Campaign Name"}],children:Object(n.jsx)(x.a,{size:"large",placeholder:"Enter Campaign Name"})}),Object(n.jsx)(O.a.Item,{name:"selectedList",label:"Select List",rules:[{required:!0,message:"Please Select a List"}],children:Object(n.jsx)(Ct.a,{onBlur:U,onSelect:function(e,t){return _(t)},onChange:function(e){return _()},notFoundContent:"No Match",filterOption:!0,options:v,children:Object(n.jsx)(x.a,{suffix:Object(n.jsx)(It.a,{}),size:"large",placeholder:"Select List"})})}),Object(n.jsx)(O.a.Item,{name:"selectedTemplate",label:"Select Template",children:Object(n.jsx)(Ct.a,{onBlur:U,onSelect:function(e,t){return M(t)},onChange:function(e){return M()},filterOption:!0,options:b,notFoundContent:"No Match",children:Object(n.jsx)(x.a,{suffix:Object(n.jsx)(It.a,{}),size:"large",placeholder:"Select Template"})})}),Object(n.jsx)(gt,{form:T,setInitialTemplateValues:I,templateID:A&&A.key||a&&a.templateID}),Object(n.jsx)(O.a.Item,{children:Object(n.jsx)(y.a,{type:"primary",htmlType:"submit",children:a?"Update":"Submit"})})]})})),Lt=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"".concat(e.match.params.id?"Update":"Create"," Campaign"),subTitle:"create or edit your campaigns here",onBack:function(){return e.history.goBack()}}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(Dt,{})]})},Ft=(a(1107),function(e){Object(Ae.a)(a,e);var t=Object(Me.a)(a);function a(){var e;Object(Le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchText:"",sortedInfo:{},selectedRowKeys:[],onLoading:!1,filters:{},pageSize:5,pageNo:1},e.componentDidMount=function(){e.dispatchFetchCampaigns()},e.componentDidUpdate=function(t,a){var n=e.state,r=n.pageSize,s=n.pageNo,c=n.searchText;re.a.isEqual({pageSize:r,pageNo:s,searchText:c},{pageSize:a.pageSize,pageNo:a.pageNo,searchText:a.searchText})||e.dispatchFetchCampaigns()},e.componentWillUnmount=function(){return e.props.clearCampaigns()},e.dispatchFetchCampaigns=function(t){var a=t||e.state,n=a.pageSize,r=a.pageNo,s=e.state,c=s.filters,i=s.searchText;i&&i.length&&(c.name={$regex:i,$options:"$i"});var o={skip:(r-1)*n,limit:n};e.setState({onLoading:!0});e.props.fetchCampaigns({filters:c,pagination:o,callback:function(){e.setState({onLoading:!1})}})},e.handleSearch=function(t,a,n){t[0]&&e.setState({searchText:t[0]})},e.handleChange=function(t,a,n){e.setState({sortedInfo:n})},e.handleSearchReset=function(t){t(),e.setState({searchText:"",filters:{}})},e.onSelectedRowsDelete=function(){var t=e.state,a=t.selectedRowKeys,n=t.pageSize,r=t.pageNo,s=t.filters,c=e.props,i=c.tableData,o=c.deleteCampaigns,l=a.map((function(e){return i[e-1]._id}));e.setState({onLoading:!0});o({campaignIDs:l,onSuccess:function(t){var n={onLoading:!1,selectedRowKeys:[]};a.length===i.length&&(n.pageNo=r>1?r-1:1),e.setState(n),p.b.success(t)},onError:function(t){e.setState({onLoading:!1}),p.b.error(t.response.data.error),console.log({err:t})},filters:s,pagination:{skip:((a.length===i.length?r>1?r-1:1:r)-1)*n,limit:n}})},e.onSelectChange=function(t){return e.setState({selectedRowKeys:t})},e.onPaginationChange=function(t,a){e.setState({pageSize:a,pageNo:t})},e}return Object(Fe.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,r=t.onLoading,s=t.pageNo,c=t.sortedInfo,i=this.props,o=i.tableData,d=i.total,p={selectedRowKeys:a,onChange:this.onSelectChange},b=a.length>0,j=[Object(u.a)(Object(u.a)({title:"Campaign Name",key:"name",dataIndex:"name"},Be(this,"name")),{},{width:"20%"}),{title:"Created At",key:"createdAt",dataIndex:"createdAt",render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.createdAt,t.createdAt)},sortOrder:"createdAt"===c.columnKey&&c.order,ellipsis:!0,width:"15%"}];return o&&o.length&&(j.splice(1,0,{title:"Sent",key:"sent",dataIndex:"sent",render:function(e,t){return t.analytics.sent},align:"center"},{title:"Delivered",key:"delivered",render:function(e,t){return t.analytics.delivered},dataIndex:"delivered",align:"center"},{title:"Bounced",key:"bounced",dataIndex:"bounced",render:function(e,t){return t.analytics.bounced},align:"center"},{title:"Opened",key:"open",dataIndex:"open",render:function(e,t){return t.analytics.open},align:"center"}),j.push({title:"Actions",key:"actions",dataIndex:"actions",width:"10%",fixed:"right",align:"center",render:function(e,t){return Object(n.jsx)(l.b,{to:"/campaigns/".concat(t._id),children:"Manage"})}})),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{type:"primary",onClick:this.onSelectedRowsDelete,disabled:!b,danger:!0,children:"Delete"}),Object(n.jsx)("span",{style:{marginLeft:"8px"},children:b?"Selected ".concat(a.length," items"):""})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{onClick:function(){return e.handleSearchReset(e.clearSearchFilters)},children:"Clear Filters"}),Object(n.jsx)(y.a,{onClick:function(){return e.setState({sortedInfo:{}})},children:"Clear Sorters"})]})]}),Object(n.jsx)(ye.a,{scroll:{x:!0,y:600},columns:j,rowSelection:p,dataSource:o,pagination:{showSizeChanger:!0,onChange:this.onPaginationChange,total:d,pageSizeOptions:[5,10,20,50],defaultPageSize:5,current:s},onChange:this.handleChange,loading:r})]})}}]),a}(s.a.Component)),At=Object(o.b)((function(e,t){var a=e.campaigns;return Object(u.a)(Object(u.a)({},t),{},{tableData:a.data,total:a.total})}),{fetchCampaigns:Et,deleteCampaigns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.campaignIDs,r=e.pagination,s=e.filters,c=e.onSuccess,i=e.onError,t.prev=1,t.next=4,F.delete("/api/campaign",{params:{campaignIDs:n}});case 4:o=t.sent,l=o.data,c&&c(l),Et({filters:s,pagination:r})(a),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0}),i&&i(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},clearCampaigns:Tt})(Object(se.f)(Ft)),Mt=a(508),Pt=["January","February","March","April","May","June","July","August","September","October","November","December"];function Rt(e){var t=[],a=Pt.map((function(){return!1}));e.forEach((function(e){var t=e._id.monthNo;a[t-1]=!0}));var n=0;for(e.forEach((function(e){var r=e._id.monthNo,s=e.sent,c=e.delivered,i=e.bounced;if(t.push({type:"sent",y:s,x:Pt[r-1]}),t.push({type:"delivered",y:c,x:Pt[r-1]}),t.push({type:"bounced",y:i,x:Pt[r-1]}),r<12)for(n=r;n<Pt.length&&!a[n];n++)t.push({type:"sent",y:0,x:Pt[n]}),t.push({type:"delivered",y:0,x:Pt[n]}),t.push({type:"bounced",y:0,x:Pt[n]}),a[n]=!0}));n<Pt.length&&!a[n];n++)t.push({type:"sent",y:0,x:Pt[n]}),t.push({type:"delivered",y:0,x:Pt[n]}),t.push({type:"bounced",y:0,x:Pt[n]}),a[n]=!0;return t}var zt=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.analytics}))||[];return Object(r.useEffect)((function(){var t;e((t="month",function(){var e=Object(g.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.get("/api/analytics".concat(t&&t.length?"?groupBy=".concat(t):""));case 3:n=e.sent,a({type:H,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}),[e]),Object(n.jsx)(Mt.Chart,{padding:[10,20,50,40],autoFit:!0,height:270,data:Rt(t),children:Object(n.jsx)(Mt.LineAdvance,{shape:"straight",point:!0,position:"x*y",color:"type"})})},_t=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Manage Campaigns",subTitle:"Manage your campaigns here"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(At,{}),Object(n.jsx)(zt,{})]})},Ut=a(1509),Vt=a(1508),Kt=a(1505),Bt=a(1522),Yt=(a(1391),function(e){var t=e.match.params.id,a=Object(o.d)((function(e){return e.campaigns.data?e.campaigns.data[0]:null})),s=Object(o.d)((function(e){return e.templates.data?e.templates.data[0]:null})),c=Object(o.d)((function(e){return e.userLists.data?e.userLists.data[0]:null})),i=Object(o.c)(),u=Object(r.useState)(!1),j=Object(d.a)(u,2),h=j[0],f=j[1],m=Object(r.useState)(!1),g=Object(d.a)(m,2),O=g[0],v=g[1],S=Object(r.useState)(!1),w=Object(d.a)(S,2),C=w[0],I=w[1],E=Object(r.useState)(!1),N=Object(d.a)(E,2),T=N[0],D=N[1],L=Object(r.useState)(!1),F=Object(d.a)(L,2),A=F[0],M=F[1],P=Object(r.useState)(!1),R=Object(d.a)(P,2),z=R[0],_=R[1],U=Object(r.useState)(),V=Object(d.a)(U,2),K=V[0],B=V[1],Y=function(){v(!1)},q=function(){I(!1)},H=function(){f(!1)};Object(r.useEffect)((function(){return f(!0),i(Et({filters:{_id:t},callback:H})),function(){i(Tt()),i(ft()),i(Ne())}}),[i,t]),Object(r.useEffect)((function(){a&&(I(!0),v(!0),i(bt({filters:{_id:a.templateID},callback:Y})),i(Ce({filters:{_id:a.listID},callback:q})))}),[a,i]);var $=function(e){D(!1),M(!1),_(!1),p.b.success("Email(s) sent successfully")},G=function(e){D(!1),M(!1),e&&e.response?p.b.error(e.response.data.error):p.b.error("Some error occured")},W=Object(n.jsx)(Ut.a,{title:"Send Test Email",visible:z,footer:[Object(n.jsx)(y.a,{onClick:function(){_(!1)},children:"Cancel"},"back"),Object(n.jsx)(y.a,{type:"primary",loading:A,onClick:function(){!function(){if(!k.emailValidator.test(K))return p.b.error("Invalid Email");M(!0),i(Nt({body:{to:K,templateID:a.templateID},onSuccess:$,onError:G}))}()},children:"Submit"},"submit")],destroyOnClose:!0,closable:!1,children:Object(n.jsx)(x.a,{prefix:Object(n.jsx)(Bt.a,{}),onChange:function(e){return B(e.target.value)},placeholder:" E-mail",allowClear:!0})});return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Campaign Details",subTitle:"view and send your campaign",onBack:function(){return e.history.goBack()}}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(b.a,{spinning:h||O||C,children:h||O||C?null:s&&Object(n.jsxs)("div",{style:{background:"white",padding:"20px",fontSize:"1rem"},children:[Object(n.jsxs)("h2",{children:[a&&a.name," ",Object(n.jsx)(l.b,{to:"/campaigns/".concat(t,"/edit"),children:Object(n.jsx)(Re.a,{placement:"right",title:"Edit",color:"blue",children:Object(n.jsx)(yt.a,{style:{fontSize:"large"}})})})]}),Object(n.jsxs)("div",{children:[c&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ze.a,{color:"#108ee9",children:"List Attached :"})," ",Object(n.jsxs)(l.b,{to:"/lists/".concat(c._id),children:[" ",c.name," "]}),Object(n.jsx)(Oe.a,{type:"vertical"})]}),s&&function(){var e=s;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ze.a,{color:"#108ee9",children:"Template Attached :"}),Object(n.jsx)(l.b,{to:"/templates/".concat(e._id),children:s.name}),Object(n.jsx)(Oe.a,{type:"vertical"})]})}()]}),Object(n.jsxs)("p",{children:[Object(n.jsx)(Ze.a,{color:"#87d068",children:"From :"}),s.fromName,Object(n.jsxs)(Vt.a.Link,{children:[" ","<".concat(s.fromEmail,">")," "]})]}),Object(n.jsx)(Kt.a,{title:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ze.a,{color:"orange",children:"Subject :"})," ",s.subject]}),children:1===s.bodyType?Object(n.jsx)("div",{contentEditable:"false",dangerouslySetInnerHTML:{__html:s.body}}):s.body}),Object(n.jsxs)("div",{className:"card-footer",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{type:"primary",onClick:function(){if(!c)return p.b.error("No List Attached");D(!0),i(Nt({body:{listID:a.listID,campaignID:a._id,templateID:a.templateID},onSuccess:$,onError:G}))},loading:T,children:"Send Emails"}),W,Object(n.jsx)(y.a,{type:"secondary",onClick:function(){_(!0)},children:"Send Test Email"})]}),Object(n.jsx)("div",{})]})]})})]})}),qt=a(1401);function Ht(e){return $t.apply(this,arguments)}function $t(){return($t=Object(g.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt.genSalt(8);case 2:return a=e.sent,e.abrupt("return",qt.hash(t,a,null));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(g.a)(m.a.mark((function t(){var a,n,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.data,n=e.onSuccess,r=e.onError,t.prev=1,t.next=4,F.post("/api/user/",a);case 4:s=t.sent,n&&n(s.data),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log({error:t.t0}),r&&r(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filters,r=e.pagination,s=e.callback,t.prev=1,t.next=4,F.get("/api/user/",{params:{filters:n,pagination:r}});case 4:c=t.sent,s&&s(),a({type:G,payload:c.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log({error:t.t0});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.userID,r=e.payload,s=e.onError,c=e.onSuccess,t.prev=1,t.next=4,F.patch("/api/user/".concat(n),r);case 4:i=t.sent,c&&c(i.data),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log({error:t.t0}),s&&s(t.t0.response.data);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.data,r=e.onSuccess,s=e.onError,c=e.filters,i=e.pagination,t.prev=1,t.next=4,F.delete("/api/user/",{params:n});case 4:o=t.sent,r&&r(o.data),(c||i)&&Wt({filters:c,pagination:i})(a),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log({error:t.t0}),s&&s(t.t0.response.data);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Xt={wrapperCol:{xs:{offset:8},sm:{offset:8},md:{offset:10},lg:{offset:10}}},Qt=function(){var e=O.a.useForm(),t=Object(d.a)(e,1)[0],a=Object(o.c)(),s=Object(r.useState)(!1),c=Object(d.a)(s,2),i=c[0],l=c[1],j=function(){var e=Object(g.a)(m.a.mark((function e(n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(n.password);case 2:r=e.sent,s=Object(u.a)(Object(u.a)({},re.a.omit(n,"confirmPassword")),{},{password:r,role:n.role?1:2}),a(Gt({data:s,onSuccess:function(e){l(!1),p.b.success(e),t.resetFields()},onError:function(e){p.b.error(e.error),l(!1),t.setFields([{name:e.field,errors:[e.error]}])}}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{style:{width:"60%"},children:Object(n.jsx)(b.a,{spinning:i,children:Object(n.jsxs)(O.a,{style:{background:"white",padding:"2.2rem"},form:t,onFinish:j,layout:"vertical",children:[Object(n.jsx)(O.a.Item,{name:"firstName",label:"First Name",hasFeedback:!0,rules:[{required:!0,message:"Please enter First Name"}],children:Object(n.jsx)(x.a,{placeholder:"Enter First Name"})}),Object(n.jsx)(O.a.Item,{name:"lastName",label:"Last Name",hasFeedback:!0,rules:[{required:!0,message:"Please enter Last Name"}],children:Object(n.jsx)(x.a,{placeholder:"Please enter Last Name"})}),Object(n.jsx)(O.a.Item,{name:"email",label:"Email",hasFeedback:!0,rules:[{required:!0,message:"Please Enter Email"},{pattern:k.emailValidator,message:"Please enter a valid email"}],children:Object(n.jsx)(x.a,{placeholder:"Enter Email"})}),Object(n.jsx)(O.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please Enter password"},{pattern:k.passwordValidator,message:"Password must be atleast of 4 characters"}],hasFeedback:!0,children:Object(n.jsx)(x.a,{type:"password",placeholder:"Enter password"})}),Object(n.jsx)(O.a.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("Passwords do not match!"):Promise.resolve()}}}],children:Object(n.jsx)(x.a,{type:"password",placeholder:"Enter password again"})}),Object(n.jsx)(O.a.Item,{name:"role",valuePropName:"checked",children:Object(n.jsx)(v.a,{children:"Has Admin Rights"})}),Object(n.jsx)(O.a.Item,Object(u.a)(Object(u.a)({},Xt),{},{children:Object(n.jsx)(y.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]})})})},ea=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Create User",subTitle:"create new users here"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(Qt,{})})]})},ta={wrapperCol:{xs:{offset:8},sm:{offset:8},md:{offset:10},lg:{offset:10}}},aa=function(){var e=O.a.useForm(),t=Object(d.a)(e,1)[0],a=Object(o.d)((function(e){return e.session.user})),s=Object(r.useState)(!1),c=Object(d.a)(s,2),i=c[0],l=c[1],b=Object(r.useState)(""),j=Object(d.a)(b,2),h=j[0],f=j[1],m=Object(o.c)();return Object(n.jsx)("div",{style:{width:"60%"},children:Object(n.jsxs)(O.a,{requiredMark:!1,style:{background:"white",padding:"2.2rem"},form:t,onFinish:function(){var e={emails:[h]};l(!0);m(Zt({data:e,onSuccess:function(e){f(""),l(!1),p.b.success(e),t.resetFields(),0===a.role&&m(Wt())},onError:function(e){l(!1),p.b.error(e.error)}}))},layout:"vertical",children:[Object(n.jsx)(O.a.Item,{name:"email",label:"Email",validateTrigger:"onSubmit",rules:[function(e){e.getFieldValue;return{validator:function(e,t){return t&&t.match(k.emailValidator)?Promise.resolve():Promise.reject("Please enter a valid email")}}}],children:Object(n.jsx)(x.a,{prefix:Object(n.jsx)(Bt.a,{}),onChange:function(e){!function(e){f(e.target.value),t.setFields([{name:"email",errors:null}])}(e)},placeholder:"Enter Email"})}),Object(n.jsx)(O.a.Item,Object(u.a)(Object(u.a)({},ta),{},{children:Object(n.jsx)(y.a,{type:"danger",loading:i,htmlType:"submit",children:"Delete"})}))]})})},na=a(201),ra=a(1521),sa=function(e){var t=e.ChangePasswordModalVisible,a=e.changeParentState,s=e.userID,c=O.a.useForm(),i=Object(d.a)(c,1)[0],l=Object(o.c)(),u=Object(r.useState)(!1),b=Object(d.a)(u,2),j=b[0],h=b[1],f=function(){var e=Object(g.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht(t.password);case 2:n=e.sent,l(Jt({userID:s,payload:{password:n},onSuccess:function(e){h(!1),p.b.success(e),a({userID:null,ChangePasswordModalVisible:!1}),i.resetFields()},onError:function(e){p.b.error(e.error),h(!1),i.setFields([{name:e.field,errors:[e.error]}])}}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(Ut.a,{title:"Change Password",visible:t,footer:!1,destroyOnClose:!0,closable:!1,children:Object(n.jsxs)(O.a,{style:{background:"white"},form:i,onFinish:f,layout:"vertical",children:[Object(n.jsx)(O.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please Enter password"},{pattern:k.passwordValidator,message:"Password must be atleast of 4 characters"}],hasFeedback:!0,children:Object(n.jsx)(x.a,{type:"password",prefix:Object(n.jsx)(ra.a,{}),placeholder:"Enter password"})}),Object(n.jsx)(O.a.Item,{name:"confirmPassword",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("Passwords do not match!"):Promise.resolve()}}}],children:Object(n.jsx)(x.a,{type:"password",prefix:Object(n.jsx)(ra.a,{}),placeholder:"Enter password again"})}),Object(n.jsxs)(O.a.Item,{children:[Object(n.jsx)(y.a,{loading:j,type:"primary",htmlType:"submit",children:"Submit"}),Object(n.jsx)(y.a,{onClick:function(){i.resetFields(),a({userID:null,ChangePasswordModalVisible:!1})},children:"Cancel"},"back")]})]})})},ca=(a(1492),function(e){Object(Ae.a)(a,e);var t=Object(Me.a)(a);function a(){var e;Object(Le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchText:"",sortedInfo:{},selectedRowKeys:[],onLoading:!1,filters:{},pageSize:5,pageNo:1,ChangePasswordModalVisible:!1,userID:null},e.componentDidMount=function(){e.dispatchFetchUsers()},e.componentDidUpdate=function(t,a){var n=e.state,r=n.pageSize,s=n.pageNo,c=n.searchText;re.a.isEqual({pageSize:r,pageNo:s,searchText:c},{pageSize:a.pageSize,pageNo:a.pageNo,searchText:a.searchText})||e.dispatchFetchUsers()},e.componentWillUnmount=function(){return e.props.clearUsers()},e.dispatchFetchUsers=function(t){var a=t||e.state,n=a.pageSize,r=a.pageNo,s=e.state,c=s.filters,i=s.searchText;i&&i.length&&(c.name={$regex:i,$options:"$i"});var o={skip:(r-1)*n,limit:n};e.setState({onLoading:!0});e.props.getUsers({filters:c,pagination:o,callback:function(){e.setState({onLoading:!1})}})},e.handleSearch=function(t,a,n){t[0]&&e.setState({searchText:t[0]})},e.handleChange=function(t,a,n){e.setState({sortedInfo:n})},e.handleSearchReset=function(t){t(),e.setState({searchText:"",filters:{}})},e.onSelectedRowsDelete=function(){var t=e.state,a=t.selectedRowKeys,n=t.pageSize,r=t.pageNo,s=t.filters,c=e.props,i=c.tableData,o=c.deleteUsers,l=a.map((function(e){return i[e-1].email}))||[];e.setState({onLoading:!0});o({data:{emails:l},onSuccess:function(t){var n={onLoading:!1,selectedRowKeys:[]};a.length===i.length&&(n.pageNo=r>1?r-1:1),e.setState(n),p.b.success(t)},onError:function(t){e.setState({onLoading:!1}),p.b.error(t.response.data.error),console.log({err:t})},filters:s,pagination:{skip:((a.length===i.length?r>1?r-1:1:r)-1)*n,limit:n}})},e.onSelectChange=function(t){return e.setState({selectedRowKeys:t})},e.onPaginationChange=function(t,a){e.setState({pageSize:a,pageNo:t})},e.onChangePasswordClick=function(t){e.setState({ChangePasswordModalVisible:!0,userID:t})},e.onRoleChange=function(t,a){e.props.editUser({userID:a._id,payload:{role:t},onSuccess:function(t){p.b.success(t),e.dispatchFetchUsers()},onError:function(e){p.b.error(e)}})},e}return Object(Fe.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,r=t.onLoading,s=t.pageNo,c=t.sortedInfo,i=this.props,o=i.tableData,l=i.total,u=i.user,d={selectedRowKeys:a,onChange:this.onSelectChange},p=a.length>0,b=[{title:"First Name",key:"firstName",dataIndex:"firstName"},{title:"Last Name",key:"lastName",dataIndex:"lastName"},{title:"Email",key:"email",dataIndex:"email"},{title:"Role",key:"role",dataIndex:"role",align:"center",render:function(t,a){return Object(n.jsx)(na.a,{onChange:function(t){return e.onRoleChange(t,a)},loading:!1,defaultValue:t,style:{width:"160px"},disabled:u._id===a._id,children:T.map((function(e,t){return Object(n.jsx)(na.a.Option,{value:N[e],disabled:N[e]===a.role,children:e},t)}))})}},{title:"Created At",key:"createdAt",dataIndex:"createdAt",render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.createdAt,t.createdAt)},sortOrder:"createdAt"===c.columnKey&&c.order,ellipsis:!0,width:"20%"},{title:"Updated At",key:"updatedAt",dataIndex:"updatedAt",render:function(e){return Ue(e,"MMMM Do YYYY, h:mm:ss a")},sorter:function(e,t){return Ve(e.updatedAt,t.updatedAt)},sortOrder:"updatedAt"===c.columnKey&&c.order,ellipsis:!0,width:"20%"}];return o&&o.length&&b.push({title:"Actions",key:"actions",dataIndex:"actions",fixed:"right",render:function(t,a){return Object(n.jsx)(Vt.a.Link,{onClick:function(){return e.onChangePasswordClick(a._id)},children:"Change Password"})}}),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{type:"primary",onClick:this.onSelectedRowsDelete,disabled:!p,danger:!0,children:"Delete"}),Object(n.jsx)("span",{style:{marginLeft:"8px"},children:p?"Selected ".concat(a.length," items"):""})]}),Object(n.jsx)("div",{children:Object(n.jsx)(y.a,{onClick:function(){return e.setState({sortedInfo:{}})},children:"Clear Sorters"})})]}),Object(n.jsx)(sa,{ChangePasswordModalVisible:this.state.ChangePasswordModalVisible,changeParentState:function(t){return e.setState(t)},userID:this.state.userID}),Object(n.jsx)(ye.a,{scroll:{x:!0,y:600},columns:b,rowSelection:d,tableLayout:"auto",dataSource:o,pagination:{showSizeChanger:!0,onChange:this.onPaginationChange,total:l,pageSizeOptions:[5,10,20,50],defaultPageSize:5,current:s},onChange:this.handleChange,loading:r})]})}}]),a}(s.a.Component)),ia=Object(o.b)((function(e,t){var a=e.users,n=e.session;return Object(u.a)(Object(u.a)({},t),{},{tableData:a.data,total:a.total,user:n.user})}),{clearUsers:function(){return{type:W}},deleteUsers:Zt,getUsers:Wt,editUser:Jt})(Object(se.f)(ca)),oa=function(){var e=Object(o.d)((function(e){return e.session&&e.session.user}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Delete User",subTitle:"Delete users here"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(n.jsx)(aa,{})}),e&&0===e.role&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Oe.a,{}),Object(n.jsx)(ia,{})]})]})},la=Vt.a.Text,ua=function(){var e=Object(o.c)();Object(r.useEffect)((function(){e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.onSuccess,r=e.onError,t.prev=1,t.next=4,F.get("/api/settings");case 4:s=t.sent,c=s.data,n&&n(c),a({type:Y,payload:c}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0}),r&&r(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}())}),[e]);var t=Object(o.d)((function(e){return re.a.omit(e.settings,["userID","_id","__v"])})),a=O.a.useForm(),s=Object(d.a)(a,1)[0];Object(r.useEffect)((function(){s.setFieldsValue(t)}),[t,s]);var c=Object(r.useState)(!1),i=Object(d.a)(c,2),l=i[0],u=i[1];return Object(n.jsx)(st.a,{children:Object(n.jsx)(ct.a,{flex:"55%",children:Object(n.jsxs)(O.a,{layout:"vertical",form:s,style:{background:"white",padding:"2.2rem"},onFinish:function(a){if(re.a.isEqual(a,t))return p.b.info("No changes made");u(!0);e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(g.a)(m.a.mark((function t(a){var n,r,s,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.onSuccess,r=e.onError,s=e.payload,t.prev=1,t.next=4,F.post("/api/settings",s);case 4:c=t.sent,i=c.data,n&&n(i),a({type:Y,payload:s}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log({error:t.t0}),r&&r(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}({payload:a,onSuccess:function(e){return u(!1)},onError:function(e){console.log(e),u(!1)}}))},children:[Object(n.jsx)("h2",{children:"Mailjet Configuration"}),Object(n.jsx)(O.a.Item,{name:"MailjetUsername",label:Object(n.jsxs)("span",{children:[Object(n.jsxs)("h3",{children:["Mailjet Username -"," ",!t.MailjetUsername&&Object(n.jsx)(Ze.a,{color:"#f50",children:"Not Saved"})]}),Object(n.jsx)(la,{type:"secondary",children:"Your Mailjet public key"})]}),children:Object(n.jsx)(x.a,{placeholder:"Example: zVqHiOr8ClmcbVi3hHn2MZVb6fcW8HXS"})}),Object(n.jsx)(O.a.Item,{name:"MailjetPassword",label:Object(n.jsxs)("span",{children:[Object(n.jsxs)("h3",{children:["Mailjet Password -"," ",!t.MailjetPassword&&Object(n.jsx)(Ze.a,{color:"#f50",children:"Not Saved"})]}),Object(n.jsx)(la,{type:"secondary",children:"Your Mailjet private key"})]}),children:Object(n.jsx)(x.a,{placeholder:"Example: zVqHiOr8ClmcbVi3hHn2MZVb6fcW8HXS"})}),Object(n.jsx)(O.a.Item,{children:Object(n.jsx)(y.a,{type:"success",htmlType:"submit",loading:l,style:{color:"white",background:"#52c41a"},children:"Save Settings"})})]})})})},da=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Settings"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(ua,{})]})},pa=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ge.a,{className:"site-page-header",title:"Dashboard",subTitle:"View your Lists, Campaigns & Analytics"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(zt,{}),Object(n.jsx)("h2",{children:"Your Campaigns"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(At,{}),Object(n.jsx)("h2",{children:"Your Lists"}),Object(n.jsx)(Oe.a,{}),Object(n.jsx)(Ge,{})]})},ba=function(){var e=Object(o.d)((function(e){return e.session.user}));return Object(n.jsx)(X.a.Content,{className:"site-layout-background",style:{padding:"1rem",margin:0,minHeight:280},children:Object(n.jsxs)(se.c,{children:[Object(n.jsx)(se.a,{exact:!0,path:"/",component:pa}),Object(n.jsx)(se.a,{exact:!0,path:"/lists/create",component:De}),Object(n.jsx)(se.a,{exact:!0,path:"/lists",component:We}),Object(n.jsx)(se.a,{exact:!0,path:"/lists/:id",component:rt}),Object(n.jsx)(se.a,{exact:!0,path:"/templates/create",component:vt}),Object(n.jsx)(se.a,{exact:!0,path:"/templates/",component:kt}),Object(n.jsx)(se.a,{exact:!0,path:"/templates/:id",component:vt}),Object(n.jsx)(se.a,{exact:!0,path:"/campaigns/create",component:Lt},window.location.pathname),Object(n.jsx)(se.a,{exact:!0,path:"/campaigns/",component:_t}),Object(n.jsx)(se.a,{exact:!0,path:"/campaigns/:id",component:Yt}),Object(n.jsx)(se.a,{exact:!0,path:"/campaigns/:id/edit",component:Lt},window.location.pathname),Object(n.jsx)(se.a,{exact:!0,path:"/users/create",component:e.role<2?ea:function(){return Object(n.jsx)("h1",{children:"401: Not Authorized"})}}),Object(n.jsx)(se.a,{exact:!0,path:"/users/",component:e.role<2?oa:function(){return Object(n.jsx)("h1",{children:"401: Not Authorized"})}}),Object(n.jsx)(se.a,{exact:!0,path:"/settings",component:da}),Object(n.jsx)(se.a,{path:"",component:function(){return Object(n.jsx)("h1",{children:"404: Not Found"})}})]})})},ja=function(e){return Object(n.jsxs)(X.a,{style:{minHeight:"100vh",width:"100vw"},children:[Object(n.jsx)(ae,{}),Object(n.jsxs)(X.a,{style:{margin:"80px 0px 0px 0px"},children:[Object(n.jsx)(me,{}),Object(n.jsx)(ba,{})]})]})},ha=(a(1493),a(1494),Object(o.b)((function(e,t){var a=e.session.user;return Object(u.a)({user:a},t)}),{createSession:J})((function(e){var t=e.user,a=e.createSession,r=s.a.useState(!1),c=Object(d.a)(r,2),i=c[0],o=c[1];return s.a.useEffect((function(){t||a({changeLoadingState:o,onError:function(e){e&&"string"===typeof e.data&&p.b.error(e.data)}})}),[t,a]),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(b.a,{className:"spinner",spinning:i,indicator:Object(n.jsx)(j.a,{style:{color:"white",fontSize:"4rem"}})}),!i&&(t?Object(n.jsx)(ja,{}):Object(n.jsx)(Z,{}))]})}))),fa=a(219),ma=a(859),ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(u.a)(Object(u.a)({},e),t.payload);case A:return localStorage.removeItem("token"),sessionStorage.removeItem("token"),{};default:return e}},Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(u.a)({},t.payload);case A:case R:return{};default:return e}},xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(u.a)({},t.payload);case A:case _:return{};default:return e}},va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(u.a)({},t.payload);case A:case V:return{};default:return e}},ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(u.a)({},t.payload);case A:case B:return{};default:return e}},Sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(u.a)({},t.payload);case A:case q:return{};default:return e}},wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(xe.a)(t.payload);case A:case $:return[];default:return e}},ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{total:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(u.a)({},t.payload);case A:case W:return{total:0};default:return e}},Ca=Object(fa.c)({session:ga,userLists:Oa,subscribers:xa,templates:va,campaigns:ya,analytics:wa,settings:Sa,users:ka}),Ia=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||fa.d,Ea=[ma.a],Na=Object(fa.e)(Ca,Ia(fa.a.apply(void 0,Ea)));i.a.render(Object(n.jsx)(o.a,{store:Na,children:Object(n.jsx)(l.a,{children:Object(n.jsx)(ha,{})})}),document.getElementById("root"))},539:function(e,t,a){},902:function(e,t,a){},998:function(e,t,a){}},[[1495,1,2]]]);
//# sourceMappingURL=main.934c2959.chunk.js.map